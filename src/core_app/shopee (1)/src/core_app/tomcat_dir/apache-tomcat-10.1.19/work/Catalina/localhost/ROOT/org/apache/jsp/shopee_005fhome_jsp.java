/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/10.1.19
 * Generated at: 2026-03-01 13:23:34 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp;

import jakarta.servlet.*;
import jakarta.servlet.http.*;
import jakarta.servlet.jsp.*;
import model.ProductDTO;
import model.Admin;
import model.User;
import java.util.List;

public final class shopee_005fhome_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports,
                 org.apache.jasper.runtime.JspSourceDirectives {

  private static final jakarta.servlet.jsp.JspFactory _jspxFactory =
          jakarta.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  static {
    _jspx_dependants = new java.util.HashMap<java.lang.String,java.lang.Long>(2);
    _jspx_dependants.put("/WEB-INF/lib/jakarta.servlet.jsp.jstl-3.0.1.jar", Long.valueOf(1772342996000L));
    _jspx_dependants.put("jar:file:/D:/shopee%20(1)/src/core_app/tomcat_dir/apache-tomcat-10.1.19/webapps/ROOT/WEB-INF/lib/jakarta.servlet.jsp.jstl-3.0.1.jar!/META-INF/c-1_2.tld", Long.valueOf(1664428278000L));
  }

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.LinkedHashSet<>(3);
    _jspx_imports_packages.add("jakarta.servlet");
    _jspx_imports_packages.add("jakarta.servlet.http");
    _jspx_imports_packages.add("jakarta.servlet.jsp");
    _jspx_imports_classes = new java.util.LinkedHashSet<>(4);
    _jspx_imports_classes.add("java.util.List");
    _jspx_imports_classes.add("model.Admin");
    _jspx_imports_classes.add("model.User");
    _jspx_imports_classes.add("model.ProductDTO");
  }

  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems_005fend_005fbegin;

  private volatile jakarta.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public boolean getErrorOnELNotFound() {
    return false;
  }

  public jakarta.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
    _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems_005fend_005fbegin = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
  }

  public void _jspDestroy() {
    _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems.release();
    _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems_005fend_005fbegin.release();
  }

  public void _jspService(final jakarta.servlet.http.HttpServletRequest request, final jakarta.servlet.http.HttpServletResponse response)
      throws java.io.IOException, jakarta.servlet.ServletException {

    if (!jakarta.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      final java.lang.String _jspx_method = request.getMethod();
      if ("OPTIONS".equals(_jspx_method)) {
        response.setHeader("Allow","GET, HEAD, POST, OPTIONS");
        return;
      }
      if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method)) {
        response.setHeader("Allow","GET, HEAD, POST, OPTIONS");
        response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSPs only permit GET, POST or HEAD. Jasper also permits OPTIONS");
        return;
      }
    }

    final jakarta.servlet.jsp.PageContext pageContext;
    jakarta.servlet.http.HttpSession session = null;
    final jakarta.servlet.ServletContext application;
    final jakarta.servlet.ServletConfig config;
    jakarta.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    jakarta.servlet.jsp.JspWriter _jspx_out = null;
    jakarta.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("    \r\n");
      out.write("        \r\n");
      out.write("            \r\n");
      out.write("                \r\n");
      out.write("                    \r\n");
      out.write("                        <!DOCTYPE html>\r\n");
      out.write("                        <html lang=\"vi\">\r\n");
      out.write("\r\n");
      out.write("                        <head>\r\n");
      out.write("                            <meta charset=\"UTF-8\">\r\n");
      out.write("                            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n");
      out.write("                            <meta name=\"referrer\" content=\"no-referrer\">\r\n");
      out.write("                            <title>Shopee Việt Nam | Mua và Bán Trên Ứng Dụng Di Động Hoặc Website</title>\r\n");
      out.write("                            <link rel=\"stylesheet\"\r\n");
      out.write("                                href=\"https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css\">\r\n");
      out.write("                            <link rel=\"stylesheet\" href=\"css/style.css?v=2.0\">\r\n");
      out.write("                            <link rel=\"stylesheet\"\r\n");
      out.write("                                href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\">\r\n");
      out.write("                            <style>\r\n");
      out.write("                                /* Tinh chỉnh Fix lỗi Banner đè Menu do Header Fixed của Shopee */\r\n");
      out.write("                                .app__container {\r\n");
      out.write("                                    padding-top: 20px;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .grid {\r\n");
      out.write("                                    width: 1200px;\r\n");
      out.write("                                    max-width: 100%;\r\n");
      out.write("                                    margin: 0 auto;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .row {\r\n");
      out.write("                                    display: flex;\r\n");
      out.write("                                    flex-wrap: wrap;\r\n");
      out.write("                                    margin-left: -5px;\r\n");
      out.write("                                    margin-right: -5px;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .col {\r\n");
      out.write("                                    padding-left: 5px;\r\n");
      out.write("                                    padding-right: 5px;\r\n");
      out.write("                                    margin-bottom: 10px;\r\n");
      out.write("                                    width: 16.66667%;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                /* 6 items/row */\r\n");
      out.write("                                .header__navbar-item-link {\r\n");
      out.write("                                    text-decoration: none;\r\n");
      out.write("                                    color: white;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                /* Nút điều hướng Shopee Mall */\r\n");
      out.write("                                .nav-arrow-btn {\r\n");
      out.write("                                    position: absolute;\r\n");
      out.write("                                    top: 50%;\r\n");
      out.write("                                    transform: translateY(-50%);\r\n");
      out.write("                                    width: 25px;\r\n");
      out.write("                                    height: 25px;\r\n");
      out.write("                                    background-color: #fff;\r\n");
      out.write("                                    border-radius: 50%;\r\n");
      out.write("                                    border: none;\r\n");
      out.write("                                    display: flex;\r\n");
      out.write("                                    justify-content: center;\r\n");
      out.write("                                    align-items: center;\r\n");
      out.write("                                    box-shadow: 0 1px 12px 0 rgba(0, 0, 0, .12);\r\n");
      out.write("                                    cursor: pointer;\r\n");
      out.write("                                    z-index: 10;\r\n");
      out.write("                                    transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.2s;\r\n");
      out.write("                                    color: rgba(0, 0, 0, .54);\r\n");
      out.write("                                    font-size: 10px;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .nav-arrow-btn:hover {\r\n");
      out.write("                                    transform: translateY(-50%) scale(1.6);\r\n");
      out.write("                                    box-shadow: 0 1px 12px 0 rgba(0, 0, 0, .2);\r\n");
      out.write("                                    color: rgba(0, 0, 0, .8);\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .nav-arrow-btn--left {\r\n");
      out.write("                                    left: -12.5px;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .nav-arrow-btn--right {\r\n");
      out.write("                                    right: -12.5px;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                #topSearchGrid::-webkit-scrollbar {\r\n");
      out.write("                                    display: none;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                #topSearchGrid>a {\r\n");
      out.write("                                    flex: 0 0 calc((100% - 75px) / 6);\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                /* Giao diện Chat AI Shopee */\r\n");
      out.write("                                .shopee-chat-btn {\r\n");
      out.write("                                    position: fixed;\r\n");
      out.write("                                    bottom: 20px;\r\n");
      out.write("                                    right: 20px;\r\n");
      out.write("                                    width: 60px;\r\n");
      out.write("                                    height: 60px;\r\n");
      out.write("                                    background-color: #ee4d2d;\r\n");
      out.write("                                    color: white;\r\n");
      out.write("                                    border-radius: 50%;\r\n");
      out.write("                                    display: flex;\r\n");
      out.write("                                    justify-content: center;\r\n");
      out.write("                                    align-items: center;\r\n");
      out.write("                                    font-size: 24px;\r\n");
      out.write("                                    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);\r\n");
      out.write("                                    cursor: pointer;\r\n");
      out.write("                                    z-index: 1000;\r\n");
      out.write("                                    transition: transform 0.3s;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .shopee-chat-btn:hover {\r\n");
      out.write("                                    transform: scale(1.1);\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .shopee-chat-window {\r\n");
      out.write("                                    position: fixed;\r\n");
      out.write("                                    bottom: 90px;\r\n");
      out.write("                                    right: 20px;\r\n");
      out.write("                                    width: 350px;\r\n");
      out.write("                                    height: 480px;\r\n");
      out.write("                                    background: white;\r\n");
      out.write("                                    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);\r\n");
      out.write("                                    border-radius: 8px;\r\n");
      out.write("                                    display: none;\r\n");
      out.write("                                    flex-direction: column;\r\n");
      out.write("                                    z-index: 1000;\r\n");
      out.write("                                    overflow: hidden;\r\n");
      out.write("                                    border: 1px solid rgba(0, 0, 0, 0.05);\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .shopee-chat-header {\r\n");
      out.write("                                    background: linear-gradient(-180deg, #f53d2d, #f63);\r\n");
      out.write("                                    color: white;\r\n");
      out.write("                                    padding: 15px;\r\n");
      out.write("                                    font-size: 16px;\r\n");
      out.write("                                    font-weight: 500;\r\n");
      out.write("                                    display: flex;\r\n");
      out.write("                                    justify-content: space-between;\r\n");
      out.write("                                    align-items: center;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .shopee-chat-close {\r\n");
      out.write("                                    cursor: pointer;\r\n");
      out.write("                                    font-size: 18px;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .shopee-chat-messages {\r\n");
      out.write("                                    flex: 1;\r\n");
      out.write("                                    padding: 15px;\r\n");
      out.write("                                    overflow-y: auto;\r\n");
      out.write("                                    display: flex;\r\n");
      out.write("                                    flex-direction: column;\r\n");
      out.write("                                    gap: 10px;\r\n");
      out.write("                                    background: #f9f9f9;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .shopee-chat-messages::-webkit-scrollbar {\r\n");
      out.write("                                    width: 6px;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .shopee-chat-messages::-webkit-scrollbar-thumb {\r\n");
      out.write("                                    background: #ccc;\r\n");
      out.write("                                    border-radius: 4px;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                /* Wrapper chứa avatar + bubble */\r\n");
      out.write("                                .chat-msg-wrapper {\r\n");
      out.write("                                    display: flex;\r\n");
      out.write("                                    align-items: flex-end;\r\n");
      out.write("                                    gap: 8px;\r\n");
      out.write("                                    max-width: 90%;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .chat-msg-wrapper.user {\r\n");
      out.write("                                    align-self: flex-end;\r\n");
      out.write("                                    flex-direction: row-reverse;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .chat-msg-wrapper.bot {\r\n");
      out.write("                                    align-self: flex-start;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .chat-avatar {\r\n");
      out.write("                                    width: 28px;\r\n");
      out.write("                                    height: 28px;\r\n");
      out.write("                                    border-radius: 50%;\r\n");
      out.write("                                    display: flex;\r\n");
      out.write("                                    align-items: center;\r\n");
      out.write("                                    justify-content: center;\r\n");
      out.write("                                    font-size: 14px;\r\n");
      out.write("                                    flex-shrink: 0;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .chat-msg-wrapper.bot .chat-avatar {\r\n");
      out.write("                                    background: linear-gradient(-180deg, #f53d2d, #f63);\r\n");
      out.write("                                    color: #fff;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .chat-msg-wrapper.user .chat-avatar {\r\n");
      out.write("                                    background: #ddd;\r\n");
      out.write("                                    color: #666;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .chat-msg {\r\n");
      out.write("                                    padding: 10px 15px;\r\n");
      out.write("                                    border-radius: 18px;\r\n");
      out.write("                                    font-size: 14px;\r\n");
      out.write("                                    line-height: 1.4;\r\n");
      out.write("                                    word-wrap: break-word;\r\n");
      out.write("                                    min-width: 0;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .chat-msg.user {\r\n");
      out.write("                                    background: #ee4d2d;\r\n");
      out.write("                                    color: white;\r\n");
      out.write("                                    border-bottom-right-radius: 4px;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .chat-msg.bot {\r\n");
      out.write("                                    background: #fff;\r\n");
      out.write("                                    color: #333;\r\n");
      out.write("                                    border: 1px solid #e1e1e1;\r\n");
      out.write("                                    border-bottom-left-radius: 4px;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .shopee-chat-input-area {\r\n");
      out.write("                                    display: flex;\r\n");
      out.write("                                    padding: 10px;\r\n");
      out.write("                                    border-top: 1px solid #efefef;\r\n");
      out.write("                                    background: white;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .shopee-chat-input {\r\n");
      out.write("                                    flex: 1;\r\n");
      out.write("                                    border: 1px solid #ddd;\r\n");
      out.write("                                    border-radius: 20px;\r\n");
      out.write("                                    padding: 8px 15px;\r\n");
      out.write("                                    outline: none;\r\n");
      out.write("                                    font-size: 14px;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .shopee-chat-input:focus {\r\n");
      out.write("                                    border-color: #ee4d2d;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .shopee-chat-send {\r\n");
      out.write("                                    background: none;\r\n");
      out.write("                                    border: none;\r\n");
      out.write("                                    color: #ee4d2d;\r\n");
      out.write("                                    font-size: 20px;\r\n");
      out.write("                                    margin-left: 10px;\r\n");
      out.write("                                    cursor: pointer;\r\n");
      out.write("                                    transition: color 0.2s;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .shopee-chat-send:hover {\r\n");
      out.write("                                    color: #d0011b;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                /* Nút đính kèm ảnh / file */\r\n");
      out.write("                                .shopee-chat-attach-btn {\r\n");
      out.write("                                    background: none;\r\n");
      out.write("                                    border: none;\r\n");
      out.write("                                    color: #888;\r\n");
      out.write("                                    font-size: 18px;\r\n");
      out.write("                                    cursor: pointer;\r\n");
      out.write("                                    padding: 4px 6px;\r\n");
      out.write("                                    transition: color 0.2s;\r\n");
      out.write("                                    display: flex;\r\n");
      out.write("                                    align-items: center;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .shopee-chat-attach-btn:hover {\r\n");
      out.write("                                    color: #ee4d2d;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                /* Vùng preview ảnh/file trước khi gửi */\r\n");
      out.write("                                .shopee-chat-preview {\r\n");
      out.write("                                    display: flex;\r\n");
      out.write("                                    align-items: center;\r\n");
      out.write("                                    padding: 8px 10px;\r\n");
      out.write("                                    border-top: 1px solid #efefef;\r\n");
      out.write("                                    background: #fafafa;\r\n");
      out.write("                                    gap: 8px;\r\n");
      out.write("                                    position: relative;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .shopee-chat-preview img {\r\n");
      out.write("                                    max-width: 80px;\r\n");
      out.write("                                    max-height: 60px;\r\n");
      out.write("                                    border-radius: 6px;\r\n");
      out.write("                                    border: 1px solid #ddd;\r\n");
      out.write("                                    object-fit: cover;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .shopee-chat-preview .preview-file-info {\r\n");
      out.write("                                    display: flex;\r\n");
      out.write("                                    align-items: center;\r\n");
      out.write("                                    gap: 6px;\r\n");
      out.write("                                    background: #fff;\r\n");
      out.write("                                    border: 1px solid #ddd;\r\n");
      out.write("                                    border-radius: 8px;\r\n");
      out.write("                                    padding: 6px 10px;\r\n");
      out.write("                                    font-size: 12px;\r\n");
      out.write("                                    color: #555;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .shopee-chat-preview .preview-file-info i {\r\n");
      out.write("                                    color: #ee4d2d;\r\n");
      out.write("                                    font-size: 16px;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .shopee-chat-preview .preview-remove {\r\n");
      out.write("                                    background: rgba(0,0,0,0.5);\r\n");
      out.write("                                    color: #fff;\r\n");
      out.write("                                    border: none;\r\n");
      out.write("                                    border-radius: 50%;\r\n");
      out.write("                                    width: 20px;\r\n");
      out.write("                                    height: 20px;\r\n");
      out.write("                                    font-size: 12px;\r\n");
      out.write("                                    cursor: pointer;\r\n");
      out.write("                                    display: flex;\r\n");
      out.write("                                    align-items: center;\r\n");
      out.write("                                    justify-content: center;\r\n");
      out.write("                                    margin-left: auto;\r\n");
      out.write("                                    flex-shrink: 0;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .shopee-chat-preview .preview-remove:hover {\r\n");
      out.write("                                    background: rgba(0,0,0,0.7);\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                /* Ảnh trong tin nhắn chat */\r\n");
      out.write("                                .chat-msg img.chat-image {\r\n");
      out.write("                                    max-width: 100%;\r\n");
      out.write("                                    max-height: 200px;\r\n");
      out.write("                                    border-radius: 8px;\r\n");
      out.write("                                    margin-top: 5px;\r\n");
      out.write("                                    display: block;\r\n");
      out.write("                                    cursor: pointer;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .chat-msg .chat-file-badge {\r\n");
      out.write("                                    display: inline-flex;\r\n");
      out.write("                                    align-items: center;\r\n");
      out.write("                                    gap: 5px;\r\n");
      out.write("                                    background: rgba(255,255,255,0.2);\r\n");
      out.write("                                    padding: 4px 8px;\r\n");
      out.write("                                    border-radius: 6px;\r\n");
      out.write("                                    font-size: 12px;\r\n");
      out.write("                                    margin-top: 4px;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .chat-msg.bot .chat-file-badge {\r\n");
      out.write("                                    background: #f0f0f0;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .typing-indicator {\r\n");
      out.write("                                    display: inline-block;\r\n");
      out.write("                                    width: 4px;\r\n");
      out.write("                                    height: 4px;\r\n");
      out.write("                                    border-radius: 50%;\r\n");
      out.write("                                    background-color: #999;\r\n");
      out.write("                                    animation: typing 1s infinite alternate;\r\n");
      out.write("                                    margin: 0 2px;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .typing-indicator:nth-child(2) {\r\n");
      out.write("                                    animation-delay: 0.2s;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .typing-indicator:nth-child(3) {\r\n");
      out.write("                                    animation-delay: 0.4s;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                @keyframes typing {\r\n");
      out.write("                                    0% {\r\n");
      out.write("                                        transform: translateY(0);\r\n");
      out.write("                                    }\r\n");
      out.write("\r\n");
      out.write("                                    100% {\r\n");
      out.write("                                        transform: translateY(-4px);\r\n");
      out.write("                                    }\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                /* Modal quảng cáo Shopee VIP */\r\n");
      out.write("                                .shopee-vip-modal {\r\n");
      out.write("                                    position: fixed;\r\n");
      out.write("                                    top: 0;\r\n");
      out.write("                                    left: 0;\r\n");
      out.write("                                    width: 100%;\r\n");
      out.write("                                    height: 100%;\r\n");
      out.write("                                    background: rgba(0, 0, 0, 0.6);\r\n");
      out.write("                                    z-index: 9999;\r\n");
      out.write("                                    display: flex;\r\n");
      out.write("                                    justify-content: center;\r\n");
      out.write("                                    align-items: center;\r\n");
      out.write("                                    opacity: 0;\r\n");
      out.write("                                    visibility: hidden;\r\n");
      out.write("                                    transition: opacity 0.3s ease, visibility 0.3s ease;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .shopee-vip-modal.show {\r\n");
      out.write("                                    opacity: 1;\r\n");
      out.write("                                    visibility: visible;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .shopee-vip-modal-content {\r\n");
      out.write("                                    position: relative;\r\n");
      out.write("                                    max-width: 500px;\r\n");
      out.write("                                    width: 90%;\r\n");
      out.write("                                    transform: scale(0.8);\r\n");
      out.write("                                    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .shopee-vip-modal.show .shopee-vip-modal-content {\r\n");
      out.write("                                    transform: scale(1);\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .shopee-vip-close-btn {\r\n");
      out.write("                                    position: absolute;\r\n");
      out.write("                                    top: -15px;\r\n");
      out.write("                                    right: -15px;\r\n");
      out.write("                                    width: 30px;\r\n");
      out.write("                                    height: 30px;\r\n");
      out.write("                                    background: #fff;\r\n");
      out.write("                                    color: #666;\r\n");
      out.write("                                    border-radius: 50%;\r\n");
      out.write("                                    display: flex;\r\n");
      out.write("                                    justify-content: center;\r\n");
      out.write("                                    align-items: center;\r\n");
      out.write("                                    font-size: 20px;\r\n");
      out.write("                                    font-weight: bold;\r\n");
      out.write("                                    cursor: pointer;\r\n");
      out.write("                                    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\r\n");
      out.write("                                    z-index: 10;\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                .shopee-vip-close-btn:hover {\r\n");
      out.write("                                    background: #f1f1f1;\r\n");
      out.write("                                    color: #333;\r\n");
      out.write("                                }\r\n");
      out.write("                            </style>\r\n");
      out.write("                        </head>\r\n");
      out.write("\r\n");
      out.write("                        <body>\r\n");
      out.write("                            <div class=\"app\">\r\n");
      out.write("                                <!-- HEADER -->\r\n");
      out.write("                                <header class=\"header\">\r\n");
      out.write("                                    <!-- Navbar -->\r\n");
      out.write("                                    <nav class=\"header__navbar\">\r\n");
      out.write("                                        <ul class=\"header__navbar-list\">\r\n");
      out.write("                                            <li class=\"header__navbar-item header__navbar-item--separate\"><a href=\"#\"\r\n");
      out.write("                                                    class=\"header__navbar-item-link\">Kênh Người Bán</a></li>\r\n");
      out.write("                                            <li class=\"header__navbar-item header__navbar-item--separate\"><a href=\"#\"\r\n");
      out.write("                                                    class=\"header__navbar-item-link\">Trở thành Người bán Shopee</a>\r\n");
      out.write("                                            </li>\r\n");
      out.write("                                            <li class=\"header__navbar-item header__navbar-item--separate\"><a href=\"#\"\r\n");
      out.write("                                                    class=\"header__navbar-item-link\">Tải ứng dụng</a></li>\r\n");
      out.write("                                            <li class=\"header__navbar-item\">\r\n");
      out.write("                                                Kết nối\r\n");
      out.write("                                                <a href=\"#\" class=\"header__navbar-item-link\"><i\r\n");
      out.write("                                                        class=\"fab fa-facebook\"></i></a>\r\n");
      out.write("                                                <a href=\"#\" class=\"header__navbar-item-link\"><i\r\n");
      out.write("                                                        class=\"fab fa-instagram\"></i></a>\r\n");
      out.write("                                            </li>\r\n");
      out.write("                                        </ul>\r\n");
      out.write("\r\n");
      out.write("                                        <ul class=\"header__navbar-list\">\r\n");
      out.write("                                            <li class=\"header__navbar-item\"><a href=\"#\"\r\n");
      out.write("                                                    class=\"header__navbar-item-link\"><i class=\"far fa-bell\"></i> Thông\r\n");
      out.write("                                                    báo</a></li>\r\n");
      out.write("                                            <li class=\"header__navbar-item\"><a href=\"#\"\r\n");
      out.write("                                                    class=\"header__navbar-item-link\"><i\r\n");
      out.write("                                                        class=\"far fa-question-circle\"></i> Hỗ trợ</a></li>\r\n");
      out.write("                                            ");
 User acc=(User) session.getAttribute("account"); if (acc !=null) { 
      out.write("\r\n");
      out.write("                                                <li class=\"header__navbar-item header__navbar-item--separate\" style=\"font-weight: 500;\">\r\n");
      out.write("                                                    <div class=\"user-dropdown-wrapper\">\r\n");
      out.write("                                                        <div class=\"user-dropdown-trigger\" id=\"userDropdownTrigger\">\r\n");
      out.write("                                                            <span class=\"user-avatar-small\"><i class=\"fas fa-user-circle\"></i></span>\r\n");
      out.write("                                                            <span>");
      out.print( acc.getFullName() );
      out.write("</span>\r\n");
      out.write("                                                            ");
 if ("admin".equalsIgnoreCase(acc.getRole())) { 
      out.write("\r\n");
      out.write("                                                                <a href=\"admin\" style=\"color: #ffce3d; margin-left:5px; font-weight: bold; text-decoration:none;\" onclick=\"event.stopPropagation();\">[ADMIN]</a>\r\n");
      out.write("                                                            ");
 } 
      out.write("\r\n");
      out.write("                                                            <i class=\"fas fa-chevron-down user-dropdown-arrow\"></i>\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                        <div class=\"user-dropdown-menu\" id=\"userDropdownMenu\">\r\n");
      out.write("                                                            <a href=\"user/account/profile\" class=\"user-dropdown-item\">Tài Khoản Của Tôi</a>\r\n");
      out.write("                                                            <a href=\"user/purchase\" class=\"user-dropdown-item\">Đơn Mua</a>\r\n");
      out.write("                                                            <a href=\"logout\" class=\"user-dropdown-item\" id=\"logoutBtn\">Đăng Xuất</a>\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                </li>\r\n");
      out.write("                                                ");
 } else { 
      out.write("\r\n");
      out.write("                                                    <li class=\"header__navbar-item header__navbar-item--separate\"><a\r\n");
      out.write("                                                            href=\"register\" class=\"header__navbar-item-link\"\r\n");
      out.write("                                                            style=\"font-weight: 500;\">Đăng ký</a></li>\r\n");
      out.write("                                                    <li class=\"header__navbar-item\"><a href=\"login\"\r\n");
      out.write("                                                            class=\"header__navbar-item-link\"\r\n");
      out.write("                                                            style=\"font-weight: 500;\">Đăng\r\n");
      out.write("                                                            nhập</a></li>\r\n");
      out.write("                                                    ");
 } 
      out.write("\r\n");
      out.write("                                        </ul>\r\n");
      out.write("                                    </nav>\r\n");
      out.write("\r\n");
      out.write("                                    <!-- Header with Search -->\r\n");
      out.write("                                    <div class=\"header-with-search\">\r\n");
      out.write("                                        <div class=\"header__logo\">\r\n");
      out.write("                                            <a href=\"home\" class=\"header__logo-img-wrapper\">\r\n");
      out.write("                                                <i class=\"fa-solid fa-bag-shopping\"></i> Shopee\r\n");
      out.write("                                            </a>\r\n");
      out.write("                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                        <div style=\"flex: 1;\">\r\n");
      out.write("                                            <div class=\"header__search\">\r\n");
      out.write("                                                <form action=\"search\" method=\"get\"\r\n");
      out.write("                                                    class=\"header__search-input-wrap d-flex\"\r\n");
      out.write("                                                    style=\"width:100%; display:flex;\">\r\n");
      out.write("                                                    <input type=\"text\" name=\"txt\" class=\"header__search-input\"\r\n");
      out.write("                                                        placeholder=\"Dùng thẻ S REWARDS hoàn xu 12%\"\r\n");
      out.write("                                                        value=\"");
      out.print( request.getAttribute(" txtS")==null ? "" :
                                                        request.getAttribute("txtS") );
      out.write("\" style=\"flex:1;\">\r\n");
      out.write("                                                    <button type=\"submit\" class=\"header__search-btn\">\r\n");
      out.write("                                                        <i class=\"fas fa-search header__search-btn-icon\"></i>\r\n");
      out.write("                                                    </button>\r\n");
      out.write("                                                </form>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                            <div class=\"header__search-suggest\"\r\n");
      out.write("                                                style=\"margin-top: 5px; font-size: 12px;\">\r\n");
      out.write("                                                <a href=\"#\"\r\n");
      out.write("                                                    style=\"color: white; margin-right: 13px; text-decoration: none;\">Săn\r\n");
      out.write("                                                    iPhone 0 Đồng</a>\r\n");
      out.write("                                                <a href=\"#\"\r\n");
      out.write("                                                    style=\"color: white; margin-right: 13px; text-decoration: none;\">Đồ\r\n");
      out.write("                                                    Ren\r\n");
      out.write("                                                    Nữ</a>\r\n");
      out.write("                                                <a href=\"#\"\r\n");
      out.write("                                                    style=\"color: white; margin-right: 13px; text-decoration: none;\">Ốp\r\n");
      out.write("                                                    Lưng\r\n");
      out.write("                                                    iPhone</a>\r\n");
      out.write("                                                <a href=\"#\"\r\n");
      out.write("                                                    style=\"color: white; margin-right: 13px; text-decoration: none;\">iPhone\r\n");
      out.write("                                                    16pro Max</a>\r\n");
      out.write("                                                <a href=\"#\"\r\n");
      out.write("                                                    style=\"color: white; margin-right: 13px; text-decoration: none;\">Áo\r\n");
      out.write("                                                    Khoác Nam Đẹp</a>\r\n");
      out.write("                                                <a href=\"#\"\r\n");
      out.write("                                                    style=\"color: white; margin-right: 13px; text-decoration: none;\">Mũ\r\n");
      out.write("                                                    Bảo\r\n");
      out.write("                                                    Hiểm</a>\r\n");
      out.write("                                                <a href=\"#\"\r\n");
      out.write("                                                    style=\"color: white; margin-right: 13px; text-decoration: none;\">1k\r\n");
      out.write("                                                    Điện\r\n");
      out.write("                                                    Thoại</a>\r\n");
      out.write("                                                <a href=\"#\"\r\n");
      out.write("                                                    style=\"color: white; margin-right: 13px; text-decoration: none;\">Dép\r\n");
      out.write("                                                    Crocs Chính Hãng</a>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                        <!-- Cart -->\r\n");
      out.write("                                        <div class=\"header__cart\">\r\n");
      out.write("                                            <div class=\"header__cart-wrap\">\r\n");
      out.write("                                                <a href=\"cart\" style=\"text-decoration:none; color:inherit;\">\r\n");
      out.write("                                                    <i class=\"fas fa-shopping-cart header__cart-icon\"></i>\r\n");
      out.write("                                                    <span class=\"header__cart-notice\">");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${sessionScope.cart != null ?\r\n                                                        sessionScope.cart.totalQuantity : 0}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("</span>\r\n");
      out.write("                                                </a>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("                                    </div>\r\n");
      out.write("                                </header>\r\n");
      out.write("\r\n");
      out.write("                                <!-- CONTAINER -->\r\n");
      out.write("                                <div class=\"app__container\">\r\n");
      out.write("                                    <div class=\"grid\">\r\n");
      out.write("\r\n");
      out.write("                                        <!-- Super Shopee Banner 2/3 - 1/3 -->\r\n");
      out.write("                                        <div class=\"shopee-main-banner-container\"\r\n");
      out.write("                                            style=\"display: flex; gap: 5px; margin-bottom: 20px; height: 235px; border-radius: 2px;\">\r\n");
      out.write("                                            <!-- Banner Trái 2/3 (Carousel Mode) -->\r\n");
      out.write("                                            <div style=\"flex: 2; border-radius: 2px; overflow: hidden; box-shadow: var(--box-shadow); position: relative;\"\r\n");
      out.write("                                                id=\"mainBannerWrapper\">\r\n");
      out.write("                                                <div id=\"mainBannerCarousel\"\r\n");
      out.write("                                                    style=\"display: flex; width: 100%; height: 100%; overflow-x: auto; scroll-snap-type: x mandatory; scrollbar-width: none; scroll-behavior: smooth;\">\r\n");
      out.write("                                                    <a href=\"#\" style=\"flex: 0 0 100%; scroll-snap-align: start;\">\r\n");
      out.write("                                                        <img src=\"images/main_banner_1.webp\" alt=\"Shopee Banner 1\"\r\n");
      out.write("                                                            style=\"width: 100%; height: 100%; object-fit: cover; display: block;\">\r\n");
      out.write("                                                    </a>\r\n");
      out.write("                                                    <a href=\"#\" style=\"flex: 0 0 100%; scroll-snap-align: start;\">\r\n");
      out.write("                                                        <img src=\"images/main_banner_2.webp\" alt=\"Shopee Banner 2\"\r\n");
      out.write("                                                            style=\"width: 100%; height: 100%; object-fit: cover; display: block;\">\r\n");
      out.write("                                                    </a>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                <!-- Nút tiến lùi cho main banner -->\r\n");
      out.write("                                                <button id=\"mainBannerLeftBtn\"\r\n");
      out.write("                                                    style=\"position: absolute; left: 0; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.2); color: white; border: none; padding: 15px 5px; cursor: pointer; display: none;\"><i\r\n");
      out.write("                                                        class=\"fas fa-chevron-left\"></i></button>\r\n");
      out.write("                                                <button id=\"mainBannerRightBtn\"\r\n");
      out.write("                                                    style=\"position: absolute; right: 0; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.2); color: white; border: none; padding: 15px 5px; cursor: pointer; display: none;\"><i\r\n");
      out.write("                                                        class=\"fas fa-chevron-right\"></i></button>\r\n");
      out.write("\r\n");
      out.write("                                                <!-- Chấm tròn chuyển trang -->\r\n");
      out.write("                                                <div\r\n");
      out.write("                                                    style=\"position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); display: flex; gap: 8px;\">\r\n");
      out.write("                                                    <div class=\"banner-dot active\" data-index=\"0\"\r\n");
      out.write("                                                        style=\"width: 8px; height: 8px; border-radius: 50%; background: #fff; cursor: pointer; opacity: 1;\">\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                    <div class=\"banner-dot\" data-index=\"1\"\r\n");
      out.write("                                                        style=\"width: 8px; height: 8px; border-radius: 50%; background: #fff; cursor: pointer; opacity: 0.5;\">\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                            <!-- Banner Phải 1/3 (Gồm 2 banner nhỏ chồng lên nhau) -->\r\n");
      out.write("                                            <div style=\"flex: 1; display: flex; flex-direction: column; gap: 5px;\">\r\n");
      out.write("                                                <div\r\n");
      out.write("                                                    style=\"flex: 1; border-radius: 2px; overflow: hidden; box-shadow: var(--box-shadow);\">\r\n");
      out.write("                                                    <a href=\"#\"><img src=\"images/sub_banner_1.webp\" alt=\"Banner Nhỏ 1\"\r\n");
      out.write("                                                            style=\"width: 100%; height: 100%; object-fit: cover; display: block;\"></a>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                <div\r\n");
      out.write("                                                    style=\"flex: 1; border-radius: 2px; overflow: hidden; box-shadow: var(--box-shadow);\">\r\n");
      out.write("                                                    <a href=\"#\"><img src=\"images/sub_banner_2.webp\" alt=\"Banner Nhỏ 2\"\r\n");
      out.write("                                                            style=\"width: 100%; height: 100%; object-fit: cover; display: block;\"></a>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                        <!-- Category Icon Menu Row -->\r\n");
      out.write("                                        <div class=\"category-icon-row\"\r\n");
      out.write("                                            style=\"display: flex; justify-content: space-between; margin-bottom: 25px; background: transparent; padding: 10px 0; border-radius: 2px; flex-wrap: wrap;\">\r\n");
      out.write("                                            <a href=\"#\"\r\n");
      out.write("                                                style=\"display: flex; flex-direction: column; align-items: center; width: 100px; text-decoration: none; color: #333;\">\r\n");
      out.write("                                                <div\r\n");
      out.write("                                                    style=\"width: 50px; height: 50px; border-radius: 20px; background-image: url('https://cf.shopee.vn/file/vn-50009109-8a387d78a7ad954ec489d3ef9abd60b4_xhdpi'); background-size: cover; margin-bottom: 15px; border: 1px solid #f2f2f2; box-shadow: var(--box-shadow);\">\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                <span\r\n");
      out.write("                                                    style=\"font-size: 13px; text-align: center; line-height: 1.2;\">Deal\r\n");
      out.write("                                                    Từ\r\n");
      out.write("                                                    1.000Đ</span>\r\n");
      out.write("                                            </a>\r\n");
      out.write("                                            <a href=\"#\"\r\n");
      out.write("                                                style=\"display: flex; flex-direction: column; align-items: center; width: 100px; text-decoration: none; color: #333;\">\r\n");
      out.write("                                                <div\r\n");
      out.write("                                                    style=\"width: 50px; height: 50px; border-radius: 20px; background-image: url('https://down-vn.img.susercontent.com/file/vn-11134258-820l4-mesa9g3ee4g214@resize_w90_nl.webp'); background-size: cover; margin-bottom: 15px; border: 1px solid #f2f2f2; box-shadow: var(--box-shadow);\">\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                <span\r\n");
      out.write("                                                    style=\"font-size: 13px; text-align: center; line-height: 1.2;\">Shopee\r\n");
      out.write("                                                    Xử Lý</span>\r\n");
      out.write("                                            </a>\r\n");
      out.write("                                            <a href=\"#\"\r\n");
      out.write("                                                style=\"display: flex; flex-direction: column; align-items: center; width: 100px; text-decoration: none; color: #333;\">\r\n");
      out.write("                                                <div\r\n");
      out.write("                                                    style=\"width: 50px; height: 50px; border-radius: 20px; background-image: url('https://down-vn.img.susercontent.com/file/vn-11134258-7ras8-mb6e1ufaxoldb9@resize_w90_nl.webp'); background-size: cover; margin-bottom: 15px; border: 1px solid #f2f2f2; box-shadow: var(--box-shadow);\">\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                <span\r\n");
      out.write("                                                    style=\"font-size: 13px; text-align: center; line-height: 1.2;\">Deal\r\n");
      out.write("                                                    Hot Giờ Vàng</span>\r\n");
      out.write("                                            </a>\r\n");
      out.write("                                            <a href=\"#\"\r\n");
      out.write("                                                style=\"display: flex; flex-direction: column; align-items: center; width: 100px; text-decoration: none; color: #333;\">\r\n");
      out.write("                                                <div\r\n");
      out.write("                                                    style=\"width: 50px; height: 50px; border-radius: 20px; background-image: url('https://down-vn.img.susercontent.com/file/vn-50009109-c02353c969d19918c53deaa4ea15bdbe@resize_w90_nl.webp'); background-size: cover; margin-bottom: 15px; border: 1px solid #f2f2f2; box-shadow: var(--box-shadow);\">\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                <span\r\n");
      out.write("                                                    style=\"font-size: 13px; text-align: center; line-height: 1.2;\">Shopee\r\n");
      out.write("                                                    Style<br>Voucher 30%</span>\r\n");
      out.write("                                            </a>\r\n");
      out.write("                                            <a href=\"#\"\r\n");
      out.write("                                                style=\"display: flex; flex-direction: column; align-items: center; width: 100px; text-decoration: none; color: #333;\">\r\n");
      out.write("                                                <div\r\n");
      out.write("                                                    style=\"width: 50px; height: 50px; border-radius: 20px; background-image: url('https://cf.shopee.vn/file/vn-50009109-f6c34d719c3e4d33857371458e7a7059_xhdpi'); background-size: cover; margin-bottom: 15px; border: 1px solid #f2f2f2; box-shadow: var(--box-shadow);\">\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                <span\r\n");
      out.write("                                                    style=\"font-size: 13px; text-align: center; line-height: 1.2;\">Khách\r\n");
      out.write("                                                    Hàng<br>Thân Thiết</span>\r\n");
      out.write("                                            </a>\r\n");
      out.write("                                            <a href=\"#\"\r\n");
      out.write("                                                style=\"display: flex; flex-direction: column; align-items: center; width: 100px; text-decoration: none; color: #333;\">\r\n");
      out.write("                                                <div\r\n");
      out.write("                                                    style=\"width: 50px; height: 50px; border-radius: 20px; background-image: url('https://cf.shopee.vn/file/vn-50009109-c7a2e1ae720f9704f92f72c9ef1a494a_xhdpi'); background-size: cover; margin-bottom: 15px; border: 1px solid #f2f2f2; box-shadow: var(--box-shadow);\">\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                <span style=\"font-size: 13px; text-align: center; line-height: 1.2;\">Mã\r\n");
      out.write("                                                    Giảm\r\n");
      out.write("                                                    Giá</span>\r\n");
      out.write("                                            </a>\r\n");
      out.write("                                            <a href=\"#\"\r\n");
      out.write("                                                style=\"display: flex; flex-direction: column; align-items: center; width: 100px; text-decoration: none; color: #333;\">\r\n");
      out.write("                                                <div\r\n");
      out.write("                                                    style=\"width: 50px; height: 50px; border-radius: 20px; background-image: url('https://cf.shopee.vn/file/e4a404283b3824c211c1549aedd28d5f_xhdpi'); background-size: cover; margin-bottom: 15px; border: 1px solid #f2f2f2; box-shadow: var(--box-shadow);\">\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                <span style=\"font-size: 13px; text-align: center; line-height: 1.2;\">Bắt\r\n");
      out.write("                                                    Trend<br>Giá Sốc</span>\r\n");
      out.write("                                            </a>\r\n");
      out.write("                                            <a href=\"#\"\r\n");
      out.write("                                                style=\"display: flex; flex-direction: column; align-items: center; width: 100px; text-decoration: none; color: #333;\">\r\n");
      out.write("                                                <div\r\n");
      out.write("                                                    style=\"width: 50px; height: 50px; border-radius: 20px; background-image: url('https://cf.shopee.vn/file/c7a2e1ae720f9704f92f72c9ef1a494a_xhdpi'); background-size: cover; margin-bottom: 15px; border: 1px solid #f2f2f2; box-shadow: 0 1px 1px 0 rgba(0,0,0,.05);\">\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                <span\r\n");
      out.write("                                                    style=\"font-size: 13px; text-align: center; line-height: 1.2;\">Miễn\r\n");
      out.write("                                                    Phí<br>Trả Hàng</span>\r\n");
      out.write("                                            </a>\r\n");
      out.write("                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                        <!-- MAIN CATEGORIES (DANH MỤC) -->\r\n");
      out.write("                                        <div class=\"shopee-categories-section\"\r\n");
      out.write("                                            style=\"background: #fff; border-radius: 2px; overflow: hidden; margin-bottom: 20px; box-shadow: 0 1px 2px 0 rgba(0,0,0,.05); position: relative;\">\r\n");
      out.write("                                            <div class=\"category-header\"\r\n");
      out.write("                                                style=\"color: rgba(0,0,0,.54); font-size: 16px; padding: 18px 20px; border-bottom: 1px solid rgba(0,0,0,.05);\">\r\n");
      out.write("                                                DANH MỤC\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                            <button class=\"nav-arrow-btn nav-arrow-btn--left\" id=\"btnCategoryLeft\"\r\n");
      out.write("                                                style=\"position: absolute; left: 0; top: 55%; transform: translateY(-50%); width: 25px; height: 50px; background: rgba(0,0,0,0.2); color: white; border: none; font-size: 16px; cursor: pointer; display: none; z-index: 10;\">\r\n");
      out.write("                                                <i class=\"fas fa-chevron-left\"></i>\r\n");
      out.write("                                            </button>\r\n");
      out.write("                                            <button class=\"nav-arrow-btn nav-arrow-btn--right\" id=\"btnCategoryRight\"\r\n");
      out.write("                                                style=\"position: absolute; right: 0; top: 55%; transform: translateY(-50%); width: 25px; height: 50px; background: rgba(0,0,0,0.2); color: white; border: none; font-size: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center; z-index: 10;\">\r\n");
      out.write("                                                <i class=\"fas fa-chevron-right\"></i>\r\n");
      out.write("                                            </button>\r\n");
      out.write("                                            <div class=\"category-grid\" id=\"categoryGrid\"\r\n");
      out.write("                                                style=\"display: grid; grid-template-rows: repeat(2, 1fr); grid-template-columns: repeat(10, calc(100% / 10)); overflow-x: auto; scrollbar-width: none; scroll-behavior: smooth; border-right: 1px solid rgba(0,0,0,.05); border-bottom: 1px solid rgba(0,0,0,.05);\">\r\n");
      out.write("\r\n");
      out.write("                                                ");
      if (_jspx_meth_c_005fforEach_005f0(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                        <!-- Flash Sale Banner -->\r\n");
      out.write("                                        <div class=\"flash-sale-section\"\r\n");
      out.write("                                            style=\"margin-bottom: 20px; box-shadow: 0 1px 2px 0 rgba(0,0,0,.05); background: #fff; position: relative;\">\r\n");
      out.write("                                            <div class=\"flash-sale-header\"\r\n");
      out.write("                                                style=\"padding: 15px 20px; border-bottom: 1px solid rgba(0,0,0,.05); display:flex; justify-content:space-between; align-items:center;\">\r\n");
      out.write("                                                <div class=\"flash-sale-time\">\r\n");
      out.write("                                                    <span\r\n");
      out.write("                                                        style=\"color:#ee4d2d; font-size:20px; margin-right: 15px; font-weight: bold; font-style: italic;\"><i\r\n");
      out.write("                                                            class=\"fas fa-bolt\"></i> FLASH SALE</span>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                <a href=\"#\"\r\n");
      out.write("                                                    style=\"color:#ee4d2d; text-decoration:none; font-size:14px;\">Xem\r\n");
      out.write("                                                    tất cả ></a>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                            <button class=\"nav-arrow-btn nav-arrow-btn--left\" id=\"btnFlashSaleLeft\"\r\n");
      out.write("                                                style=\"position: absolute; left: 0; top: 55%; transform: translateY(-50%); width: 25px; height: 50px; background: rgba(0,0,0,0.2); color: white; border: none; font-size: 16px; cursor: pointer; display: none; z-index: 10;\">\r\n");
      out.write("                                                <i class=\"fas fa-chevron-left\"></i>\r\n");
      out.write("                                            </button>\r\n");
      out.write("                                            <button class=\"nav-arrow-btn nav-arrow-btn--right\" id=\"btnFlashSaleRight\"\r\n");
      out.write("                                                style=\"position: absolute; right: 0; top: 55%; transform: translateY(-50%); width: 25px; height: 50px; background: rgba(0,0,0,0.2); color: white; border: none; font-size: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center; z-index: 10;\">\r\n");
      out.write("                                                <i class=\"fas fa-chevron-right\"></i>\r\n");
      out.write("                                            </button>\r\n");
      out.write("                                            <div class=\"flash-sale-body\" id=\"flashSaleGrid\"\r\n");
      out.write("                                                style=\"display: flex; gap: 15px; padding: 20px; overflow-x: auto; scrollbar-width: none; scroll-behavior: smooth;\">\r\n");
      out.write("\r\n");
      out.write("                                                ");
      if (_jspx_meth_c_005fforEach_005f1(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                        <!-- SHOPEE MALL -->\r\n");
      out.write("                                        <div class=\"shopee-mall-section\"\r\n");
      out.write("                                            style=\"background: #fff; border-radius: 2px; overflow: hidden; margin-bottom: 20px; box-shadow: 0 1px 2px 0 rgba(0,0,0,.05);\">\r\n");
      out.write("                                            <div class=\"shopee-mall-header\"\r\n");
      out.write("                                                style=\"display: flex; justify-content: space-between; align-items: center; padding: 18px 20px; border-bottom: 1px solid rgba(0,0,0,.05);\">\r\n");
      out.write("                                                <div style=\"display: flex; align-items: center; gap: 20px;\">\r\n");
      out.write("                                                    <div style=\"color: #d0011b; font-size: 16px; font-weight: 500;\">\r\n");
      out.write("                                                        SHOPEE\r\n");
      out.write("                                                        MALL <span\r\n");
      out.write("                                                            style=\"font-weight: 300; margin: 0 5px; color: #ccc;\">|</span>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                    <div\r\n");
      out.write("                                                        style=\"color: #333; font-size: 14px; display: flex; align-items: center; gap: 15px;\">\r\n");
      out.write("                                                        <span><i class=\"fas fa-undo\"\r\n");
      out.write("                                                                style=\"color: #d0011b; margin-right: 5px;\"></i> Trả Hàng\r\n");
      out.write("                                                            Miễn Phí 15 Ngày</span>\r\n");
      out.write("                                                        <span><i class=\"fas fa-shield-alt\"\r\n");
      out.write("                                                                style=\"color: #d0011b; margin-right: 5px;\"></i> Hàng\r\n");
      out.write("                                                            Chính\r\n");
      out.write("                                                            Hãng 100%</span>\r\n");
      out.write("                                                        <span><i class=\"fas fa-truck\"\r\n");
      out.write("                                                                style=\"color: #d0011b; margin-right: 5px;\"></i> Miễn Phí\r\n");
      out.write("                                                            Vận\r\n");
      out.write("                                                            Chuyển</span>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                <a href=\"#\"\r\n");
      out.write("                                                    style=\"color: #d0011b; font-size: 14px; text-decoration: none; display: flex; align-items: center;\">Xem\r\n");
      out.write("                                                    Tất Cả <i class=\"fas fa-chevron-right\"\r\n");
      out.write("                                                        style=\"margin-left:5px; background: #d0011b; color: #fff; border-radius: 50%; padding: 2px 5px; font-size: 10px;\"></i></a>\r\n");
      out.write("                                            </div>\r\n");
      out.write("\r\n");
      out.write("                                            <div class=\"shopee-mall-body\"\r\n");
      out.write("                                                style=\"display: flex; gap: 15px; padding: 15px;\">\r\n");
      out.write("                                                <!-- Banner Left -->\r\n");
      out.write("                                                <div class=\"shopee-mall-banner\" style=\"width: 390px; flex-shrink: 0;\">\r\n");
      out.write("                                                    <a href=\"#\">\r\n");
      out.write("                                                        <img src=\"images/shopee_mall_banner.png\"\r\n");
      out.write("                                                            style=\"width: 100%; height: 100%; object-fit: cover; border-radius: 2px;\"\r\n");
      out.write("                                                            alt=\"Shopee Mall Banner\">\r\n");
      out.write("                                                    </a>\r\n");
      out.write("                                                </div>\r\n");
      out.write("\r\n");
      out.write("                                                <!-- Products Grid -->\r\n");
      out.write("                                                <div style=\"flex: 1; position: relative;\">\r\n");
      out.write("                                                    <style>\r\n");
      out.write("                                                        #shopeeMallGrid::-webkit-scrollbar {\r\n");
      out.write("                                                            display: none;\r\n");
      out.write("                                                        }\r\n");
      out.write("                                                    </style>\r\n");
      out.write("                                                    <div class=\"shopee-mall-grid\" id=\"shopeeMallGrid\"\r\n");
      out.write("                                                        style=\"display: grid; grid-template-rows: repeat(2, 1fr); grid-auto-flow: column; grid-auto-columns: calc((100% - 30px) / 4); gap: 10px; overflow-x: auto; scroll-behavior: smooth; scrollbar-width: none;\">\r\n");
      out.write("                                                        <!-- Product 1 -->\r\n");
      out.write("                                                        <a href=\"#\"\r\n");
      out.write("                                                            style=\"text-decoration: none; display: flex; flex-direction: column; align-items: center; justify-content: space-between;\">\r\n");
      out.write("                                                            <div style=\"width: 100%; position: relative;\">\r\n");
      out.write("                                                                <img src=\"images/mall_prod_1.png\"\r\n");
      out.write("                                                                    style=\"width: 100%; object-fit: contain;\"\r\n");
      out.write("                                                                    alt=\"L'Oreal\">\r\n");
      out.write("                                                            </div>\r\n");
      out.write("                                                            <div\r\n");
      out.write("                                                                style=\"font-size: 16px; color: #d0011b; text-align: center; margin-top: auto; padding-top: 15px;\">\r\n");
      out.write("                                                                Ưu đãi đến 50%</div>\r\n");
      out.write("                                                        </a>\r\n");
      out.write("                                                        <!-- Product 2 -->\r\n");
      out.write("                                                        <a href=\"#\"\r\n");
      out.write("                                                            style=\"text-decoration: none; display: flex; flex-direction: column; align-items: center; justify-content: space-between;\">\r\n");
      out.write("                                                            <div style=\"width: 100%; position: relative;\">\r\n");
      out.write("                                                                <img src=\"images/mall_prod_2.png\"\r\n");
      out.write("                                                                    style=\"width: 100%; object-fit: contain;\"\r\n");
      out.write("                                                                    alt=\"Unilever\">\r\n");
      out.write("                                                            </div>\r\n");
      out.write("                                                            <div\r\n");
      out.write("                                                                style=\"font-size: 16px; color: #d0011b; text-align: center; margin-top: auto; padding-top: 15px;\">\r\n");
      out.write("                                                                Mua 1 được 2</div>\r\n");
      out.write("                                                        </a>\r\n");
      out.write("                                                        <!-- Product 3 -->\r\n");
      out.write("                                                        <a href=\"#\"\r\n");
      out.write("                                                            style=\"text-decoration: none; display: flex; flex-direction: column; align-items: center; justify-content: space-between;\">\r\n");
      out.write("                                                            <div style=\"width: 100%; position: relative;\">\r\n");
      out.write("                                                                <img src=\"images/mall_prod_3.png\"\r\n");
      out.write("                                                                    style=\"width: 100%; object-fit: contain;\"\r\n");
      out.write("                                                                    alt=\"Unilever\">\r\n");
      out.write("                                                            </div>\r\n");
      out.write("                                                            <div\r\n");
      out.write("                                                                style=\"font-size: 16px; color: #d0011b; text-align: center; margin-top: auto; padding-top: 15px;\">\r\n");
      out.write("                                                                Mua 1 tặng 1</div>\r\n");
      out.write("                                                        </a>\r\n");
      out.write("                                                        <!-- Product 4 -->\r\n");
      out.write("                                                        <a href=\"#\"\r\n");
      out.write("                                                            style=\"text-decoration: none; display: flex; flex-direction: column; align-items: center; justify-content: space-between;\">\r\n");
      out.write("                                                            <div style=\"width: 100%; position: relative;\">\r\n");
      out.write("                                                                <img src=\"images/mall_prod_4.png\"\r\n");
      out.write("                                                                    style=\"width: 100%; object-fit: contain;\"\r\n");
      out.write("                                                                    alt=\"Garnier\">\r\n");
      out.write("                                                            </div>\r\n");
      out.write("                                                            <div\r\n");
      out.write("                                                                style=\"font-size: 16px; color: #d0011b; text-align: center; margin-top: auto; padding-top: 15px;\">\r\n");
      out.write("                                                                Mua là có quà</div>\r\n");
      out.write("                                                        </a>\r\n");
      out.write("\r\n");
      out.write("                                                        <!-- Row 2 Products -->\r\n");
      out.write("                                                        <!-- Product 5 -->\r\n");
      out.write("                                                        <a href=\"#\"\r\n");
      out.write("                                                            style=\"text-decoration: none; display: flex; flex-direction: column; align-items: center; justify-content: space-between;\">\r\n");
      out.write("                                                            <div style=\"width: 100%; position: relative;\">\r\n");
      out.write("                                                                <img src=\"images/mall_prod_5.png\"\r\n");
      out.write("                                                                    style=\"width: 100%; object-fit: contain;\"\r\n");
      out.write("                                                                    alt=\"Cocoon\">\r\n");
      out.write("                                                            </div>\r\n");
      out.write("                                                            <div\r\n");
      out.write("                                                                style=\"font-size: 16px; color: #d0011b; text-align: center; margin-top: auto; padding-top: 15px;\">\r\n");
      out.write("                                                                Mua 1 tặng 1</div>\r\n");
      out.write("                                                        </a>\r\n");
      out.write("                                                        <!-- Product 6 -->\r\n");
      out.write("                                                        <a href=\"#\"\r\n");
      out.write("                                                            style=\"text-decoration: none; display: flex; flex-direction: column; align-items: center; justify-content: space-between;\">\r\n");
      out.write("                                                            <div style=\"width: 100%; position: relative;\">\r\n");
      out.write("                                                                <img src=\"https://down-vn.img.susercontent.com/file/vn-11134201-7r98o-lsusnux18z046d\"\r\n");
      out.write("                                                                    style=\"width: 100%; object-fit: contain;\"\r\n");
      out.write("                                                                    alt=\"Unilever\">\r\n");
      out.write("                                                            </div>\r\n");
      out.write("                                                            <div\r\n");
      out.write("                                                                style=\"font-size: 16px; color: #d0011b; text-align: center; margin-top: auto; padding-top: 15px;\">\r\n");
      out.write("                                                                Mua 1 tặng 1</div>\r\n");
      out.write("                                                        </a>\r\n");
      out.write("                                                        <!-- Product 7 -->\r\n");
      out.write("                                                        <a href=\"#\"\r\n");
      out.write("                                                            style=\"text-decoration: none; display: flex; flex-direction: column; align-items: center; justify-content: space-between;\">\r\n");
      out.write("                                                            <div style=\"width: 100%; position: relative;\">\r\n");
      out.write("                                                                <img src=\"https://down-vn.img.susercontent.com/file/vn-11134201-7r98o-lt2mzhz9k2cndv\"\r\n");
      out.write("                                                                    style=\"width: 100%; object-fit: contain;\"\r\n");
      out.write("                                                                    alt=\"Watsons\">\r\n");
      out.write("                                                            </div>\r\n");
      out.write("                                                            <div\r\n");
      out.write("                                                                style=\"font-size: 16px; color: #d0011b; text-align: center; margin-top: auto; padding-top: 15px;\">\r\n");
      out.write("                                                                Mua là có quà</div>\r\n");
      out.write("                                                        </a>\r\n");
      out.write("                                                        <!-- Product 8 -->\r\n");
      out.write("                                                        <a href=\"#\"\r\n");
      out.write("                                                            style=\"text-decoration: none; display: flex; flex-direction: column; align-items: center; justify-content: space-between;\">\r\n");
      out.write("                                                            <div style=\"width: 100%; position: relative;\">\r\n");
      out.write("                                                                <img src=\"https://down-vn.img.susercontent.com/file/vn-11134201-7r98o-lt0aeyx5k3z486\"\r\n");
      out.write("                                                                    style=\"width: 100%; object-fit: contain;\"\r\n");
      out.write("                                                                    alt=\"CoolMate\">\r\n");
      out.write("                                                            </div>\r\n");
      out.write("                                                            <div\r\n");
      out.write("                                                                style=\"font-size: 16px; color: #d0011b; text-align: center; margin-top: auto; padding-top: 15px;\">\r\n");
      out.write("                                                                Mua 1 tặng 1</div>\r\n");
      out.write("                                                        </a>\r\n");
      out.write("                                                        <!-- Extra Products for scrolling -->\r\n");
      out.write("                                                        <a href=\"#\"\r\n");
      out.write("                                                            style=\"text-decoration: none; display: flex; flex-direction: column; align-items: center; justify-content: space-between;\">\r\n");
      out.write("                                                            <div style=\"width: 100%; position: relative;\"><img\r\n");
      out.write("                                                                    src=\"images/mall_prod_1.png\"\r\n");
      out.write("                                                                    style=\"width: 100%; object-fit: contain;\"></div>\r\n");
      out.write("                                                            <div\r\n");
      out.write("                                                                style=\"font-size: 16px; color: #d0011b; text-align: center; margin-top: auto; padding-top: 15px;\">\r\n");
      out.write("                                                                Ưu đãi đến 50%</div>\r\n");
      out.write("                                                        </a>\r\n");
      out.write("                                                        <a href=\"#\"\r\n");
      out.write("                                                            style=\"text-decoration: none; display: flex; flex-direction: column; align-items: center; justify-content: space-between;\">\r\n");
      out.write("                                                            <div style=\"width: 100%; position: relative;\"><img\r\n");
      out.write("                                                                    src=\"images/mall_prod_2.png\"\r\n");
      out.write("                                                                    style=\"width: 100%; object-fit: contain;\"></div>\r\n");
      out.write("                                                            <div\r\n");
      out.write("                                                                style=\"font-size: 16px; color: #d0011b; text-align: center; margin-top: auto; padding-top: 15px;\">\r\n");
      out.write("                                                                Mua 1 được 2</div>\r\n");
      out.write("                                                        </a>\r\n");
      out.write("                                                        <a href=\"#\"\r\n");
      out.write("                                                            style=\"text-decoration: none; display: flex; flex-direction: column; align-items: center; justify-content: space-between;\">\r\n");
      out.write("                                                            <div style=\"width: 100%; position: relative;\"><img\r\n");
      out.write("                                                                    src=\"images/mall_prod_3.png\"\r\n");
      out.write("                                                                    style=\"width: 100%; object-fit: contain;\"></div>\r\n");
      out.write("                                                            <div\r\n");
      out.write("                                                                style=\"font-size: 16px; color: #d0011b; text-align: center; margin-top: auto; padding-top: 15px;\">\r\n");
      out.write("                                                                Mua 1 tặng 1</div>\r\n");
      out.write("                                                        </a>\r\n");
      out.write("                                                        <a href=\"#\"\r\n");
      out.write("                                                            style=\"text-decoration: none; display: flex; flex-direction: column; align-items: center; justify-content: space-between;\">\r\n");
      out.write("                                                            <div style=\"width: 100%; position: relative;\"><img\r\n");
      out.write("                                                                    src=\"images/mall_prod_4.png\"\r\n");
      out.write("                                                                    style=\"width: 100%; object-fit: contain;\"></div>\r\n");
      out.write("                                                            <div\r\n");
      out.write("                                                                style=\"font-size: 16px; color: #d0011b; text-align: center; margin-top: auto; padding-top: 15px;\">\r\n");
      out.write("                                                                Mua là có quà</div>\r\n");
      out.write("                                                        </a>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                    <!-- Nút điều hướng -->\r\n");
      out.write("                                                    <button class=\"nav-arrow-btn nav-arrow-btn--left\" id=\"btnMallLeft\"\r\n");
      out.write("                                                        style=\"position: absolute; left: -12.5px; top: 50%; transform: translateY(-50%); width: 25px; height: 50px; background: rgba(0,0,0,0.2); color: white; border: none; font-size: 16px; cursor: pointer; display: none; z-index: 10;\"><i\r\n");
      out.write("                                                            class=\"fas fa-chevron-left\"></i></button>\r\n");
      out.write("                                                    <button class=\"nav-arrow-btn nav-arrow-btn--right\" id=\"btnMallRight\"\r\n");
      out.write("                                                        style=\"position: absolute; right: -12.5px; top: 50%; transform: translateY(-50%); width: 25px; height: 50px; background: rgba(0,0,0,0.2); color: white; border: none; font-size: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center; z-index: 10;\"><i\r\n");
      out.write("                                                            class=\"fas fa-chevron-right\"></i></button>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                        <!-- TÌM KIẾM HÀNG ĐẦU -->\r\n");
      out.write("                                        <div class=\"top-search-section\"\r\n");
      out.write("                                            style=\"background: #fff; border-radius: 2px; overflow: hidden; margin-bottom: 20px; box-shadow: 0 1px 2px 0 rgba(0,0,0,.05); position: relative;\">\r\n");
      out.write("                                            <div class=\"top-search-header\"\r\n");
      out.write("                                                style=\"color: #ee4d2d; font-size: 16px; padding: 18px 20px; border-bottom: 1px solid rgba(0,0,0,.05); text-transform: uppercase;\">\r\n");
      out.write("                                                Tìm Kiếm Hàng Đầu <span\r\n");
      out.write("                                                    style=\"float: right; color: #ee4d2d; font-size: 14px; text-transform: none; cursor: pointer;\">Xem\r\n");
      out.write("                                                    Tất Cả ></span>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                            <button class=\"nav-arrow-btn nav-arrow-btn--left\" id=\"btnTopSearchLeft\"\r\n");
      out.write("                                                style=\"position: absolute; left: 0; top: 55%; transform: translateY(-50%); width: 25px; height: 50px; background: rgba(0,0,0,0.2); color: white; border: none; font-size: 16px; cursor: pointer; display: none; z-index: 10;\">\r\n");
      out.write("                                                <i class=\"fas fa-chevron-left\"></i>\r\n");
      out.write("                                            </button>\r\n");
      out.write("                                            <button class=\"nav-arrow-btn nav-arrow-btn--right\" id=\"btnTopSearchRight\"\r\n");
      out.write("                                                style=\"position: absolute; right: 0; top: 55%; transform: translateY(-50%); width: 25px; height: 50px; background: rgba(0,0,0,0.2); color: white; border: none; font-size: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center; z-index: 10;\">\r\n");
      out.write("                                                <i class=\"fas fa-chevron-right\"></i>\r\n");
      out.write("                                            </button>\r\n");
      out.write("                                            <div class=\"top-search-list\" id=\"topSearchGrid\"\r\n");
      out.write("                                                style=\"display: flex; gap: 15px; padding: 20px; overflow-x: auto; scrollbar-width: none; scroll-behavior: smooth;\">\r\n");
      out.write("\r\n");
      out.write("                                                ");
      if (_jspx_meth_c_005fforEach_005f2(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                        <!-- GỢI Ý HÔM NAY -->\r\n");
      out.write("                                        <div class=\"suggest-today-header\"\r\n");
      out.write("                                            style=\"background:#fff; padding: 15px; margin-bottom: 5px; text-align: center; color: #ee4d2d; font-size: 16px; text-transform: uppercase; border-bottom: 4px solid #ee4d2d; position: sticky; top: 119px; z-index: 10; box-shadow: 0 1px 2px 0 rgba(0,0,0,.05);\">\r\n");
      out.write("                                            Gợi Ý Hôm Nay\r\n");
      out.write("                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                        <!-- Product Grid -->\r\n");
      out.write("                                        <div class=\"home-product\">\r\n");
      out.write("                                            <div class=\"row\" id=\"product-list\">\r\n");
      out.write("\r\n");
      out.write("                                                ");
 List<ProductDTO> list = (List<ProductDTO>)
                                                        request.getAttribute("products");
                                                        if (list != null && !list.isEmpty()) {
                                                        for (ProductDTO p : list) {
                                                        
      out.write("\r\n");
      out.write("                                                        <div class=\"col\">\r\n");
      out.write("                                                            ");
 String slug="san-pham" ; if (p.getName() !=null) {
                                                                slug=p.getName().trim() .replaceAll("[\\s/]+", "-" )
                                                                .replaceAll("[^\\p{L}\\p{N}\\-]", "" )
                                                                .replaceAll("-{2,}", "-" ) .replaceAll("^-|-$", "" ); }
                                                                
      out.write("\r\n");
      out.write("                                                                <a class=\"home-product-item\"\r\n");
      out.write("                                                                    href=\"");
      out.print( slug );
      out.write("-i.686868.");
      out.print( p.getId() );
      out.write("\">\r\n");
      out.write("                                                                    <div class=\"home-product-item__img\"\r\n");
      out.write("                                                                        style=\"background-image: url('");
      out.print( p.getImageUrl() );
      out.write("')\">\r\n");
      out.write("                                                                    </div>\r\n");
      out.write("                                                                    <h4 class=\"home-product-item__name\">\r\n");
      out.write("                                                                        ");
      out.print( p.getName() );
      out.write("\r\n");
      out.write("                                                                    </h4>\r\n");
      out.write("\r\n");
      out.write("                                                                    <div class=\"home-product-item__price\">\r\n");
      out.write("                                                                        <span class=\"home-product-item__price-current\">₫\r\n");
      out.write("                                                                            ");
      out.print( String.format("%,.0f", p.getMinPrice())
                                                                                );
      out.write("\r\n");
      out.write("                                                                        </span>\r\n");
      out.write("                                                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                                                    <div class=\"home-product-item__action\">\r\n");
      out.write("                                                                        <span class=\"home-product-item__rating\">\r\n");
      out.write("                                                                            <i\r\n");
      out.write("                                                                                class=\"home-product-item__star--gold fas fa-star\"></i>\r\n");
      out.write("                                                                            <i\r\n");
      out.write("                                                                                class=\"home-product-item__star--gold fas fa-star\"></i>\r\n");
      out.write("                                                                            <i\r\n");
      out.write("                                                                                class=\"home-product-item__star--gold fas fa-star\"></i>\r\n");
      out.write("                                                                            <i\r\n");
      out.write("                                                                                class=\"home-product-item__star--gold fas fa-star\"></i>\r\n");
      out.write("                                                                            <i\r\n");
      out.write("                                                                                class=\"home-product-item__star--gold fas fa-star\"></i>\r\n");
      out.write("                                                                        </span>\r\n");
      out.write("                                                                        <span class=\"home-product-item__sold\">Đã bán\r\n");
      out.write("                                                                            13,2k</span>\r\n");
      out.write("                                                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                                                    <div class=\"home-product-item__origin\">\r\n");
      out.write("                                                                        <span>Hà Nội</span>\r\n");
      out.write("                                                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                                                    <div class=\"home-product-item__favourite\">\r\n");
      out.write("                                                                        <i class=\"fas fa-check\"></i>\r\n");
      out.write("                                                                        <span>Yêu thích</span>\r\n");
      out.write("                                                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                                                    <div class=\"home-product-item__sale-off\">\r\n");
      out.write("                                                                        <span\r\n");
      out.write("                                                                            class=\"home-product-item__sale-off-percent\">10%</span>\r\n");
      out.write("                                                                        <span\r\n");
      out.write("                                                                            class=\"home-product-item__sale-off-label\">GIẢM</span>\r\n");
      out.write("                                                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                                                    ");
 if (acc !=null && "admin"
                                                                        .equalsIgnoreCase(acc.getRole())) { 
      out.write("\r\n");
      out.write("                                                                        <div\r\n");
      out.write("                                                                            style=\"text-align:center; padding: 5px; border-top: 1px dashed #ddd; background:#fff;\">\r\n");
      out.write("                                                                            <object><a\r\n");
      out.write("                                                                                    href=\"product-manage?action=delete&id=");
      out.print( p.getId() );
      out.write("\"\r\n");
      out.write("                                                                                    style=\"color:#d0011b; font-size:12px; font-weight:bold; text-decoration:none;\"\r\n");
      out.write("                                                                                    onclick=\"return confirm('Xóa thật hả?')\">Xóa\r\n");
      out.write("                                                                                    SP</a></object>\r\n");
      out.write("                                                                        </div>\r\n");
      out.write("                                                                        ");
 } 
      out.write("\r\n");
      out.write("                                                                </a>\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                        ");
 } } else { 
      out.write("\r\n");
      out.write("                                                            <div\r\n");
      out.write("                                                                style=\"width:100%; text-align:center; padding: 50px 0; color:#555;\">\r\n");
      out.write("                                                                <i class=\"fas fa-box-open fa-3x mb-3 text-muted\"></i>\r\n");
      out.write("                                                                <p>Chưa có sản phẩm. Vui lòng thêm từ Admin!</p>\r\n");
      out.write("                                                            </div>\r\n");
      out.write("                                                            ");
 } 
      out.write("\r\n");
      out.write("\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                    </div>\r\n");
      out.write("                                </div>\r\n");
      out.write("\r\n");
      out.write("                                <!-- FOOTER -->\r\n");
      out.write("                                <footer class=\"footer\">\r\n");
      out.write("                                    <div class=\"grid\">\r\n");
      out.write("                                        <div class=\"row\" style=\"padding:0 20px;\">\r\n");
      out.write("                                            <div class=\"col\" style=\"width: 25%\">\r\n");
      out.write("                                                <h3 class=\"footer__heading\">Chăm sóc khách hàng</h3>\r\n");
      out.write("                                                <ul class=\"footer-list\">\r\n");
      out.write("                                                    <li><a href=\"#\" class=\"footer-item__link\">Trung tâm trợ giúp</a>\r\n");
      out.write("                                                    </li>\r\n");
      out.write("                                                    <li><a href=\"#\" class=\"footer-item__link\">Shopee Blog</a></li>\r\n");
      out.write("                                                    <li><a href=\"#\" class=\"footer-item__link\">Shopee Mall</a></li>\r\n");
      out.write("                                                    <li><a href=\"#\" class=\"footer-item__link\">Hướng dẫn mua hàng</a>\r\n");
      out.write("                                                    </li>\r\n");
      out.write("                                                </ul>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                            <div class=\"col\" style=\"width: 25%\">\r\n");
      out.write("                                                <h3 class=\"footer__heading\">Về Shopee</h3>\r\n");
      out.write("                                                <ul class=\"footer-list\">\r\n");
      out.write("                                                    <li><a href=\"#\" class=\"footer-item__link\">Giới thiệu</a></li>\r\n");
      out.write("                                                    <li><a href=\"#\" class=\"footer-item__link\">Tuyển dụng</a></li>\r\n");
      out.write("                                                    <li><a href=\"#\" class=\"footer-item__link\">Điều khoản</a></li>\r\n");
      out.write("                                                </ul>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                            <div class=\"col\" style=\"width: 25%\">\r\n");
      out.write("                                                <h3 class=\"footer__heading\">Theo dõi</h3>\r\n");
      out.write("                                                <ul class=\"footer-list\">\r\n");
      out.write("                                                    <li><a href=\"#\" class=\"footer-item__link\"><i class=\"fab fa-facebook\"\r\n");
      out.write("                                                                style=\"font-size: 1.2rem; margin-right: 8px;\"></i>\r\n");
      out.write("                                                            Facebook</a></li>\r\n");
      out.write("                                                    <li><a href=\"#\" class=\"footer-item__link\"><i\r\n");
      out.write("                                                                class=\"fab fa-instagram\"\r\n");
      out.write("                                                                style=\"font-size: 1.2rem; margin-right: 8px;\"></i>\r\n");
      out.write("                                                            Instagram</a></li>\r\n");
      out.write("                                                </ul>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("                                    </div>\r\n");
      out.write("                                    <div class=\"footer__bottom\">\r\n");
      out.write("                                        <div class=\"grid\">\r\n");
      out.write("                                            <p class=\"footer__text\">© 2026 Shopee Clone. Trình tự môn Hệ Thống Web.\r\n");
      out.write("                                            </p>\r\n");
      out.write("                                        </div>\r\n");
      out.write("                                    </div>\r\n");
      out.write("                                </footer>\r\n");
      out.write("\r\n");
      out.write("                                <!-- Shopee AI Chat Widget -->\r\n");
      out.write("                                <div class=\"shopee-chat-btn\" id=\"shopeeChatBtn\">\r\n");
      out.write("                                    <i class=\"fas fa-comment-dots\"></i>\r\n");
      out.write("                                </div>\r\n");
      out.write("                                <div class=\"shopee-chat-window\" id=\"shopeeChatWindow\">\r\n");
      out.write("                                    <div class=\"shopee-chat-header\">\r\n");
      out.write("                                        <span><i class=\"fas fa-robot\" style=\"margin-right: 5px;\"></i> Trợ lý Shopee\r\n");
      out.write("                                            AI</span>\r\n");
      out.write("                                        <i class=\"fas fa-times shopee-chat-close\" id=\"shopeeChatClose\"></i>\r\n");
      out.write("                                    </div>\r\n");
      out.write("                                    <div class=\"shopee-chat-messages\" id=\"shopeeChatMessages\">\r\n");
      out.write("                                        <div class=\"chat-msg-wrapper bot\">\r\n");
      out.write("                                            <div class=\"chat-avatar\"><i class=\"fas fa-robot\"></i></div>\r\n");
      out.write("                                            <div class=\"chat-msg bot\">Xin chào! Tôi là trợ lý AI ảo của Shopee. Tôi có thể giúp gì cho bạn hôm nay? 😊</div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("                                    </div>\r\n");
      out.write("                                    <div class=\"shopee-chat-preview\" id=\"chatPreview\" style=\"display:none\"></div>\r\n");
      out.write("                                    <div class=\"shopee-chat-input-area\">\r\n");
      out.write("                                        <input type=\"file\" id=\"chatImageInput\" accept=\"image/*\" style=\"display:none\">\r\n");
      out.write("                                        <input type=\"file\" id=\"chatFileInput\" accept=\".pdf,.doc,.docx,.txt,.xls,.xlsx,.csv,.zip,.rar\" style=\"display:none\">\r\n");
      out.write("                                        <button class=\"shopee-chat-attach-btn\" id=\"chatImageBtn\" title=\"Gửi ảnh\">\r\n");
      out.write("                                            <i class=\"fas fa-image\"></i>\r\n");
      out.write("                                        </button>\r\n");
      out.write("                                        <button class=\"shopee-chat-attach-btn\" id=\"chatFileBtn\" title=\"Đính kèm file\">\r\n");
      out.write("                                            <i class=\"fas fa-paperclip\"></i>\r\n");
      out.write("                                        </button>\r\n");
      out.write("                                        <input type=\"text\" class=\"shopee-chat-input\" id=\"shopeeChatInput\"\r\n");
      out.write("                                            placeholder=\"Nhập tin nhắn...\" autocomplete=\"off\">\r\n");
      out.write("                                        <button class=\"shopee-chat-send\" id=\"shopeeChatSend\"><i\r\n");
      out.write("                                                class=\"fas fa-paper-plane\"></i></button>\r\n");
      out.write("                                    </div>\r\n");
      out.write("                                </div>\r\n");
      out.write("\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <script>\r\n");
      out.write("                                document.addEventListener(\"DOMContentLoaded\", function () {\r\n");
      out.write("                                    // Hàm khởi tạo Carousel dùng chung cho các section\r\n");
      out.write("                                    function initCarousel(gridId, btnLeftId, btnRightId, displayStyle = \"block\") {\r\n");
      out.write("                                        const grid = document.getElementById(gridId);\r\n");
      out.write("                                        const btnLeft = document.getElementById(btnLeftId);\r\n");
      out.write("                                        const btnRight = document.getElementById(btnRightId);\r\n");
      out.write("\r\n");
      out.write("                                        if (grid && btnLeft && btnRight) {\r\n");
      out.write("                                            function updateNavButtons() {\r\n");
      out.write("                                                const maxScroll = grid.scrollWidth - grid.clientWidth;\r\n");
      out.write("                                                const currentScroll = grid.scrollLeft;\r\n");
      out.write("\r\n");
      out.write("                                                // 1. Khi nội dung quá ngắn, không có cuộn (maxScroll <= 1), ẩn cả 2 nút\r\n");
      out.write("                                                if (maxScroll <= 1) {\r\n");
      out.write("                                                    btnLeft.style.display = \"none\";\r\n");
      out.write("                                                    btnRight.style.display = \"none\";\r\n");
      out.write("                                                } else {\r\n");
      out.write("                                                    // 2. Nội dung có cuộn, logic hiển thị:\r\n");
      out.write("                                                    // Thêm dung sai 50px phòng tránh lỗi pixel fraction hoặc margin gap trong CSS Grid \r\n");
      out.write("                                                    // khiến scrollLeft không bao giờ chạm tới maxScroll\r\n");
      out.write("                                                    btnLeft.style.display = currentScroll <= 50 ? \"none\" : displayStyle;\r\n");
      out.write("                                                    btnRight.style.display = currentScroll >= maxScroll - 50 ? \"none\" : displayStyle;\r\n");
      out.write("                                                    if (gridId === 'shopeeMallGrid') {\r\n");
      out.write("                                                        console.log(\"ShopeeMallGrid - scrollLeft:\", currentScroll, \"maxScroll:\", maxScroll, \"clientWidth:\", grid.clientWidth, \"scrollWidth:\", grid.scrollWidth);\r\n");
      out.write("                                                    }\r\n");
      out.write("                                                }\r\n");
      out.write("                                            }\r\n");
      out.write("\r\n");
      out.write("                                            // Gọi ngay lần đầu\r\n");
      out.write("                                            updateNavButtons();\r\n");
      out.write("\r\n");
      out.write("                                            // Gán sự kiện Event listener\r\n");
      out.write("                                            grid.addEventListener(\"scroll\", updateNavButtons);\r\n");
      out.write("                                            window.addEventListener(\"resize\", updateNavButtons);\r\n");
      out.write("\r\n");
      out.write("                                            btnLeft.addEventListener(\"click\", () => {\r\n");
      out.write("                                                const currentScroll = grid.scrollLeft;\r\n");
      out.write("                                                const scrollAmount = currentScroll <= grid.clientWidth * 1.5 ? currentScroll : grid.clientWidth;\r\n");
      out.write("                                                grid.scrollBy({ left: -scrollAmount, behavior: \"smooth\" });\r\n");
      out.write("                                            });\r\n");
      out.write("                                            btnRight.addEventListener(\"click\", () => {\r\n");
      out.write("                                                const maxScroll = grid.scrollWidth - grid.clientWidth;\r\n");
      out.write("                                                const currentScroll = grid.scrollLeft;\r\n");
      out.write("                                                const remainingScroll = maxScroll - currentScroll;\r\n");
      out.write("                                                const scrollAmount = remainingScroll <= grid.clientWidth * 1.5 ? remainingScroll : grid.clientWidth;\r\n");
      out.write("                                                grid.scrollBy({ left: scrollAmount, behavior: \"smooth\" });\r\n");
      out.write("                                            });\r\n");
      out.write("                                            // Thêm ResizeObserver để tự cập nhật khi layout hoặc ảnh thay đổi kích thước\r\n");
      out.write("                                            const observer = new ResizeObserver(() => {\r\n");
      out.write("                                                updateNavButtons();\r\n");
      out.write("                                            });\r\n");
      out.write("                                            observer.observe(grid);\r\n");
      out.write("\r\n");
      out.write("                                            // Chạy lại khi trang đã load hết tất cả resource (ảnh)\r\n");
      out.write("                                            window.addEventListener('load', updateNavButtons);\r\n");
      out.write("                                        }\r\n");
      out.write("                                    }\r\n");
      out.write("\r\n");
      out.write("                                    // Áp dụng vòng lặp Navigation Scroll cho toàn bộ các danh sách grid\r\n");
      out.write("                                    initCarousel(\"categoryGrid\", \"btnCategoryLeft\", \"btnCategoryRight\", \"flex\");\r\n");
      out.write("                                    initCarousel(\"flashSaleGrid\", \"btnFlashSaleLeft\", \"btnFlashSaleRight\", \"flex\");\r\n");
      out.write("                                    initCarousel(\"shopeeMallGrid\", \"btnMallLeft\", \"btnMallRight\", \"flex\");\r\n");
      out.write("                                    initCarousel(\"topSearchGrid\", \"btnTopSearchLeft\", \"btnTopSearchRight\", \"flex\");\r\n");
      out.write("\r\n");
      out.write("                                    // --- Main Banner Carousel Logic ---\r\n");
      out.write("                                    const mainBannerCarousel = document.getElementById(\"mainBannerCarousel\");\r\n");
      out.write("                                    const mainBannerWrapper = document.getElementById(\"mainBannerWrapper\");\r\n");
      out.write("                                    const mainBannerLeftBtn = document.getElementById(\"mainBannerLeftBtn\");\r\n");
      out.write("                                    const mainBannerRightBtn = document.getElementById(\"mainBannerRightBtn\");\r\n");
      out.write("                                    const dots = document.querySelectorAll(\".banner-dot\");\r\n");
      out.write("                                    let currentIndex = 0;\r\n");
      out.write("                                    const totalBanners = 2; // Tạm thời để 2 ảnh\r\n");
      out.write("                                    let autoPlayInterval;\r\n");
      out.write("\r\n");
      out.write("                                    if (mainBannerCarousel) {\r\n");
      out.write("                                        // Ẩn hiện navigation buttons popup on hover wrapper\r\n");
      out.write("                                        mainBannerWrapper.addEventListener(\"mouseenter\", () => {\r\n");
      out.write("                                            mainBannerLeftBtn.style.display = \"block\";\r\n");
      out.write("                                            mainBannerRightBtn.style.display = \"block\";\r\n");
      out.write("                                        });\r\n");
      out.write("                                        mainBannerWrapper.addEventListener(\"mouseleave\", () => {\r\n");
      out.write("                                            mainBannerLeftBtn.style.display = \"none\";\r\n");
      out.write("                                            mainBannerRightBtn.style.display = \"none\";\r\n");
      out.write("                                        });\r\n");
      out.write("\r\n");
      out.write("                                        function updateDots(index) {\r\n");
      out.write("                                            dots.forEach(dot => {\r\n");
      out.write("                                                dot.style.opacity = \"0.5\";\r\n");
      out.write("                                                dot.classList.remove(\"active\");\r\n");
      out.write("                                            });\r\n");
      out.write("                                            if (dots[index]) {\r\n");
      out.write("                                                dots[index].style.opacity = \"1\";\r\n");
      out.write("                                                dots[index].classList.add(\"active\");\r\n");
      out.write("                                            }\r\n");
      out.write("                                        }\r\n");
      out.write("\r\n");
      out.write("                                        function scrollToBanner(index) {\r\n");
      out.write("                                            if (index < 0) index = totalBanners - 1;\r\n");
      out.write("                                            if (index >= totalBanners) index = 0;\r\n");
      out.write("                                            currentIndex = index;\r\n");
      out.write("                                            mainBannerCarousel.scrollTo({ left: mainBannerCarousel.clientWidth * currentIndex, behavior: \"smooth\" });\r\n");
      out.write("                                            updateDots(currentIndex);\r\n");
      out.write("                                        }\r\n");
      out.write("\r\n");
      out.write("                                        mainBannerLeftBtn.addEventListener(\"click\", () => {\r\n");
      out.write("                                            scrollToBanner(currentIndex - 1);\r\n");
      out.write("                                            resetAutoPlay();\r\n");
      out.write("                                        });\r\n");
      out.write("\r\n");
      out.write("                                        mainBannerRightBtn.addEventListener(\"click\", () => {\r\n");
      out.write("                                            scrollToBanner(currentIndex + 1);\r\n");
      out.write("                                            resetAutoPlay();\r\n");
      out.write("                                        });\r\n");
      out.write("\r\n");
      out.write("                                        dots.forEach(dot => {\r\n");
      out.write("                                            dot.addEventListener(\"click\", (e) => {\r\n");
      out.write("                                                const idx = parseInt(e.target.getAttribute(\"data-index\"));\r\n");
      out.write("                                                scrollToBanner(idx);\r\n");
      out.write("                                                resetAutoPlay();\r\n");
      out.write("                                            });\r\n");
      out.write("                                        });\r\n");
      out.write("\r\n");
      out.write("                                        // Auto play every 3 seconds\r\n");
      out.write("                                        function startAutoPlay() {\r\n");
      out.write("                                            autoPlayInterval = setInterval(() => {\r\n");
      out.write("                                                scrollToBanner(currentIndex + 1);\r\n");
      out.write("                                            }, 3000);\r\n");
      out.write("                                        }\r\n");
      out.write("\r\n");
      out.write("                                        function resetAutoPlay() {\r\n");
      out.write("                                            clearInterval(autoPlayInterval);\r\n");
      out.write("                                            startAutoPlay();\r\n");
      out.write("                                        }\r\n");
      out.write("\r\n");
      out.write("                                        mainBannerCarousel.addEventListener(\"scrollend\", () => {\r\n");
      out.write("                                            // Handle manual swipe updates\r\n");
      out.write("                                            const scrollPortion = mainBannerCarousel.scrollLeft / mainBannerCarousel.clientWidth;\r\n");
      out.write("                                            const idx = Math.round(scrollPortion);\r\n");
      out.write("                                            if (idx !== currentIndex) {\r\n");
      out.write("                                                currentIndex = idx;\r\n");
      out.write("                                                updateDots(currentIndex);\r\n");
      out.write("                                                resetAutoPlay();\r\n");
      out.write("                                            }\r\n");
      out.write("                                        });\r\n");
      out.write("\r\n");
      out.write("                                        startAutoPlay();\r\n");
      out.write("                                    }\r\n");
      out.write("\r\n");
      out.write("                                    // --- Shopee AI Chat Logic ---\r\n");
      out.write("                                    const chatBtn = document.getElementById(\"shopeeChatBtn\");\r\n");
      out.write("                                    const chatWindow = document.getElementById(\"shopeeChatWindow\");\r\n");
      out.write("                                    const chatClose = document.getElementById(\"shopeeChatClose\");\r\n");
      out.write("                                    const chatInput = document.getElementById(\"shopeeChatInput\");\r\n");
      out.write("                                    const chatSend = document.getElementById(\"shopeeChatSend\");\r\n");
      out.write("                                    const chatMessages = document.getElementById(\"shopeeChatMessages\");\r\n");
      out.write("                                    const chatImageInput = document.getElementById(\"chatImageInput\");\r\n");
      out.write("                                    const chatFileInput = document.getElementById(\"chatFileInput\");\r\n");
      out.write("                                    const chatImageBtn = document.getElementById(\"chatImageBtn\");\r\n");
      out.write("                                    const chatFileBtn = document.getElementById(\"chatFileBtn\");\r\n");
      out.write("                                    const chatPreview = document.getElementById(\"chatPreview\");\r\n");
      out.write("\r\n");
      out.write("                                    // API Proxypal qua Ngrok (public URL)\r\n");
      out.write("                                    const apiKey = \"proxypal-local\";\r\n");
      out.write("                                    const apiUrl = \"https://chopfallen-will-steamily.ngrok-free.dev/v1/chat/completions\";\r\n");
      out.write("                                    let chatHistory = []; // Lưu lại lịch sử hội thoại\r\n");
      out.write("\r\n");
      out.write("                                    // Trạng thái đính kèm hiện tại\r\n");
      out.write("                                    let pendingAttachment = null; // { type: 'image'|'file', base64, name, mimeType, dataUrl }\r\n");
      out.write("\r\n");
      out.write("                                    // Lời nhắc hệ thống (System Prompt)\r\n");
      out.write("                                    const systemInstruction = {\r\n");
      out.write("                                        role: \"system\",\r\n");
      out.write("                                        content: \"Bạn là trợ lý ảo thân thiện của Shopee. Tư vấn khách hàng ngắn gọn, lịch sự, chuyên nghiệp và hữu ích. Dùng emoji sinh động. Khi người dùng gửi ảnh, hãy phân tích và mô tả nội dung ảnh. Khi người dùng gửi file, hãy phân tích nội dung file.\"\r\n");
      out.write("                                    };\r\n");
      out.write("\r\n");
      out.write("                                    if (chatBtn && chatWindow) {\r\n");
      out.write("                                        chatBtn.addEventListener(\"click\", () => {\r\n");
      out.write("                                            const isHidden = chatWindow.style.display === \"none\" || chatWindow.style.display === \"\";\r\n");
      out.write("                                            chatWindow.style.display = isHidden ? \"flex\" : \"none\";\r\n");
      out.write("                                            if (isHidden) {\r\n");
      out.write("                                                chatInput.focus();\r\n");
      out.write("                                            }\r\n");
      out.write("                                        });\r\n");
      out.write("\r\n");
      out.write("                                        chatClose.addEventListener(\"click\", () => {\r\n");
      out.write("                                            chatWindow.style.display = \"none\";\r\n");
      out.write("                                        });\r\n");
      out.write("\r\n");
      out.write("                                        // === Xử lý chọn ảnh ===\r\n");
      out.write("                                        chatImageBtn.addEventListener(\"click\", () => chatImageInput.click());\r\n");
      out.write("                                        chatImageInput.addEventListener(\"change\", function () {\r\n");
      out.write("                                            const file = this.files[0];\r\n");
      out.write("                                            if (!file) return;\r\n");
      out.write("                                            if (file.size > 10 * 1024 * 1024) {\r\n");
      out.write("                                                alert(\"Ảnh quá lớn! Vui lòng chọn ảnh dưới 10MB.\");\r\n");
      out.write("                                                this.value = '';\r\n");
      out.write("                                                return;\r\n");
      out.write("                                            }\r\n");
      out.write("                                            const reader = new FileReader();\r\n");
      out.write("                                            reader.onload = function (e) {\r\n");
      out.write("                                                const dataUrl = e.target.result;\r\n");
      out.write("                                                pendingAttachment = {\r\n");
      out.write("                                                    type: 'image',\r\n");
      out.write("                                                    dataUrl: dataUrl,\r\n");
      out.write("                                                    name: file.name,\r\n");
      out.write("                                                    mimeType: file.type\r\n");
      out.write("                                                };\r\n");
      out.write("                                                showPreview();\r\n");
      out.write("                                            };\r\n");
      out.write("                                            reader.readAsDataURL(file);\r\n");
      out.write("                                            this.value = ''; // Reset để có thể chọn lại cùng file\r\n");
      out.write("                                        });\r\n");
      out.write("\r\n");
      out.write("                                        // === Xử lý chọn file ===\r\n");
      out.write("                                        chatFileBtn.addEventListener(\"click\", () => chatFileInput.click());\r\n");
      out.write("                                        chatFileInput.addEventListener(\"change\", function () {\r\n");
      out.write("                                            const file = this.files[0];\r\n");
      out.write("                                            if (!file) return;\r\n");
      out.write("                                            if (file.size > 10 * 1024 * 1024) {\r\n");
      out.write("                                                alert(\"File quá lớn! Vui lòng chọn file dưới 10MB.\");\r\n");
      out.write("                                                this.value = '';\r\n");
      out.write("                                                return;\r\n");
      out.write("                                            }\r\n");
      out.write("                                            const reader = new FileReader();\r\n");
      out.write("                                            reader.onload = function (e) {\r\n");
      out.write("                                                pendingAttachment = {\r\n");
      out.write("                                                    type: 'file',\r\n");
      out.write("                                                    textContent: e.target.result,\r\n");
      out.write("                                                    name: file.name,\r\n");
      out.write("                                                    size: file.size\r\n");
      out.write("                                                };\r\n");
      out.write("                                                showPreview();\r\n");
      out.write("                                            };\r\n");
      out.write("                                            reader.readAsText(file);\r\n");
      out.write("                                            this.value = '';\r\n");
      out.write("                                        });\r\n");
      out.write("\r\n");
      out.write("                                        // === Hiển thị preview (dùng DOM thay vì innerHTML tránh xung đột JSP EL) ===\r\n");
      out.write("                                        function showPreview() {\r\n");
      out.write("                                            if (!pendingAttachment) {\r\n");
      out.write("                                                chatPreview.style.display = 'none';\r\n");
      out.write("                                                return;\r\n");
      out.write("                                            }\r\n");
      out.write("                                            chatPreview.style.display = 'flex';\r\n");
      out.write("                                            chatPreview.innerHTML = '';\r\n");
      out.write("\r\n");
      out.write("                                            if (pendingAttachment.type === 'image') {\r\n");
      out.write("                                                var prevImg = document.createElement('img');\r\n");
      out.write("                                                prevImg.src = pendingAttachment.dataUrl;\r\n");
      out.write("                                                prevImg.alt = 'Preview';\r\n");
      out.write("                                                chatPreview.appendChild(prevImg);\r\n");
      out.write("\r\n");
      out.write("                                                var prevName = document.createElement('span');\r\n");
      out.write("                                                prevName.style.cssText = 'font-size:12px;color:#666;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap';\r\n");
      out.write("                                                prevName.textContent = pendingAttachment.name;\r\n");
      out.write("                                                chatPreview.appendChild(prevName);\r\n");
      out.write("                                            } else {\r\n");
      out.write("                                                var fileInfo = document.createElement('div');\r\n");
      out.write("                                                fileInfo.className = 'preview-file-info';\r\n");
      out.write("                                                var fileIcon = document.createElement('i');\r\n");
      out.write("                                                fileIcon.className = 'fas fa-file-alt';\r\n");
      out.write("                                                fileInfo.appendChild(fileIcon);\r\n");
      out.write("                                                var fileDetail = document.createElement('div');\r\n");
      out.write("                                                var fileName = document.createElement('div');\r\n");
      out.write("                                                fileName.style.cssText = 'font-weight:500;max-width:180px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap';\r\n");
      out.write("                                                fileName.textContent = pendingAttachment.name;\r\n");
      out.write("                                                fileDetail.appendChild(fileName);\r\n");
      out.write("                                                var fileSize = document.createElement('div');\r\n");
      out.write("                                                fileSize.style.cssText = 'color:#999;font-size:11px';\r\n");
      out.write("                                                fileSize.textContent = (pendingAttachment.size / 1024).toFixed(1) + ' KB';\r\n");
      out.write("                                                fileDetail.appendChild(fileSize);\r\n");
      out.write("                                                fileInfo.appendChild(fileDetail);\r\n");
      out.write("                                                chatPreview.appendChild(fileInfo);\r\n");
      out.write("                                            }\r\n");
      out.write("\r\n");
      out.write("                                            var removeBtn = document.createElement('button');\r\n");
      out.write("                                            removeBtn.className = 'preview-remove';\r\n");
      out.write("                                            removeBtn.title = 'Xóa';\r\n");
      out.write("                                            removeBtn.innerHTML = '&times;';\r\n");
      out.write("                                            removeBtn.addEventListener('click', clearAttachment);\r\n");
      out.write("                                            chatPreview.appendChild(removeBtn);\r\n");
      out.write("                                        }\r\n");
      out.write("\r\n");
      out.write("                                        function clearAttachment() {\r\n");
      out.write("                                            pendingAttachment = null;\r\n");
      out.write("                                            chatPreview.style.display = 'none';\r\n");
      out.write("                                            chatPreview.innerHTML = '';\r\n");
      out.write("                                        }\r\n");
      out.write("\r\n");
      out.write("                                        // === Hiển thị tin nhắn (dùng DOM createElement tránh JSP EL xung đột) ===\r\n");
      out.write("                                        function addMessage(text, sender, attachment) {\r\n");
      out.write("                                            // Wrapper chứa avatar + bubble\r\n");
      out.write("                                            var wrapper = document.createElement('div');\r\n");
      out.write("                                            wrapper.className = 'chat-msg-wrapper ' + sender;\r\n");
      out.write("\r\n");
      out.write("                                            // Avatar\r\n");
      out.write("                                            var avatar = document.createElement('div');\r\n");
      out.write("                                            avatar.className = 'chat-avatar';\r\n");
      out.write("                                            var avatarIcon = document.createElement('i');\r\n");
      out.write("                                            avatarIcon.className = sender === 'bot' ? 'fas fa-robot' : 'fas fa-user';\r\n");
      out.write("                                            avatar.appendChild(avatarIcon);\r\n");
      out.write("                                            wrapper.appendChild(avatar);\r\n");
      out.write("\r\n");
      out.write("                                            // Bubble tin nhắn\r\n");
      out.write("                                            var msgDiv = document.createElement('div');\r\n");
      out.write("                                            msgDiv.className = 'chat-msg ' + sender;\r\n");
      out.write("\r\n");
      out.write("                                            // Nếu có ảnh đính kèm → dùng createElement (không dùng innerHTML)\r\n");
      out.write("                                            if (attachment && attachment.type === 'image') {\r\n");
      out.write("                                                var img = document.createElement('img');\r\n");
      out.write("                                                img.src = attachment.dataUrl;\r\n");
      out.write("                                                img.className = 'chat-image';\r\n");
      out.write("                                                img.alt = 'Ảnh';\r\n");
      out.write("                                                img.addEventListener('click', function() { window.open(this.src, '_blank'); });\r\n");
      out.write("                                                msgDiv.appendChild(img);\r\n");
      out.write("                                            }\r\n");
      out.write("\r\n");
      out.write("                                            // Nếu có file đính kèm\r\n");
      out.write("                                            if (attachment && attachment.type === 'file') {\r\n");
      out.write("                                                var badge = document.createElement('div');\r\n");
      out.write("                                                badge.className = 'chat-file-badge';\r\n");
      out.write("                                                var fIcon = document.createElement('i');\r\n");
      out.write("                                                fIcon.className = 'fas fa-file-alt';\r\n");
      out.write("                                                badge.appendChild(fIcon);\r\n");
      out.write("                                                badge.appendChild(document.createTextNode(' ' + attachment.name));\r\n");
      out.write("                                                msgDiv.appendChild(badge);\r\n");
      out.write("                                            }\r\n");
      out.write("\r\n");
      out.write("                                            // Text content\r\n");
      out.write("                                            if (text) {\r\n");
      out.write("                                                if (msgDiv.childNodes.length > 0) {\r\n");
      out.write("                                                    msgDiv.appendChild(document.createElement('br'));\r\n");
      out.write("                                                }\r\n");
      out.write("                                                var textSpan = document.createElement('span');\r\n");
      out.write("                                                var safeText = text.replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n");
      out.write("                                                textSpan.innerHTML = safeText.replace(/\\n/g, '<br>');\r\n");
      out.write("                                                msgDiv.appendChild(textSpan);\r\n");
      out.write("                                            }\r\n");
      out.write("\r\n");
      out.write("                                            wrapper.appendChild(msgDiv);\r\n");
      out.write("                                            chatMessages.appendChild(wrapper);\r\n");
      out.write("                                            chatMessages.scrollTop = chatMessages.scrollHeight;\r\n");
      out.write("                                        }\r\n");
      out.write("\r\n");
      out.write("                                        function addTypingIndicator() {\r\n");
      out.write("                                            var wrapper = document.createElement('div');\r\n");
      out.write("                                            wrapper.className = 'chat-msg-wrapper bot';\r\n");
      out.write("                                            wrapper.id = 'typingIndicator';\r\n");
      out.write("\r\n");
      out.write("                                            var avatar = document.createElement('div');\r\n");
      out.write("                                            avatar.className = 'chat-avatar';\r\n");
      out.write("                                            var icon = document.createElement('i');\r\n");
      out.write("                                            icon.className = 'fas fa-robot';\r\n");
      out.write("                                            avatar.appendChild(icon);\r\n");
      out.write("                                            wrapper.appendChild(avatar);\r\n");
      out.write("\r\n");
      out.write("                                            var msgDiv = document.createElement('div');\r\n");
      out.write("                                            msgDiv.className = 'chat-msg bot typing';\r\n");
      out.write("                                            msgDiv.innerHTML = '<span class=\"typing-indicator\"></span><span class=\"typing-indicator\"></span><span class=\"typing-indicator\"></span>';\r\n");
      out.write("                                            wrapper.appendChild(msgDiv);\r\n");
      out.write("\r\n");
      out.write("                                            chatMessages.appendChild(wrapper);\r\n");
      out.write("                                            chatMessages.scrollTop = chatMessages.scrollHeight;\r\n");
      out.write("                                        }\r\n");
      out.write("\r\n");
      out.write("                                        function removeTypingIndicator() {\r\n");
      out.write("                                            var typing = document.getElementById(\"typingIndicator\");\r\n");
      out.write("                                            if (typing) typing.remove();\r\n");
      out.write("                                        }\r\n");
      out.write("\r\n");
      out.write("                                        async function fetchFromAI() {\r\n");
      out.write("                                            // Format lịch sử hội thoại cho OpenAI API\r\n");
      out.write("                                            const messages = [systemInstruction, ...chatHistory];\r\n");
      out.write("\r\n");
      out.write("                                            try {\r\n");
      out.write("                                                const response = await fetch(apiUrl, {\r\n");
      out.write("                                                    method: 'POST',\r\n");
      out.write("                                                    headers: {\r\n");
      out.write("                                                        'Content-Type': 'application/json',\r\n");
      out.write("                                                        'Authorization': 'Bearer ' + apiKey,\r\n");
      out.write("                                                        'ngrok-skip-browser-warning': 'true'\r\n");
      out.write("                                                    },\r\n");
      out.write("                                                    body: JSON.stringify({\r\n");
      out.write("                                                        model: \"gpt-5\", // Sử dụng model gpt-5 qua ProxyPal\r\n");
      out.write("                                                        messages: messages,\r\n");
      out.write("                                                        temperature: 0.7\r\n");
      out.write("                                                    })\r\n");
      out.write("                                                });\r\n");
      out.write("\r\n");
      out.write("                                                if (!response.ok) {\r\n");
      out.write("                                                    const errData = await response.json().catch(() => ({}));\r\n");
      out.write("                                                    console.error(\"API Error details:\", errData);\r\n");
      out.write("                                                    const errMsg = (errData.error && errData.error.message) ? errData.error.message : 'Unknown';\r\n");
      out.write("                                                    throw new Error(\"HTTP Error \" + response.status + \": \" + errMsg);\r\n");
      out.write("                                                }\r\n");
      out.write("\r\n");
      out.write("                                                const data = await response.json();\r\n");
      out.write("                                                if (data && data.choices && data.choices.length > 0 && data.choices[0].message) {\r\n");
      out.write("                                                    const replyText = data.choices[0].message.content;\r\n");
      out.write("                                                    chatHistory.push({ role: \"assistant\", content: replyText });\r\n");
      out.write("                                                    return replyText;\r\n");
      out.write("                                                }\r\n");
      out.write("                                                return \"Xin lỗi, tôi không thể hiểu yêu cầu này, bạn có thể hỏi câu khác không?\";\r\n");
      out.write("                                            } catch (error) {\r\n");
      out.write("                                                console.error(\"[Shopee AI] Lỗi hệ thống:\", error);\r\n");
      out.write("\r\n");
      out.write("                                                // Nếu là lỗi mạng (Failed to fetch)\r\n");
      out.write("                                                if (error instanceof TypeError && error.message === \"Failed to fetch\") {\r\n");
      out.write("                                                    return \"Xin lỗi, hệ thống AI không thể kết nối tới máy chủ. Vui lòng thử lại sau.\";\r\n");
      out.write("                                                }\r\n");
      out.write("                                                // Nếu lỗi khác, in ra chi tiết\r\n");
      out.write("                                                return \"Xin lỗi, hệ thống AI đang gặp sự cố: \" + error.message;\r\n");
      out.write("                                            }\r\n");
      out.write("                                        }\r\n");
      out.write("\r\n");
      out.write("                                        async function handleSend() {\r\n");
      out.write("                                            const text = chatInput.value.trim();\r\n");
      out.write("                                            const attachment = pendingAttachment;\r\n");
      out.write("\r\n");
      out.write("                                            // Phải có text hoặc attachment\r\n");
      out.write("                                            if (!text && !attachment) return;\r\n");
      out.write("\r\n");
      out.write("                                            // Hiển thị tin nhắn user (có ảnh/file nếu có)\r\n");
      out.write("                                            addMessage(text, \"user\", attachment);\r\n");
      out.write("                                            chatInput.value = \"\";\r\n");
      out.write("                                            clearAttachment();\r\n");
      out.write("                                            addTypingIndicator();\r\n");
      out.write("\r\n");
      out.write("                                            // Tạo message cho API\r\n");
      out.write("                                            let userMessage;\r\n");
      out.write("\r\n");
      out.write("                                            if (attachment && attachment.type === 'image') {\r\n");
      out.write("                                                // Format OpenAI Vision API: multimodal content\r\n");
      out.write("                                                const contentParts = [];\r\n");
      out.write("                                                if (text) {\r\n");
      out.write("                                                    contentParts.push({ type: \"text\", text: text });\r\n");
      out.write("                                                } else {\r\n");
      out.write("                                                    contentParts.push({ type: \"text\", text: \"Hãy mô tả và phân tích ảnh này.\" });\r\n");
      out.write("                                                }\r\n");
      out.write("                                                contentParts.push({\r\n");
      out.write("                                                    type: \"image_url\",\r\n");
      out.write("                                                    image_url: { url: attachment.dataUrl }\r\n");
      out.write("                                                });\r\n");
      out.write("                                                userMessage = { role: \"user\", content: contentParts };\r\n");
      out.write("                                            } else if (attachment && attachment.type === 'file') {\r\n");
      out.write("                                                // Đính kèm nội dung file dưới dạng text\r\n");
      out.write("                                                const fileContext = `[File đính kèm: ");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${attachment.name}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("]\\n\\nNội dung file:\\n");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${attachment.textContent}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("`;\r\n");
      out.write("                                                const fullText = text ? `");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${text}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\\n\\n");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${fileContext}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("` : fileContext;\r\n");
      out.write("                                                userMessage = { role: \"user\", content: fullText };\r\n");
      out.write("                                            } else {\r\n");
      out.write("                                                userMessage = { role: \"user\", content: text };\r\n");
      out.write("                                            }\r\n");
      out.write("\r\n");
      out.write("                                            chatHistory.push(userMessage);\r\n");
      out.write("\r\n");
      out.write("                                            const reply = await fetchFromAI();\r\n");
      out.write("\r\n");
      out.write("                                            removeTypingIndicator();\r\n");
      out.write("\r\n");
      out.write("                                            // Trường hợp network error, không lưu lịch sử tin nhắn fail\r\n");
      out.write("                                            if (reply.startsWith(\"Xin lỗi, hệ thống AI\")) {\r\n");
      out.write("                                                addMessage(reply, \"bot\");\r\n");
      out.write("                                                chatHistory.pop(); // Revert user message\r\n");
      out.write("                                                return;\r\n");
      out.write("                                            }\r\n");
      out.write("\r\n");
      out.write("                                            addMessage(reply, \"bot\");\r\n");
      out.write("                                        }\r\n");
      out.write("\r\n");
      out.write("                                        chatSend.addEventListener(\"click\", handleSend);\r\n");
      out.write("                                        chatInput.addEventListener(\"keypress\", (e) => {\r\n");
      out.write("                                            if (e.key === \"Enter\") handleSend();\r\n");
      out.write("                                        });\r\n");
      out.write("                                    }\r\n");
      out.write("                                });\r\n");
      out.write("                            </script>\r\n");
      out.write("\r\n");
      out.write("                            <!-- Shopee VIP Promo Modal -->\r\n");
      out.write("                            <div id=\"vipPromoModal\" class=\"shopee-vip-modal\">\r\n");
      out.write("                                <div class=\"shopee-vip-modal-content\">\r\n");
      out.write("                                    <span class=\"shopee-vip-close-btn\">&times;</span>\r\n");
      out.write("                                    <a href=\"#\">\r\n");
      out.write("                                        <!-- Thay src bằng ảnh thật của Modal -->\r\n");
      out.write("                                        <img src=\"images/shopee_vip_modal.png\" alt=\"Shopee VIP Promotion\"\r\n");
      out.write("                                            onerror=\"this.src='https://cf.shopee.vn/file/vn-50009109-8a387d78a7ad954ec489d3ef9abd60b4_xhdpi'\"\r\n");
      out.write("                                            style=\"width: 100%; height: auto; border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);\">\r\n");
      out.write("                                    </a>\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </div>\r\n");
      out.write("\r\n");
      out.write("                            <script>\r\n");
      out.write("                                document.addEventListener(\"DOMContentLoaded\", function () {\r\n");
      out.write("                                    // Kiểm tra xem người dùng đã thấy modal chưa trong session này\r\n");
      out.write("                                    if (!sessionStorage.getItem('shopeeVipPromoShown')) {\r\n");
      out.write("                                        const modal = document.getElementById('vipPromoModal');\r\n");
      out.write("                                        const closeBtn = document.querySelector('.shopee-vip-close-btn');\r\n");
      out.write("\r\n");
      out.write("                                        // Hiển thị modal sau một khoảng trễ nhỏ (vd 1 giây)\r\n");
      out.write("                                        setTimeout(() => {\r\n");
      out.write("                                            modal.classList.add('show');\r\n");
      out.write("                                        }, 1000);\r\n");
      out.write("\r\n");
      out.write("                                        // Đóng modal \r\n");
      out.write("                                        const closeModal = () => {\r\n");
      out.write("                                            modal.classList.remove('show');\r\n");
      out.write("                                            // Đánh dấu là đã hiển thị trong session này\r\n");
      out.write("                                            sessionStorage.setItem('shopeeVipPromoShown', 'true');\r\n");
      out.write("                                        };\r\n");
      out.write("\r\n");
      out.write("                                        closeBtn.addEventListener('click', closeModal);\r\n");
      out.write("\r\n");
      out.write("                                        // Đóng modal khi click ra ngoài hình ảnh\r\n");
      out.write("                                        modal.addEventListener('click', function (e) {\r\n");
      out.write("                                            if (e.target === modal) {\r\n");
      out.write("                                                closeModal();\r\n");
      out.write("                                            }\r\n");
      out.write("                                        });\r\n");
      out.write("                                    }\r\n");
      out.write("                                });\r\n");
      out.write("                            </script>\r\n");
      out.write("\r\n");
      out.write("                        </body>\r\n");
      out.write("\r\n");
      out.write("                        </html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof jakarta.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }

  private boolean _jspx_meth_c_005fforEach_005f0(jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:forEach
    org.apache.taglibs.standard.tag.rt.core.ForEachTag _jspx_th_c_005fforEach_005f0 = (org.apache.taglibs.standard.tag.rt.core.ForEachTag) _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems.get(org.apache.taglibs.standard.tag.rt.core.ForEachTag.class);
    boolean _jspx_th_c_005fforEach_005f0_reused = false;
    try {
      _jspx_th_c_005fforEach_005f0.setPageContext(_jspx_page_context);
      _jspx_th_c_005fforEach_005f0.setParent(null);
      // /shopee_home.jsp(728,48) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f0.setVar("category");
      // /shopee_home.jsp(728,48) name = items type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f0.setItems(new org.apache.jasper.el.JspValueExpression("/shopee_home.jsp(728,48) '${categories}'",_jsp_getExpressionFactory().createValueExpression(_jspx_page_context.getELContext(),"${categories}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int[] _jspx_push_body_count_c_005fforEach_005f0 = new int[] { 0 };
      try {
        int _jspx_eval_c_005fforEach_005f0 = _jspx_th_c_005fforEach_005f0.doStartTag();
        if (_jspx_eval_c_005fforEach_005f0 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
          do {
            out.write("\r\n");
            out.write("                                                    <a href=\"#\"\r\n");
            out.write("                                                        style=\"display: flex; flex-direction: column; align-items: center; justify-content: flex-start; padding: 20px 10px; border-right: 1px solid rgba(0,0,0,.05); border-bottom: 1px solid rgba(0,0,0,.05); text-decoration: none; color: rgba(0,0,0,.8); transition: transform 0.1s;\">\r\n");
            out.write("                                                        <img src=\"");
            out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${category.imageUrl}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
            out.write("\"\r\n");
            out.write("                                                            style=\"width: 80px; height: 80px; object-fit: contain; margin-bottom: 10px;\"\r\n");
            out.write("                                                            alt=\"\">\r\n");
            out.write("                                                        <span\r\n");
            out.write("                                                            style=\"font-size: 14px; text-align: center;\">");
            out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${category.name}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
            out.write("</span>\r\n");
            out.write("                                                    </a>\r\n");
            out.write("                                                ");
            int evalDoAfterBody = _jspx_th_c_005fforEach_005f0.doAfterBody();
            if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
              break;
          } while (true);
        }
        if (_jspx_th_c_005fforEach_005f0.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
          return true;
        }
      } catch (java.lang.Throwable _jspx_exception) {
        while (_jspx_push_body_count_c_005fforEach_005f0[0]-- > 0)
          out = _jspx_page_context.popBody();
        _jspx_th_c_005fforEach_005f0.doCatch(_jspx_exception);
      } finally {
        _jspx_th_c_005fforEach_005f0.doFinally();
      }
      _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems.reuse(_jspx_th_c_005fforEach_005f0);
      _jspx_th_c_005fforEach_005f0_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fforEach_005f0, _jsp_getInstanceManager(), _jspx_th_c_005fforEach_005f0_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fforEach_005f1(jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:forEach
    org.apache.taglibs.standard.tag.rt.core.ForEachTag _jspx_th_c_005fforEach_005f1 = (org.apache.taglibs.standard.tag.rt.core.ForEachTag) _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems_005fend_005fbegin.get(org.apache.taglibs.standard.tag.rt.core.ForEachTag.class);
    boolean _jspx_th_c_005fforEach_005f1_reused = false;
    try {
      _jspx_th_c_005fforEach_005f1.setPageContext(_jspx_page_context);
      _jspx_th_c_005fforEach_005f1.setParent(null);
      // /shopee_home.jsp(766,48) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f1.setVar("p");
      // /shopee_home.jsp(766,48) name = items type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f1.setItems(new org.apache.jasper.el.JspValueExpression("/shopee_home.jsp(766,48) '${products}'",_jsp_getExpressionFactory().createValueExpression(_jspx_page_context.getELContext(),"${products}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      // /shopee_home.jsp(766,48) name = begin type = int reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f1.setBegin(0);
      // /shopee_home.jsp(766,48) name = end type = int reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f1.setEnd(5);
      int[] _jspx_push_body_count_c_005fforEach_005f1 = new int[] { 0 };
      try {
        int _jspx_eval_c_005fforEach_005f1 = _jspx_th_c_005fforEach_005f1.doStartTag();
        if (_jspx_eval_c_005fforEach_005f1 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
          do {
            out.write("\r\n");
            out.write("                                                    <a href=\"san-pham-i.686868.");
            out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${p.id}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
            out.write("\"\r\n");
            out.write("                                                        style=\"text-decoration: none; flex: 0 0 170px; display: flex; flex-direction: column; align-items: center;\">\r\n");
            out.write("                                                        <div style=\"width: 100%; position: relative;\">\r\n");
            out.write("                                                            <img src=\"");
            out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${p.imageUrl}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
            out.write("\"\r\n");
            out.write("                                                                style=\"width: 100%; height: 170px; object-fit: contain;\">\r\n");
            out.write("                                                            <div\r\n");
            out.write("                                                                style=\"position: absolute; top: 0; right: 0; background: rgba(255,212,36,.9); color: #ee4d2d; font-size: 12px; font-weight: bold; padding: 2px 4px;\">\r\n");
            out.write("                                                                -25%</div>\r\n");
            out.write("                                                        </div>\r\n");
            out.write("                                                        <div\r\n");
            out.write("                                                            style=\"color: #ee4d2d; font-size: 18px; margin-top: 15px; font-weight: 500;\">\r\n");
            out.write("                                                            ₫");
            out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${String.format(\"%,.0f\", p.minPrice)}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
            out.write("</div>\r\n");
            out.write("                                                        <div\r\n");
            out.write("                                                            style=\"position:relative; width:100%; height:16px; background:#ffbda6; border-radius:8px; margin-top:10px; overflow:hidden;\">\r\n");
            out.write("                                                            <div\r\n");
            out.write("                                                                style=\"position:absolute; top:0; left:0; height:100%; width: 85%; background:linear-gradient(to right, #ee4d2d, #ff3b3b); border-radius:8px;\">\r\n");
            out.write("                                                            </div>\r\n");
            out.write("                                                            <div\r\n");
            out.write("                                                                style=\"position:absolute; top:0; left:0; width:100%; height:100%; display:flex; align-items:center; justify-content:center; color:#fff; font-size:10px; text-transform:uppercase; z-index:2; text-shadow: 0 0 2px rgba(0,0,0,.3);\">\r\n");
            out.write("                                                                Đang bán chạy</div>\r\n");
            out.write("                                                        </div>\r\n");
            out.write("                                                    </a>\r\n");
            out.write("                                                ");
            int evalDoAfterBody = _jspx_th_c_005fforEach_005f1.doAfterBody();
            if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
              break;
          } while (true);
        }
        if (_jspx_th_c_005fforEach_005f1.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
          return true;
        }
      } catch (java.lang.Throwable _jspx_exception) {
        while (_jspx_push_body_count_c_005fforEach_005f1[0]-- > 0)
          out = _jspx_page_context.popBody();
        _jspx_th_c_005fforEach_005f1.doCatch(_jspx_exception);
      } finally {
        _jspx_th_c_005fforEach_005f1.doFinally();
      }
      _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems_005fend_005fbegin.reuse(_jspx_th_c_005fforEach_005f1);
      _jspx_th_c_005fforEach_005f1_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fforEach_005f1, _jsp_getInstanceManager(), _jspx_th_c_005fforEach_005f1_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fforEach_005f2(jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:forEach
    org.apache.taglibs.standard.tag.rt.core.ForEachTag _jspx_th_c_005fforEach_005f2 = (org.apache.taglibs.standard.tag.rt.core.ForEachTag) _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems_005fend_005fbegin.get(org.apache.taglibs.standard.tag.rt.core.ForEachTag.class);
    boolean _jspx_th_c_005fforEach_005f2_reused = false;
    try {
      _jspx_th_c_005fforEach_005f2.setPageContext(_jspx_page_context);
      _jspx_th_c_005fforEach_005f2.setParent(null);
      // /shopee_home.jsp(1012,48) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f2.setVar("p");
      // /shopee_home.jsp(1012,48) name = items type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f2.setItems(new org.apache.jasper.el.JspValueExpression("/shopee_home.jsp(1012,48) '${products}'",_jsp_getExpressionFactory().createValueExpression(_jspx_page_context.getELContext(),"${products}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      // /shopee_home.jsp(1012,48) name = begin type = int reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f2.setBegin(6);
      // /shopee_home.jsp(1012,48) name = end type = int reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f2.setEnd(11);
      int[] _jspx_push_body_count_c_005fforEach_005f2 = new int[] { 0 };
      try {
        int _jspx_eval_c_005fforEach_005f2 = _jspx_th_c_005fforEach_005f2.doStartTag();
        if (_jspx_eval_c_005fforEach_005f2 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
          do {
            out.write("\r\n");
            out.write("                                                    <a href=\"san-pham-i.686868.");
            out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${p.id}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
            out.write("\"\r\n");
            out.write("                                                        style=\"flex: 1; position: relative; text-decoration: none; color: inherit; display: block; min-width: 170px;\">\r\n");
            out.write("                                                        <div\r\n");
            out.write("                                                            style=\"position: absolute; top:0; left: 0; background: #ee4d2d; color: white; padding: 4px 8px; font-size: 12px; font-weight: bold; border-radius: 2px; z-index: 2;\">\r\n");
            out.write("                                                            TOP</div>\r\n");
            out.write("                                                        <img src=\"");
            out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${p.imageUrl}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
            out.write("\"\r\n");
            out.write("                                                            style=\"width: 100%; height: 170px; object-fit: contain; display: block;\"\r\n");
            out.write("                                                            alt=\"Sản Phẩm\">\r\n");
            out.write("                                                        <div\r\n");
            out.write("                                                            style=\"background: rgba(0,0,0,.26); color: white; text-align: center; padding: 5px; font-size: 13px;\">\r\n");
            out.write("                                                            Bán ");
            out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${(p.id * 10) + 5}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
            out.write("k+ / tháng</div>\r\n");
            out.write("                                                        <div\r\n");
            out.write("                                                            style=\"text-align: center; font-size: 16px; color: #555; margin-top: 15px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">\r\n");
            out.write("                                                            ");
            out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${p.name}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
            out.write("</div>\r\n");
            out.write("                                                    </a>\r\n");
            out.write("                                                ");
            int evalDoAfterBody = _jspx_th_c_005fforEach_005f2.doAfterBody();
            if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
              break;
          } while (true);
        }
        if (_jspx_th_c_005fforEach_005f2.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
          return true;
        }
      } catch (java.lang.Throwable _jspx_exception) {
        while (_jspx_push_body_count_c_005fforEach_005f2[0]-- > 0)
          out = _jspx_page_context.popBody();
        _jspx_th_c_005fforEach_005f2.doCatch(_jspx_exception);
      } finally {
        _jspx_th_c_005fforEach_005f2.doFinally();
      }
      _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems_005fend_005fbegin.reuse(_jspx_th_c_005fforEach_005f2);
      _jspx_th_c_005fforEach_005f2_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fforEach_005f2, _jsp_getInstanceManager(), _jspx_th_c_005fforEach_005f2_reused);
    }
    return false;
  }
}
