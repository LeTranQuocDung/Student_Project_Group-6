/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/10.1.19
 * Generated at: 2026-03-01 13:27:20 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp;

import jakarta.servlet.*;
import jakarta.servlet.http.*;
import jakarta.servlet.jsp.*;
import java.util.List;
import model.Product;

public final class product_005fdetail_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports,
                 org.apache.jasper.runtime.JspSourceDirectives {

  private static final jakarta.servlet.jsp.JspFactory _jspxFactory =
          jakarta.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  static {
    _jspx_dependants = new java.util.HashMap<java.lang.String,java.lang.Long>(3);
    _jspx_dependants.put("jar:file:/D:/shopee%20(1)/src/core_app/tomcat_dir/apache-tomcat-10.1.19/webapps/ROOT/WEB-INF/lib/jakarta.servlet.jsp.jstl-3.0.1.jar!/META-INF/fmt.tld", Long.valueOf(1664428278000L));
    _jspx_dependants.put("/WEB-INF/lib/jakarta.servlet.jsp.jstl-3.0.1.jar", Long.valueOf(1772342996000L));
    _jspx_dependants.put("jar:file:/D:/shopee%20(1)/src/core_app/tomcat_dir/apache-tomcat-10.1.19/webapps/ROOT/WEB-INF/lib/jakarta.servlet.jsp.jstl-3.0.1.jar!/META-INF/c.tld", Long.valueOf(1664428278000L));
  }

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.LinkedHashSet<>(3);
    _jspx_imports_packages.add("jakarta.servlet");
    _jspx_imports_packages.add("jakarta.servlet.http");
    _jspx_imports_packages.add("jakarta.servlet.jsp");
    _jspx_imports_classes = new java.util.LinkedHashSet<>(2);
    _jspx_imports_classes.add("model.Product");
    _jspx_imports_classes.add("java.util.List");
  }

  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fif_0026_005ftest;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fchoose;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005ffmt_005fformatNumber_0026_005fvalue_005fmaxFractionDigits_005fnobody;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fotherwise;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fend_005fbegin;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005ffmt_005fformatDate_0026_005fvalue_005fpattern_005fnobody;

  private volatile jakarta.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public boolean getErrorOnELNotFound() {
    return false;
  }

  public jakarta.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
    _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005fc_005fif_0026_005ftest = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005fc_005fchoose = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005ffmt_005fformatNumber_0026_005fvalue_005fmaxFractionDigits_005fnobody = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005fc_005fotherwise = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fend_005fbegin = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005ffmt_005fformatDate_0026_005fvalue_005fpattern_005fnobody = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
  }

  public void _jspDestroy() {
    _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.release();
    _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems.release();
    _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.release();
    _005fjspx_005ftagPool_005fc_005fchoose.release();
    _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.release();
    _005fjspx_005ftagPool_005ffmt_005fformatNumber_0026_005fvalue_005fmaxFractionDigits_005fnobody.release();
    _005fjspx_005ftagPool_005fc_005fotherwise.release();
    _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fend_005fbegin.release();
    _005fjspx_005ftagPool_005ffmt_005fformatDate_0026_005fvalue_005fpattern_005fnobody.release();
  }

  public void _jspService(final jakarta.servlet.http.HttpServletRequest request, final jakarta.servlet.http.HttpServletResponse response)
      throws java.io.IOException, jakarta.servlet.ServletException {

    if (!jakarta.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      final java.lang.String _jspx_method = request.getMethod();
      if ("OPTIONS".equals(_jspx_method)) {
        response.setHeader("Allow","GET, HEAD, POST, OPTIONS");
        return;
      }
      if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method)) {
        response.setHeader("Allow","GET, HEAD, POST, OPTIONS");
        response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSPs only permit GET, POST or HEAD. Jasper also permits OPTIONS");
        return;
      }
    }

    final jakarta.servlet.jsp.PageContext pageContext;
    jakarta.servlet.http.HttpSession session = null;
    final jakarta.servlet.ServletContext application;
    final jakarta.servlet.ServletConfig config;
    jakarta.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    jakarta.servlet.jsp.JspWriter _jspx_out = null;
    jakarta.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("    \r\n");
      out.write("        \r\n");
      out.write("            \r\n");
      out.write("                \r\n");
      out.write("                    <!DOCTYPE html>\r\n");
      out.write("                    <html lang=\"vi\">\r\n");
      out.write("\r\n");
      out.write("                    <head>\r\n");
      out.write("                        <meta charset=\"UTF-8\">\r\n");
      out.write("                        <title>Chi tiết sản phẩm | Shopee Việt Nam</title>\r\n");
      out.write("                        <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\"\r\n");
      out.write("                            rel=\"stylesheet\">\r\n");
      out.write("                        <link rel=\"stylesheet\"\r\n");
      out.write("                            href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\">\r\n");
      out.write("                        <link href=\"css/home.css\" rel=\"stylesheet\">\r\n");
      out.write("\r\n");
      out.write("                        <style>\r\n");
      out.write("                            /* CSS RIÊNG CHO TRANG CHI TIẾT (CHUẨN SHOPEE) */\r\n");
      out.write("                            body {\r\n");
      out.write("                                background-color: #f5f5f5;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            /* Breadcrumb (Đường dẫn) */\r\n");
      out.write("                            .shopee-breadcrumb {\r\n");
      out.write("                                font-size: 13px;\r\n");
      out.write("                                color: #0055aa;\r\n");
      out.write("                                margin: 20px 0;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .shopee-breadcrumb a {\r\n");
      out.write("                                text-decoration: none;\r\n");
      out.write("                                color: inherit;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .shopee-breadcrumb span {\r\n");
      out.write("                                color: #555;\r\n");
      out.write("                                margin: 0 5px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .shopee-breadcrumb .current {\r\n");
      out.write("                                color: #333;\r\n");
      out.write("                                overflow: hidden;\r\n");
      out.write("                                text-overflow: ellipsis;\r\n");
      out.write("                                white-space: nowrap;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            /* Khung chính */\r\n");
      out.write("                            .product-wrapper {\r\n");
      out.write("                                background: #fff;\r\n");
      out.write("                                padding: 20px;\r\n");
      out.write("                                border-radius: 3px;\r\n");
      out.write("                                box-shadow: 0 1px 1px 0 rgba(0, 0, 0, .05);\r\n");
      out.write("                                display: flex;\r\n");
      out.write("                                gap: 30px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            /* CỘT TRÁI: ẢNH */\r\n");
      out.write("                            .col-left {\r\n");
      out.write("                                width: 450px;\r\n");
      out.write("                                flex-shrink: 0;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .main-image-frame {\r\n");
      out.write("                                width: 100%;\r\n");
      out.write("                                position: relative;\r\n");
      out.write("                                cursor: pointer;\r\n");
      out.write("                                margin-bottom: 10px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .main-image {\r\n");
      out.write("                                width: 100%;\r\n");
      out.write("                                aspect-ratio: 1/1;\r\n");
      out.write("                                object-fit: contain;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .gallery-list {\r\n");
      out.write("                                display: flex;\r\n");
      out.write("                                gap: 10px;\r\n");
      out.write("                                overflow-x: auto;\r\n");
      out.write("                                padding-bottom: 5px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .gallery-item {\r\n");
      out.write("                                width: 82px;\r\n");
      out.write("                                height: 82px;\r\n");
      out.write("                                cursor: pointer;\r\n");
      out.write("                                border: 2px solid transparent;\r\n");
      out.write("                                opacity: 0.8;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .gallery-item:hover,\r\n");
      out.write("                            .gallery-item.active {\r\n");
      out.write("                                border-color: #ee4d2d;\r\n");
      out.write("                                opacity: 1;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .gallery-item img {\r\n");
      out.write("                                width: 100%;\r\n");
      out.write("                                height: 100%;\r\n");
      out.write("                                object-fit: cover;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            /* Share & Like */\r\n");
      out.write("                            .share-like {\r\n");
      out.write("                                display: flex;\r\n");
      out.write("                                justify-content: center;\r\n");
      out.write("                                align-items: center;\r\n");
      out.write("                                gap: 30px;\r\n");
      out.write("                                margin-top: 15px;\r\n");
      out.write("                                font-size: 16px;\r\n");
      out.write("                                color: #222;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .share-like i {\r\n");
      out.write("                                font-size: 20px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .like-heart {\r\n");
      out.write("                                color: #ff424f;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            /* CỘT PHẢI: THÔNG TIN */\r\n");
      out.write("                            .col-right {\r\n");
      out.write("                                flex-grow: 1;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .product-title {\r\n");
      out.write("                                font-size: 20px;\r\n");
      out.write("                                font-weight: 500;\r\n");
      out.write("                                line-height: 1.2;\r\n");
      out.write("                                color: #222;\r\n");
      out.write("                                margin-bottom: 10px;\r\n");
      out.write("                                overflow-wrap: break-word;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            /* Rating & Sold */\r\n");
      out.write("                            .rating-sold-row {\r\n");
      out.write("                                display: flex;\r\n");
      out.write("                                align-items: center;\r\n");
      out.write("                                font-size: 14px;\r\n");
      out.write("                                color: #222;\r\n");
      out.write("                                margin-bottom: 15px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .rating-star {\r\n");
      out.write("                                color: #ee4d2d;\r\n");
      out.write("                                margin-right: 5px;\r\n");
      out.write("                                border-bottom: 1px solid #ee4d2d;\r\n");
      out.write("                                padding-bottom: 1px;\r\n");
      out.write("                                font-size: 16px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .rating-text {\r\n");
      out.write("                                color: #ee4d2d;\r\n");
      out.write("                                margin-right: 5px;\r\n");
      out.write("                                border-bottom: 1px solid #ee4d2d;\r\n");
      out.write("                                padding-bottom: 1px;\r\n");
      out.write("                                font-size: 16px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .separator {\r\n");
      out.write("                                margin: 0 15px;\r\n");
      out.write("                                color: #dbdbdb;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .sold-num {\r\n");
      out.write("                                font-size: 16px;\r\n");
      out.write("                                color: #222;\r\n");
      out.write("                                margin-right: 5px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .sold-text {\r\n");
      out.write("                                color: #767676;\r\n");
      out.write("                                font-size: 14px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .price-section {\r\n");
      out.write("                                background: #fafafa;\r\n");
      out.write("                                display: flex;\r\n");
      out.write("                                flex-direction: column;\r\n");
      out.write("                                margin-bottom: 20px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .flash-sale-banner {\r\n");
      out.write("                                background: url('https://deo.shopeemobile.com/shopee/shopee-pcmall-live-sg/productdetailspage/0150d1ad3cd5e197cb3f.png') 0 100% no-repeat, url('https://deo.shopeemobile.com/shopee/shopee-pcmall-live-sg/productdetailspage/7504e7c7a31b402ba687.png') repeat-x;\r\n");
      out.write("                                background-size: auto 100%, auto 100%;\r\n");
      out.write("                                height: 36px;\r\n");
      out.write("                                display: flex;\r\n");
      out.write("                                justify-content: space-between;\r\n");
      out.write("                                align-items: center;\r\n");
      out.write("                                padding: 0 15px;\r\n");
      out.write("                                color: white;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .flash-sale-banner .label {\r\n");
      out.write("                                font-weight: bold;\r\n");
      out.write("                                font-style: italic;\r\n");
      out.write("                                font-size: 18px;\r\n");
      out.write("                                display: flex;\r\n");
      out.write("                                align-items: center;\r\n");
      out.write("                                gap: 5px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .flash-sale-banner .timer {\r\n");
      out.write("                                display: flex;\r\n");
      out.write("                                align-items: center;\r\n");
      out.write("                                font-size: 14px;\r\n");
      out.write("                                gap: 5px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .timer-box {\r\n");
      out.write("                                background: #000;\r\n");
      out.write("                                color: #fff;\r\n");
      out.write("                                padding: 1px 4px;\r\n");
      out.write("                                border-radius: 2px;\r\n");
      out.write("                                font-family: monospace;\r\n");
      out.write("                                font-size: 14px;\r\n");
      out.write("                                font-weight: bold;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .price-content {\r\n");
      out.write("                                padding: 15px 20px;\r\n");
      out.write("                                display: flex;\r\n");
      out.write("                                align-items: center;\r\n");
      out.write("                                gap: 15px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .old-price {\r\n");
      out.write("                                text-decoration: line-through;\r\n");
      out.write("                                color: #929292;\r\n");
      out.write("                                font-size: 16px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .current-price {\r\n");
      out.write("                                color: #ee4d2d;\r\n");
      out.write("                                font-size: 32px;\r\n");
      out.write("                                font-weight: 500;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .discount-tag {\r\n");
      out.write("                                font-size: 12px;\r\n");
      out.write("                                color: #fff;\r\n");
      out.write("                                background: #ee4d2d;\r\n");
      out.write("                                padding: 2px 4px;\r\n");
      out.write("                                border-radius: 2px;\r\n");
      out.write("                                font-weight: bold;\r\n");
      out.write("                                text-transform: uppercase;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .voucher-row {\r\n");
      out.write("                                display: flex;\r\n");
      out.write("                                align-items: flex-start;\r\n");
      out.write("                                margin-bottom: 20px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .voucher-label {\r\n");
      out.write("                                width: 110px;\r\n");
      out.write("                                color: #757575;\r\n");
      out.write("                                font-size: 14px;\r\n");
      out.write("                                flex-shrink: 0;\r\n");
      out.write("                                margin-top: 3px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .voucher-tags {\r\n");
      out.write("                                display: flex;\r\n");
      out.write("                                gap: 8px;\r\n");
      out.write("                                flex-wrap: wrap;\r\n");
      out.write("                                flex: 1;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .voucher-tag {\r\n");
      out.write("                                background: rgba(255, 87, 34, 0.1);\r\n");
      out.write("                                color: #ee4d2d;\r\n");
      out.write("                                border: 1px solid rgba(255, 87, 34, 0.2);\r\n");
      out.write("                                padding: 2px 8px;\r\n");
      out.write("                                border-radius: 2px;\r\n");
      out.write("                                font-size: 12px;\r\n");
      out.write("                                display: flex;\r\n");
      out.write("                                align-items: center;\r\n");
      out.write("                                cursor: pointer;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .voucher-tag::before {\r\n");
      out.write("                                content: '';\r\n");
      out.write("                                position: absolute;\r\n");
      out.write("                                left: -3px;\r\n");
      out.write("                                top: 50%;\r\n");
      out.write("                                transform: translateY(-50%);\r\n");
      out.write("                                width: 5px;\r\n");
      out.write("                                height: 5px;\r\n");
      out.write("                                background: #fff;\r\n");
      out.write("                                border-radius: 50%;\r\n");
      out.write("                                border-right: 1px solid rgba(255, 87, 34, 0.2);\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            /* Options (Màu/Size) */\r\n");
      out.write("                            .option-row {\r\n");
      out.write("                                display: flex;\r\n");
      out.write("                                align-items: flex-start;\r\n");
      out.write("                                margin-bottom: 25px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .option-label {\r\n");
      out.write("                                width: 110px;\r\n");
      out.write("                                color: #757575;\r\n");
      out.write("                                font-size: 14px;\r\n");
      out.write("                                margin-top: 8px;\r\n");
      out.write("                                flex-shrink: 0;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .option-items {\r\n");
      out.write("                                display: flex;\r\n");
      out.write("                                flex-wrap: wrap;\r\n");
      out.write("                                gap: 10px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .option-btn {\r\n");
      out.write("                                background: #fff;\r\n");
      out.write("                                border: 1px solid rgba(0, 0, 0, .09);\r\n");
      out.write("                                padding: 8px 30px;\r\n");
      out.write("                                cursor: pointer;\r\n");
      out.write("                                min-width: 80px;\r\n");
      out.write("                                color: rgba(0, 0, 0, .8);\r\n");
      out.write("                                font-size: 14px;\r\n");
      out.write("                                position: relative;\r\n");
      out.write("                                overflow: hidden;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .option-btn:hover {\r\n");
      out.write("                                border-color: #ee4d2d;\r\n");
      out.write("                                color: #ee4d2d;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .option-btn.selected {\r\n");
      out.write("                                border-color: #ee4d2d;\r\n");
      out.write("                                color: #ee4d2d;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            /* Tick V góc dưới */\r\n");
      out.write("                            .option-btn.selected::after {\r\n");
      out.write("                                content: '';\r\n");
      out.write("                                width: 15px;\r\n");
      out.write("                                height: 15px;\r\n");
      out.write("                                background: #ee4d2d;\r\n");
      out.write("                                position: absolute;\r\n");
      out.write("                                bottom: 0;\r\n");
      out.write("                                right: 0;\r\n");
      out.write("                                clip-path: polygon(100% 0, 100% 100%, 0 100%);\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .option-btn.selected::before {\r\n");
      out.write("                                content: '✔';\r\n");
      out.write("                                color: #fff;\r\n");
      out.write("                                font-size: 8px;\r\n");
      out.write("                                position: absolute;\r\n");
      out.write("                                bottom: 0;\r\n");
      out.write("                                right: 0;\r\n");
      out.write("                                z-index: 2;\r\n");
      out.write("                                font-weight: bold;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            /* Số lượng */\r\n");
      out.write("                            .qty-input-group {\r\n");
      out.write("                                display: flex;\r\n");
      out.write("                                align-items: center;\r\n");
      out.write("                                border: 1px solid rgba(0, 0, 0, .09);\r\n");
      out.write("                                width: fit-content;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .qty-btn {\r\n");
      out.write("                                width: 32px;\r\n");
      out.write("                                height: 32px;\r\n");
      out.write("                                background: #fff;\r\n");
      out.write("                                border: none;\r\n");
      out.write("                                cursor: pointer;\r\n");
      out.write("                                font-size: 16px;\r\n");
      out.write("                                color: #757575;\r\n");
      out.write("                                border-right: 1px solid rgba(0, 0, 0, .09);\r\n");
      out.write("                                display: flex;\r\n");
      out.write("                                align-items: center;\r\n");
      out.write("                                justify-content: center;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .qty-btn:last-child {\r\n");
      out.write("                                border-right: none;\r\n");
      out.write("                                border-left: 1px solid rgba(0, 0, 0, .09);\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .qty-value {\r\n");
      out.write("                                width: 50px;\r\n");
      out.write("                                height: 32px;\r\n");
      out.write("                                text-align: center;\r\n");
      out.write("                                border: none;\r\n");
      out.write("                                outline: none;\r\n");
      out.write("                                font-size: 16px;\r\n");
      out.write("                                color: #222;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            /* Nút Mua */\r\n");
      out.write("                            .action-group {\r\n");
      out.write("                                display: flex;\r\n");
      out.write("                                gap: 15px;\r\n");
      out.write("                                margin-top: 30px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .btn-add-cart {\r\n");
      out.write("                                background: rgba(255, 87, 34, .1);\r\n");
      out.write("                                border: 1px solid #ee4d2d;\r\n");
      out.write("                                color: #ee4d2d;\r\n");
      out.write("                                height: 48px;\r\n");
      out.write("                                padding: 0 20px;\r\n");
      out.write("                                font-size: 16px;\r\n");
      out.write("                                display: flex;\r\n");
      out.write("                                align-items: center;\r\n");
      out.write("                                gap: 10px;\r\n");
      out.write("                                border-radius: 2px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .btn-add-cart:hover {\r\n");
      out.write("                                background: rgba(255, 87, 34, .15);\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .btn-buy-now {\r\n");
      out.write("                                background: #ee4d2d;\r\n");
      out.write("                                color: #fff;\r\n");
      out.write("                                border: none;\r\n");
      out.write("                                height: 48px;\r\n");
      out.write("                                padding: 0 60px;\r\n");
      out.write("                                font-size: 16px;\r\n");
      out.write("                                border-radius: 2px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .btn-buy-now:hover {\r\n");
      out.write("                                background: #f05d40;\r\n");
      out.write("                                opacity: 0.95;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            /* Shop Info & Mô tả */\r\n");
      out.write("                            .section-box {\r\n");
      out.write("                                background: #fff;\r\n");
      out.write("                                padding: 25px;\r\n");
      out.write("                                margin-top: 15px;\r\n");
      out.write("                                border-radius: 3px;\r\n");
      out.write("                                box-shadow: 0 1px 1px 0 rgba(0, 0, 0, .05);\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .section-header {\r\n");
      out.write("                                background: #f5f5f5;\r\n");
      out.write("                                padding: 14px;\r\n");
      out.write("                                color: rgba(0, 0, 0, .87);\r\n");
      out.write("                                font-size: 18px;\r\n");
      out.write("                                text-transform: uppercase;\r\n");
      out.write("                                margin-bottom: 20px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .product-desc-content {\r\n");
      out.write("                                font-size: 14px;\r\n");
      out.write("                                line-height: 1.7;\r\n");
      out.write("                                color: rgba(0, 0, 0, .8);\r\n");
      out.write("                                white-space: pre-wrap;\r\n");
      out.write("                                overflow: hidden;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            /* Toast Notification */\r\n");
      out.write("                            .shopee-toast {\r\n");
      out.write("                                position: fixed;\r\n");
      out.write("                                top: 50%;\r\n");
      out.write("                                left: 50%;\r\n");
      out.write("                                transform: translate(-50%, -50%) scale(0.8);\r\n");
      out.write("                                background: rgba(0, 0, 0, 0.75);\r\n");
      out.write("                                color: #fff;\r\n");
      out.write("                                padding: 25px 50px;\r\n");
      out.write("                                border-radius: 4px;\r\n");
      out.write("                                z-index: 99999;\r\n");
      out.write("                                text-align: center;\r\n");
      out.write("                                opacity: 0;\r\n");
      out.write("                                transition: opacity 0.3s, transform 0.3s;\r\n");
      out.write("                                pointer-events: none;\r\n");
      out.write("                                min-width: 200px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .shopee-toast.show {\r\n");
      out.write("                                opacity: 1;\r\n");
      out.write("                                transform: translate(-50%, -50%) scale(1);\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .shopee-toast .toast-icon {\r\n");
      out.write("                                font-size: 40px;\r\n");
      out.write("                                color: #00bfa5;\r\n");
      out.write("                                margin-bottom: 10px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .shopee-toast .toast-msg {\r\n");
      out.write("                                font-size: 16px;\r\n");
      out.write("                                white-space: nowrap;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            /* Wholesale Row */\r\n");
      out.write("                            .wholesale-row {\r\n");
      out.write("                                display: flex;\r\n");
      out.write("                                align-items: flex-start;\r\n");
      out.write("                                margin-bottom: 20px;\r\n");
      out.write("                                padding: 12px 0;\r\n");
      out.write("                                border-bottom: 1px solid rgba(0, 0, 0, .05);\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .wholesale-label {\r\n");
      out.write("                                width: 110px;\r\n");
      out.write("                                color: #757575;\r\n");
      out.write("                                font-size: 14px;\r\n");
      out.write("                                flex-shrink: 0;\r\n");
      out.write("                                margin-top: 3px;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .wholesale-content {\r\n");
      out.write("                                flex: 1;\r\n");
      out.write("                                font-size: 14px;\r\n");
      out.write("                                color: rgba(0, 0, 0, .87);\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .wholesale-link {\r\n");
      out.write("                                color: #ee4d2d;\r\n");
      out.write("                                cursor: pointer;\r\n");
      out.write("                                font-size: 14px;\r\n");
      out.write("                                margin-left: 10px;\r\n");
      out.write("                                text-decoration: none;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            .wholesale-link:hover {\r\n");
      out.write("                                text-decoration: underline;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            /* Like animation */\r\n");
      out.write("                            .like-heart.liked {\r\n");
      out.write("                                animation: heartPop 0.3s ease;\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            @keyframes heartPop {\r\n");
      out.write("                                0% {\r\n");
      out.write("                                    transform: scale(1);\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                50% {\r\n");
      out.write("                                    transform: scale(1.3);\r\n");
      out.write("                                }\r\n");
      out.write("\r\n");
      out.write("                                100% {\r\n");
      out.write("                                    transform: scale(1);\r\n");
      out.write("                                }\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            /* Qty button disabled */\r\n");
      out.write("                            .qty-btn:disabled {\r\n");
      out.write("                                opacity: 0.4;\r\n");
      out.write("                                cursor: not-allowed;\r\n");
      out.write("                            }\r\n");
      out.write("                        </style>\r\n");
      out.write("                    </head>\r\n");
      out.write("\r\n");
      out.write("                    <body>\r\n");
      out.write("\r\n");
      out.write("                        <div style=\"background: linear-gradient(-180deg,#f53d2d,#f63); padding: 15px 0;\">\r\n");
      out.write("                            <div class=\"container d-flex align-items-center gap-3\">\r\n");
      out.write("                                <a href=\"home\" class=\"text-white text-decoration-none fs-4 fw-bold\">\r\n");
      out.write("                                    <i class=\"fas fa-shopping-bag\"></i> Shopee\r\n");
      out.write("                                </a>\r\n");
      out.write("                                <div style=\"width: 1px; height: 20px; background: #fff; opacity: 0.5;\"></div>\r\n");
      out.write("                                <span class=\"text-white fs-5\">Chi tiết sản phẩm</span>\r\n");
      out.write("\r\n");
      out.write("                                <div class=\"ms-auto d-flex align-items-center gap-4\">\r\n");
      out.write("                                    <a href=\"cart\" class=\"text-white text-decoration-none\" style=\"position: relative;\">\r\n");
      out.write("                                        <i class=\"fas fa-shopping-cart fs-5\"></i>\r\n");
      out.write("                                        <span\r\n");
      out.write("                                            class=\"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-white text-danger border border-danger\"\r\n");
      out.write("                                            style=\"font-size: 0.6rem;\">\r\n");
      out.write("                                            ");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${sessionScope.cart != null ? sessionScope.cart.totalQuantity : 0}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\r\n");
      out.write("                                        </span>\r\n");
      out.write("                                    </a>\r\n");
      out.write("                                    <a href=\"home\" class=\"text-white text-decoration-none small\">\r\n");
      out.write("                                        <i class=\"fas fa-home\"></i> Trở về trang chủ\r\n");
      out.write("                                    </a>\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("\r\n");
      out.write("                        ");
 Product p=(Product) request.getAttribute("detail"); List<String> listImg = (List<String>)
                                request.getAttribute("listImg");

                                if (p != null) {
                                java.math.BigDecimal oldPrice = p.getPrice().multiply(new java.math.BigDecimal("1.35"));
                                
      out.write("\r\n");
      out.write("\r\n");
      out.write("                                <div class=\"container\">\r\n");
      out.write("                                    <div class=\"shopee-breadcrumb\">\r\n");
      out.write("                                        <a href=\"home\">Shopee</a> <span>&gt;</span>\r\n");
      out.write("                                        <a href=\"#\">Thiết Bị Điện Tử</a> <span>&gt;</span>\r\n");
      out.write("                                        <span class=\"current\">\r\n");
      out.write("                                            ");
      out.print( p.getName());
      out.write("\r\n");
      out.write("                                        </span>\r\n");
      out.write("                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                    <div class=\"product-wrapper\">\r\n");
      out.write("                                        <div class=\"col-left\">\r\n");
      out.write("                                            <div class=\"main-image-frame\">\r\n");
      out.write("                                                <img id=\"mainImg\" src=\"");
      out.print( p.getImageUrl());
      out.write("\" class=\"main-image\"\r\n");
      out.write("                                                    alt=\"Product Image\">\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                            <div class=\"gallery-list\">\r\n");
      out.write("                                                <div class=\"gallery-item active\" onmouseover=\"changeImg(this)\">\r\n");
      out.write("                                                    <img src=\"");
      out.print( p.getImageUrl());
      out.write("\">\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                ");
 if (listImg !=null) { for (String img : listImg) {
      out.write("\r\n");
      out.write("                                                    <div class=\"gallery-item\" onmouseover=\"changeImg(this)\">\r\n");
      out.write("                                                        <img src=\"");
      out.print( img);
      out.write("\">\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                    ");
 } }
      out.write("\r\n");
      out.write("                                            </div>\r\n");
      out.write("\r\n");
      out.write("                                            <div class=\"share-like\">\r\n");
      out.write("                                                <div>Chia sẻ: <i class=\"fab fa-facebook-messenger\"\r\n");
      out.write("                                                        style=\"color:#0384ff; cursor:pointer;\"></i> <i\r\n");
      out.write("                                                        class=\"fab fa-facebook\"\r\n");
      out.write("                                                        style=\"color:#3b5999; cursor:pointer;\"></i> <i\r\n");
      out.write("                                                        class=\"fab fa-pinterest\"\r\n");
      out.write("                                                        style=\"color:#de0217; cursor:pointer;\"></i> <i\r\n");
      out.write("                                                        class=\"fab fa-twitter\"\r\n");
      out.write("                                                        style=\"color:#10c2ff; cursor:pointer;\"></i></div>\r\n");
      out.write("                                                <div style=\"width: 1px; height: 20px; background: #dbdbdb;\"></div>\r\n");
      out.write("                                                <div id=\"likeBtn\" style=\"cursor:pointer;\" onclick=\"toggleLike()\">\r\n");
      out.write("                                                    <i id=\"likeIcon\" class=\"far fa-heart like-heart\"></i>\r\n");
      out.write("                                                    <span id=\"likeText\">Đã thích (<span\r\n");
      out.write("                                                            id=\"likeCount\">2.1k</span>)</span>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                        <div class=\"col-right\">\r\n");
      out.write("                                            <h1 class=\"product-title\">\r\n");
      out.write("                                                <span class=\"badge bg-danger align-middle me-1\"\r\n");
      out.write("                                                    style=\"font-size: 12px;\">Yêu\r\n");
      out.write("                                                    Thích</span>\r\n");
      out.write("                                                ");
      out.print( p.getName());
      out.write("\r\n");
      out.write("                                            </h1>\r\n");
      out.write("\r\n");
      out.write("                                            ");
 java.util.List<model.Review> reviewList = (java.util.List<model.Review>)
                                                    request.getAttribute("reviews");
                                                    int reviewCount = (reviewList != null) ? reviewList.size() : 0;
                                                    double avgRat = 0;
                                                    if (reviewCount > 0) {
                                                    int sumRat = 0;
                                                    for (model.Review rv : reviewList) {
                                                    sumRat += rv.getRating();
                                                    }
                                                    avgRat = (double) sumRat / reviewCount;
                                                    }
                                                    Integer soldCountObj = (Integer) request.getAttribute("soldCount");
                                                    int soldCnt = (soldCountObj != null) ? soldCountObj : 0;

                                                    String reviewCountStr;
                                                    if (reviewCount >= 1000) {
                                                    reviewCountStr = String.format("%.1fk", reviewCount /
                                                    1000.0).replace(",", ".");
                                                    } else {
                                                    reviewCountStr = String.valueOf(reviewCount);
                                                    }
                                                    String soldCountStr;
                                                    if (soldCnt >= 1000000) {
                                                    soldCountStr = String.format("%.1ftr", soldCnt /
                                                    1000000.0).replace(",", ".");
                                                    } else if (soldCnt >= 1000) {
                                                    soldCountStr = String.format("%.1fk", soldCnt / 1000.0).replace(",",
                                                    ".");
                                                    } else {
                                                    soldCountStr = String.valueOf(soldCnt);
                                                    }
                                                    
      out.write("\r\n");
      out.write("                                                    <div class=\"rating-sold-row\">\r\n");
      out.write("                                                        <span class=\"rating-text\">\r\n");
      out.write("                                                            ");
      out.print( String.format("%.1f", avgRat) );
      out.write("\r\n");
      out.write("                                                        </span>\r\n");
      out.write("                                                        <span class=\"rating-star\">\r\n");
      out.write("                                                            ");
 for (int si=1; si <=5; si++) { if (si
                                                                <=Math.floor(avgRat)) { 
      out.write("\r\n");
      out.write("                                                                <i class=\"fas fa-star\"></i>\r\n");
      out.write("                                                                ");
 } else if (si <=avgRat + 0.5) { 
      out.write("\r\n");
      out.write("                                                                    <i class=\"fas fa-star-half-alt\"></i>\r\n");
      out.write("                                                                    ");
 } else { 
      out.write("\r\n");
      out.write("                                                                        <i class=\"far fa-star\"></i>\r\n");
      out.write("                                                                        ");
 } } 
      out.write("\r\n");
      out.write("                                                        </span>\r\n");
      out.write("                                                        <span class=\"separator\">|</span>\r\n");
      out.write("                                                        <span class=\"sold-num\">\r\n");
      out.write("                                                            ");
      out.print( reviewCountStr );
      out.write("\r\n");
      out.write("                                                        </span>\r\n");
      out.write("                                                        <span class=\"sold-text\">Đánh Giá</span>\r\n");
      out.write("                                                        <span class=\"separator\">|</span>\r\n");
      out.write("                                                        <span class=\"sold-num\">\r\n");
      out.write("                                                            ");
      out.print( soldCountStr );
      out.write("\r\n");
      out.write("                                                        </span>\r\n");
      out.write("                                                        <span class=\"sold-text\">Đã Bán</span>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                                    <div class=\"price-section\">\r\n");
      out.write("                                                        <div class=\"flash-sale-banner\">\r\n");
      out.write("                                                            <div class=\"label\">\r\n");
      out.write("                                                                F<i class=\"fas fa-bolt\" style=\"font-size: 18px;\"></i>ASH\r\n");
      out.write("                                                                SALE\r\n");
      out.write("                                                            </div>\r\n");
      out.write("                                                            <div class=\"timer\">\r\n");
      out.write("                                                                <i class=\"far fa-clock\"></i> KẾT THÚC TRONG\r\n");
      out.write("                                                                <span class=\"timer-box\"\r\n");
      out.write("                                                                    style=\"margin-left: 5px;\">01</span> :\r\n");
      out.write("                                                                <span class=\"timer-box\">08</span> :\r\n");
      out.write("                                                                <span class=\"timer-box\">37</span>\r\n");
      out.write("                                                            </div>\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                        <div class=\"price-content\">\r\n");
      out.write("                                                            <span class=\"old-price\">₫");
      out.print( String.format("%,.0f",
                                                                    oldPrice));
      out.write("\r\n");
      out.write("                                                            </span>\r\n");
      out.write("                                                            <span class=\"current-price\">₫");
      out.print( String.format("%,.0f",
                                                                    p.getPrice()));
      out.write("\r\n");
      out.write("                                                            </span>\r\n");
      out.write("                                                            <span class=\"discount-tag\"\r\n");
      out.write("                                                                style=\"background: transparent; color: #ee4d2d; border: 1px solid #ee4d2d;\">-47%</span>\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                                    <!-- Wholesale Pricing Row -->\r\n");
      out.write("                                                    <div class=\"wholesale-row\">\r\n");
      out.write("                                                        <span class=\"wholesale-label\">Mua Giá Bán<br>Buôn/ Bán Sỉ</span>\r\n");
      out.write("                                                        <div class=\"wholesale-content\">\r\n");
      out.write("                                                            Mua từ (>=2) sản phẩm chỉ với <b>\r\n");
      out.write("                                                                ");
      out.print(String.format("%,.0f", p.getPrice().multiply(new
                                                                    java.math.BigDecimal("0.95"))));
      out.write("₫\r\n");
      out.write("                                                            </b>\r\n");
      out.write("                                                            <a href=\"javascript:void(0)\" class=\"wholesale-link\">Xem Thêm\r\n");
      out.write("                                                                <i class=\"fas fa-chevron-right small\"></i></a>\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                                    <div class=\"voucher-row\">\r\n");
      out.write("                                                        <span class=\"voucher-label\">Mã Giảm Giá<br>Của Shop</span>\r\n");
      out.write("                                                        <div class=\"voucher-tags\" style=\"position: relative;\">\r\n");
      out.write("                                                            <span class=\"voucher-tag\"\r\n");
      out.write("                                                                style=\"position: relative; overflow: hidden;\">Giảm\r\n");
      out.write("                                                                5k₫</span>\r\n");
      out.write("                                                            <span class=\"voucher-tag\"\r\n");
      out.write("                                                                style=\"position: relative; overflow: hidden;\">Giảm\r\n");
      out.write("                                                                10%</span>\r\n");
      out.write("                                                            <span class=\"voucher-tag\"\r\n");
      out.write("                                                                style=\"position: relative; overflow: hidden;\">Giảm\r\n");
      out.write("                                                                10%</span>\r\n");
      out.write("                                                            <span class=\"voucher-tag\"\r\n");
      out.write("                                                                style=\"position: relative; overflow: hidden;\">Giảm\r\n");
      out.write("                                                                10%</span>\r\n");
      out.write("                                                            <span\r\n");
      out.write("                                                                style=\"color: #ee4d2d; font-size: 14px; margin-left: auto; cursor: pointer;\">Xem\r\n");
      out.write("                                                                tất cả <i class=\"fas fa-chevron-right small\"></i></span>\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                                    <div class=\"option-row\" style=\"margin-bottom: 25px;\">\r\n");
      out.write("                                                        <span class=\"option-label\">Vận Chuyển</span>\r\n");
      out.write("                                                        <div style=\"font-size: 14px; width: 100%;\">\r\n");
      out.write("                                                            <div\r\n");
      out.write("                                                                style=\"display: flex; gap: 10px; align-items: flex-start;\">\r\n");
      out.write("                                                                <img src=\"https://deo.shopeemobile.com/shopee/shopee-pcmall-live-sg/productdetailspage/d9e99298b53f66f1ce6d.png\"\r\n");
      out.write("                                                                    style=\"width: 20px; height: 15px; margin-top: 3px;\">\r\n");
      out.write("                                                                <div>\r\n");
      out.write("                                                                    <div style=\"color: rgba(0,0,0,.8);\">Nhận từ 25 Th02\r\n");
      out.write("                                                                        - 1 Th03\r\n");
      out.write("                                                                        <i\r\n");
      out.write("                                                                            class=\"fas fa-chevron-right small text-black-50 ms-1\"></i>\r\n");
      out.write("                                                                    </div>\r\n");
      out.write("                                                                    <div style=\"color: #00bfa5; margin-top: 5px;\">Phí\r\n");
      out.write("                                                                        ship 0đ\r\n");
      out.write("                                                                    </div>\r\n");
      out.write("                                                                    <div\r\n");
      out.write("                                                                        style=\"color: #757575; font-size: 12px; margin-top: 5px;\">\r\n");
      out.write("                                                                        Tặng\r\n");
      out.write("                                                                        Voucher 15.000đ nếu đơn giao sau thời gian trên.\r\n");
      out.write("                                                                    </div>\r\n");
      out.write("                                                                </div>\r\n");
      out.write("                                                            </div>\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                                    <div class=\"option-row\" style=\"margin-bottom: 25px;\">\r\n");
      out.write("                                                        <span class=\"option-label\">An Tâm Mua<br>Sắm\r\n");
      out.write("                                                            Cùng<br>Shopee</span>\r\n");
      out.write("                                                        <div\r\n");
      out.write("                                                            style=\"font-size: 14px; display: flex; align-items: center; gap: 10px; color: rgba(0,0,0,.8);\">\r\n");
      out.write("                                                            <i class=\"fas fa-shield-alt text-danger\"></i> Trả hàng miễn\r\n");
      out.write("                                                            phí 15\r\n");
      out.write("                                                            ngày •\r\n");
      out.write("                                                            Bảo hiểm rơi vỡ màn hình <i\r\n");
      out.write("                                                                class=\"fas fa-chevron-right small text-black-50 ms-1\"></i>\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                                    <div class=\"option-row\">\r\n");
      out.write("                                                        <span class=\"option-label\" style=\"align-self: center;\">Nhóm\r\n");
      out.write("                                                            Màu</span>\r\n");
      out.write("                                                        <div class=\"option-items\">\r\n");
      out.write("                                                            <button class=\"option-btn\" onclick=\"selectOpt(this)\"\r\n");
      out.write("                                                                style=\"padding: 4px 12px; display: flex; align-items: center; gap: 8px;\">\r\n");
      out.write("                                                                <img src=\"");
      out.print( p.getImageUrl() );
      out.write("\"\r\n");
      out.write("                                                                    style=\"width: 24px; height: 24px; object-fit: cover;\">\r\n");
      out.write("                                                                Mèo Tôm Cầm Hoa\r\n");
      out.write("                                                            </button>\r\n");
      out.write("                                                            <button class=\"option-btn\" onclick=\"selectOpt(this)\"\r\n");
      out.write("                                                                style=\"padding: 4px 12px; display: flex; align-items: center; gap: 8px;\">\r\n");
      out.write("                                                                <img src=\"");
      out.print( p.getImageUrl() );
      out.write("\"\r\n");
      out.write("                                                                    style=\"width: 24px; height: 24px; object-fit: cover;\">\r\n");
      out.write("                                                                Mèo Trắng Nơ Hồng\r\n");
      out.write("                                                            </button>\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                                    <div class=\"option-row\">\r\n");
      out.write("                                                        <span class=\"option-label\">Phiên Bản</span>\r\n");
      out.write("                                                        <div class=\"option-items\">\r\n");
      out.write("                                                            <button class=\"option-btn\"\r\n");
      out.write("                                                                onclick=\"selectOpt(this)\">128GB</button>\r\n");
      out.write("                                                            <button class=\"option-btn\"\r\n");
      out.write("                                                                onclick=\"selectOpt(this)\">256GB</button>\r\n");
      out.write("                                                            <button class=\"option-btn\"\r\n");
      out.write("                                                                onclick=\"selectOpt(this)\">512GB</button>\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                                    <div id=\"productActionArea\">\r\n");
      out.write("                                                        <input type=\"hidden\" id=\"hiddenProductId\" value=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${detail.id}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\">\r\n");
      out.write("                                                        <div class=\"option-row\" style=\"align-items: center;\">\r\n");
      out.write("                                                            <span class=\"option-label\">Số Lượng</span>\r\n");
      out.write("                                                            <div class=\"qty-input-group\">\r\n");
      out.write("                                                                <button type=\"button\" class=\"qty-btn\" id=\"btnMinus\"\r\n");
      out.write("                                                                    onclick=\"updateQty(-1)\">-</button>\r\n");
      out.write("                                                                <input type=\"text\" value=\"1\" class=\"qty-value\"\r\n");
      out.write("                                                                    id=\"qtyInput\" onblur=\"clampQty()\"\r\n");
      out.write("                                                                    onkeydown=\"if(event.key==='Enter')event.preventDefault()\">\r\n");
      out.write("                                                                <button type=\"button\" class=\"qty-btn\" id=\"btnPlus\"\r\n");
      out.write("                                                                    onclick=\"updateQty(1)\">+</button>\r\n");
      out.write("                                                            </div>\r\n");
      out.write("                                                            <span class=\"text-secondary ms-3 small\" id=\"stockLabel\">\r\n");
      out.write("                                                                ");
 Integer stockObj = (Integer) request.getAttribute("totalStock");
                                                                   int stockVal = (stockObj != null) ? stockObj : 0;
                                                                   if (stockVal > 0) { 
      out.write("\r\n");
      out.write("                                                                    ");
      out.print( stockVal );
      out.write(" sản phẩm có sẵn\r\n");
      out.write("                                                                ");
 } else { 
      out.write("\r\n");
      out.write("                                                                    <span style=\"color: #ee4d2d;\">Hết hàng</span>\r\n");
      out.write("                                                                ");
 } 
      out.write("\r\n");
      out.write("                                                            </span>\r\n");
      out.write("                                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                                        <div class=\"action-group\">\r\n");
      out.write("                                                            <button type=\"button\" class=\"btn btn-add-cart\"\r\n");
      out.write("                                                                id=\"btnAddCart\" onclick=\"addToCartAjax()\">\r\n");
      out.write("                                                                <i class=\"fas fa-cart-plus\"></i> Thêm Vào Giỏ Hàng\r\n");
      out.write("                                                            </button>\r\n");
      out.write("                                                            <button type=\"button\" class=\"btn btn-buy-now\" id=\"btnBuyNow\"\r\n");
      out.write("                                                                onclick=\"buyNow()\">Mua Ngay</button>\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                                    <!-- Hidden form for Buy Now (submitted via JS) -->\r\n");
      out.write("                                                    <form id=\"buyNowForm\" action=\"buy_now\" method=\"post\"\r\n");
      out.write("                                                        style=\"display:none;\">\r\n");
      out.write("                                                        <input type=\"hidden\" name=\"productId\" value=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${detail.id}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\">\r\n");
      out.write("                                                        <input type=\"hidden\" name=\"qty\" id=\"buyNowQty\" value=\"1\">\r\n");
      out.write("                                                    </form>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("                                                    <div class=\"mt-4 pt-3 border-top small text-secondary\">\r\n");
      out.write("                                                        <span class=\"me-4\"><i\r\n");
      out.write("                                                                class=\"fas fa-undo-alt text-danger me-1\"></i> Đổi\r\n");
      out.write("                                                            trả miễn\r\n");
      out.write("                                                            phí 15 ngày</span>\r\n");
      out.write("                                                        <span><i class=\"fas fa-shield-alt text-danger me-1\"></i> Hàng\r\n");
      out.write("                                                            chính hãng\r\n");
      out.write("                                                            100%</span>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                    <!-- SHOP INFO SECTION -->\r\n");
      out.write("                                    <div class=\"section-box\" style=\"padding: 20px 25px;\">\r\n");
      out.write("                                        <div style=\"display: flex; align-items: center; gap: 20px;\">\r\n");
      out.write("                                            <!-- Shop Avatar & Name -->\r\n");
      out.write("                                            <div\r\n");
      out.write("                                                style=\"display: flex; align-items: center; gap: 15px; min-width: 340px;\">\r\n");
      out.write("                                                <div style=\"position: relative;\">\r\n");
      out.write("                                                    <div\r\n");
      out.write("                                                        style=\"width: 78px; height: 78px; border-radius: 50%; border: 1px solid rgba(0,0,0,.09); overflow: hidden; background: #f5f5f5; display: flex; align-items: center; justify-content: center;\">\r\n");
      out.write("                                                        <i class=\"fas fa-store\"\r\n");
      out.write("                                                            style=\"font-size: 28px; color: #ee4d2d;\"></i>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                    <span\r\n");
      out.write("                                                        style=\"position: absolute; bottom: -4px; left: 50%; transform: translateX(-50%); background: #ee4d2d; color: #fff; font-size: 10px; padding: 1px 5px; border-radius: 2px; white-space: nowrap;\">Yêu\r\n");
      out.write("                                                        thích</span>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                <div>\r\n");
      out.write("                                                    <div\r\n");
      out.write("                                                        style=\"font-size: 16px; color: rgba(0,0,0,.87); font-weight: 500; margin-bottom: 4px;\">\r\n");
      out.write("                                                        Shopee Official Store\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                    <div style=\"font-size: 12px; color: #26aa99; margin-bottom: 10px;\">\r\n");
      out.write("                                                        <i class=\"fas fa-circle\"\r\n");
      out.write("                                                            style=\"font-size: 6px; vertical-align: middle; margin-right: 3px;\"></i>\r\n");
      out.write("                                                        Online\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                    <div style=\"display: flex; gap: 10px;\">\r\n");
      out.write("                                                        <button\r\n");
      out.write("                                                            style=\"background: rgba(238,77,45,0.1); color: #ee4d2d; border: 1px solid #ee4d2d; padding: 6px 18px; font-size: 13px; border-radius: 2px; cursor: pointer; display: flex; align-items: center; gap: 5px;\">\r\n");
      out.write("                                                            <i class=\"fas fa-comment-dots\"></i> Chat Ngay\r\n");
      out.write("                                                        </button>\r\n");
      out.write("                                                        <button\r\n");
      out.write("                                                            style=\"background: #fff; color: rgba(0,0,0,.87); border: 1px solid rgba(0,0,0,.09); padding: 6px 18px; font-size: 13px; border-radius: 2px; cursor: pointer; display: flex; align-items: center; gap: 5px;\">\r\n");
      out.write("                                                            <i class=\"fas fa-store\"></i> Xem Shop\r\n");
      out.write("                                                        </button>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                            </div>\r\n");
      out.write("\r\n");
      out.write("                                            <!-- Divider -->\r\n");
      out.write("                                            <div\r\n");
      out.write("                                                style=\"width: 1px; height: 80px; background: rgba(0,0,0,.05); margin: 0 10px;\">\r\n");
      out.write("                                            </div>\r\n");
      out.write("\r\n");
      out.write("                                            <!-- Shop Stats Grid -->\r\n");
      out.write("                                            <div\r\n");
      out.write("                                                style=\"display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px 40px; flex: 1; font-size: 13px;\">\r\n");
      out.write("                                                <div style=\"display: flex; justify-content: space-between;\">\r\n");
      out.write("                                                    <span style=\"color: rgba(0,0,0,.4);\">Đánh Giá</span>\r\n");
      out.write("                                                    <span style=\"color: #ee4d2d;\">6,5tr</span>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                <div style=\"display: flex; justify-content: space-between;\">\r\n");
      out.write("                                                    <span style=\"color: rgba(0,0,0,.4);\">Tỉ Lệ Phản Hồi</span>\r\n");
      out.write("                                                    <span style=\"color: #ee4d2d;\">100%</span>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                <div style=\"display: flex; justify-content: space-between;\">\r\n");
      out.write("                                                    <span style=\"color: rgba(0,0,0,.4);\">Tham Gia</span>\r\n");
      out.write("                                                    <span style=\"color: #ee4d2d;\">10 năm trước</span>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                <div style=\"display: flex; justify-content: space-between;\">\r\n");
      out.write("                                                    <span style=\"color: rgba(0,0,0,.4);\">Sản Phẩm</span>\r\n");
      out.write("                                                    <span style=\"color: #ee4d2d;\">1,6k</span>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                <div style=\"display: flex; justify-content: space-between;\">\r\n");
      out.write("                                                    <span style=\"color: rgba(0,0,0,.4);\">Thời Gian Phản Hồi</span>\r\n");
      out.write("                                                    <span style=\"color: #ee4d2d;\">trong vài giờ</span>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                <div style=\"display: flex; justify-content: space-between;\">\r\n");
      out.write("                                                    <span style=\"color: rgba(0,0,0,.4);\">Người Theo Dõi</span>\r\n");
      out.write("                                                    <span style=\"color: #ee4d2d;\">3,1tr</span>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                    <div class=\"section-box\">\r\n");
      out.write("                                        <div class=\"section-header\"\r\n");
      out.write("                                            style=\"background: #fafafa; padding: 10px 15px; margin: -25px -25px 20px -25px; border-bottom: 1px solid rgba(0,0,0,.05);\">\r\n");
      out.write("                                            MÔ TẢ SẢN PHẨM</div>\r\n");
      out.write("                                        <div class=\"product-desc-content\">\r\n");
      out.write("                                            ");
      out.print( p.getDescription() !=null ? p.getDescription() : "Đang cập nhật..." );
      out.write("\r\n");
      out.write("\r\n");
      out.write("                                                <br><br>\r\n");
      out.write("                                                ------------------------------------------------<br>\r\n");
      out.write("                                                🔰 CAM KẾT CỦA SHOP:<br>\r\n");
      out.write("                                                - Hàng chính hãng 100%<br>\r\n");
      out.write("                                                - Bảo hành 12 tháng tại trung tâm ủy quyền<br>\r\n");
      out.write("                                                - Hoàn tiền 200% nếu phát hiện hàng giả<br>\r\n");
      out.write("                                                - Giao hàng hỏa tốc trong 2h tại nội thành\r\n");
      out.write("                                        </div>\r\n");
      out.write("                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                    <!-- ĐÁNH GIÁ SẢN PHẨM SECTION -->\r\n");
      out.write("                                    <div class=\"section-box\">\r\n");
      out.write("                                        <div class=\"section-header\"\r\n");
      out.write("                                            style=\"background: #fafafa; padding: 10px 15px; margin: -25px -25px 20px -25px; border-bottom: 1px solid rgba(0,0,0,.05);\">\r\n");
      out.write("                                            ĐÁNH GIÁ SẢN PHẨM\r\n");
      out.write("                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                        <!-- Tính toán thống kê đánh giá từ dữ liệu thực -->\r\n");
      out.write("                                        ");
      if (_jspx_meth_c_005fset_005f0(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("                                        ");
      if (_jspx_meth_c_005fset_005f1(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("                                        ");
      if (_jspx_meth_c_005fset_005f2(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("                                        ");
      if (_jspx_meth_c_005fset_005f3(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("                                        ");
      if (_jspx_meth_c_005fset_005f4(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("                                        ");
      if (_jspx_meth_c_005fset_005f5(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("                                        ");
      if (_jspx_meth_c_005fset_005f6(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("                                        ");
      if (_jspx_meth_c_005fset_005f7(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("                                        ");
      if (_jspx_meth_c_005fset_005f8(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("                                        ");
      if (_jspx_meth_c_005fforEach_005f0(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("                                        ");
      if (_jspx_meth_c_005fset_005f17(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("\r\n");
      out.write("                                        <!-- Overall Rating -->\r\n");
      out.write("                                        <div\r\n");
      out.write("                                            style=\"background: #fffbf8; border: 1px solid #f9ede5; padding: 25px 30px; margin-bottom: 20px; display: flex; align-items: center; gap: 30px;\">\r\n");
      out.write("                                            <div style=\"text-align: center; min-width: 120px;\">\r\n");
      out.write("                                                <div style=\"font-size: 28px; color: #ee4d2d;\">\r\n");
      out.write("                                                    <span style=\"font-size: 28px;\">\r\n");
      out.write("                                                        ");
      if (_jspx_meth_c_005fchoose_005f0(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("                                                    </span>\r\n");
      out.write("                                                    <span style=\"font-size: 16px; color: rgba(0,0,0,.54);\"> trên\r\n");
      out.write("                                                        5</span>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                <div style=\"color: #ee4d2d; font-size: 20px; margin-top: 5px;\">\r\n");
      out.write("                                                    ");
      if (_jspx_meth_c_005fforEach_005f1(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                            <div style=\"display: flex; flex-wrap: wrap; gap: 8px;\">\r\n");
      out.write("                                                <button onclick=\"filterReview(this, 'all')\" data-filter=\"all\"\r\n");
      out.write("                                                    style=\"padding: 6px 20px; border: 1px solid #ee4d2d; background: #fff; color: #ee4d2d; cursor: pointer; border-radius: 2px; font-size: 13px;\"\r\n");
      out.write("                                                    class=\"review-filter-active\">Tất Cả</button>\r\n");
      out.write("                                                <button onclick=\"filterReview(this, '5')\" data-filter=\"5\"\r\n");
      out.write("                                                    style=\"padding: 6px 20px; border: 1px solid rgba(0,0,0,.09); background: #fff; color: rgba(0,0,0,.87); cursor: pointer; border-radius: 2px; font-size: 13px;\">5\r\n");
      out.write("                                                    Sao (");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${star5}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write(")</button>\r\n");
      out.write("                                                <button onclick=\"filterReview(this, '4')\" data-filter=\"4\"\r\n");
      out.write("                                                    style=\"padding: 6px 20px; border: 1px solid rgba(0,0,0,.09); background: #fff; color: rgba(0,0,0,.87); cursor: pointer; border-radius: 2px; font-size: 13px;\">4\r\n");
      out.write("                                                    Sao (");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${star4}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write(")</button>\r\n");
      out.write("                                                <button onclick=\"filterReview(this, '3')\" data-filter=\"3\"\r\n");
      out.write("                                                    style=\"padding: 6px 20px; border: 1px solid rgba(0,0,0,.09); background: #fff; color: rgba(0,0,0,.87); cursor: pointer; border-radius: 2px; font-size: 13px;\">3\r\n");
      out.write("                                                    Sao (");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${star3}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write(")</button>\r\n");
      out.write("                                                <button onclick=\"filterReview(this, '2')\" data-filter=\"2\"\r\n");
      out.write("                                                    style=\"padding: 6px 20px; border: 1px solid rgba(0,0,0,.09); background: #fff; color: rgba(0,0,0,.87); cursor: pointer; border-radius: 2px; font-size: 13px;\">2\r\n");
      out.write("                                                    Sao (");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${star2}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write(")</button>\r\n");
      out.write("                                                <button onclick=\"filterReview(this, '1')\" data-filter=\"1\"\r\n");
      out.write("                                                    style=\"padding: 6px 20px; border: 1px solid rgba(0,0,0,.09); background: #fff; color: rgba(0,0,0,.87); cursor: pointer; border-radius: 2px; font-size: 13px;\">1\r\n");
      out.write("                                                    Sao (");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${star1}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write(")</button>\r\n");
      out.write("                                                <button onclick=\"filterReview(this, 'comment')\" data-filter=\"comment\"\r\n");
      out.write("                                                    style=\"padding: 6px 20px; border: 1px solid rgba(0,0,0,.09); background: #fff; color: rgba(0,0,0,.87); cursor: pointer; border-radius: 2px; font-size: 13px;\">Có\r\n");
      out.write("                                                    Bình Luận (");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${hasCommentCount}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write(")</button>\r\n");
      out.write("                                                <button onclick=\"filterReview(this, 'media')\" data-filter=\"media\"\r\n");
      out.write("                                                    style=\"padding: 6px 20px; border: 1px solid rgba(0,0,0,.09); background: #fff; color: rgba(0,0,0,.87); cursor: pointer; border-radius: 2px; font-size: 13px;\">Có\r\n");
      out.write("                                                    Hình Ảnh / Video (");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${hasMediaCount}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write(")</button>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                        <!-- Reviews Data -->\r\n");
      out.write("                                        ");
      if (_jspx_meth_c_005fchoose_005f2(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                </div>\r\n");
      out.write("\r\n");
      out.write("                                <!-- VIẾT ĐÁNH GIÁ SECTION -->\r\n");
      out.write("                                ");
      if (_jspx_meth_c_005fif_005f8(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("                                ");
      if (_jspx_meth_c_005fif_005f9(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("                                ");
 } else { 
      out.write("\r\n");
      out.write("                                    <div class=\"container text-center py-5\">\r\n");
      out.write("                                        <h3>Sản phẩm không tồn tại!</h3>\r\n");
      out.write("                                        <a href=\"home\" class=\"btn btn-primary mt-3\">Quay lại trang chủ</a>\r\n");
      out.write("                                    </div>\r\n");
      out.write("                                    ");
 }
      out.write("\r\n");
      out.write("\r\n");
      out.write("                                        <div class=\"shopee-footer\"\r\n");
      out.write("                                            style=\"border-top: 4px solid #ee4d2d; background: #fff; padding: 40px 0; margin-top: 50px; font-size: 14px; color: rgba(0,0,0,.65);\">\r\n");
      out.write("                                            <div class=\"container text-center\">\r\n");
      out.write("                                                <p>© 2026 Shopee. Tất cả các quyền được bảo lưu.</p>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                        <!-- Toast Notification HTML -->\r\n");
      out.write("                                        <div class=\"shopee-toast\" id=\"shopeeToast\">\r\n");
      out.write("                                            <div class=\"toast-icon\"><i class=\"fas fa-check-circle\"></i></div>\r\n");
      out.write("                                            <div class=\"toast-msg\" id=\"toastMsg\">Sản phẩm đã được thêm vào Giỏ Hàng\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                        <script>\r\n");
      out.write("                                            // ============================================================\r\n");
      out.write("                                            // 1. HOVER ĐỔI ẢNH\r\n");
      out.write("                                            // ============================================================\r\n");
      out.write("                                            function changeImg(el) {\r\n");
      out.write("                                                document.getElementById('mainImg').src = el.querySelector('img').src;\r\n");
      out.write("                                                document.querySelectorAll('.gallery-item').forEach(i => i.classList.remove('active'));\r\n");
      out.write("                                                el.classList.add('active');\r\n");
      out.write("                                            }\r\n");
      out.write("\r\n");
      out.write("                                            // ============================================================\r\n");
      out.write("                                            // 2. CHỌN OPTION (Màu/Size)\r\n");
      out.write("                                            // ============================================================\r\n");
      out.write("                                            function selectOpt(btn) {\r\n");
      out.write("                                                let siblings = btn.parentElement.children;\r\n");
      out.write("                                                for (let s of siblings)\r\n");
      out.write("                                                    s.classList.remove('selected');\r\n");
      out.write("                                                btn.classList.add('selected');\r\n");
      out.write("                                            }\r\n");
      out.write("\r\n");
      out.write("                                            // ============================================================\r\n");
      out.write("                                            // 3. SỐ LƯỢNG - TĂNG GIẢM + VALIDATION\r\n");
      out.write("                                            // ============================================================\r\n");
      out.write("                                            const MAX_QTY = ");
      out.print( (request.getAttribute("totalStock") != null) ? request.getAttribute("totalStock") : 0 );
      out.write("; // Tồn kho thực tế\r\n");
      out.write("                                            const MIN_QTY = 1;\r\n");
      out.write("\r\n");
      out.write("                                            function updateQty(n) {\r\n");
      out.write("                                                let input = document.getElementById('qtyInput');\r\n");
      out.write("                                                let val = parseInt(input.value) || 1;\r\n");
      out.write("                                                val += n;\r\n");
      out.write("                                                if (val < MIN_QTY) val = MIN_QTY;\r\n");
      out.write("                                                if (val > MAX_QTY) val = MAX_QTY;\r\n");
      out.write("                                                input.value = val;\r\n");
      out.write("                                                updateQtyButtons(val);\r\n");
      out.write("                                            }\r\n");
      out.write("\r\n");
      out.write("                                            function clampQty() {\r\n");
      out.write("                                                let input = document.getElementById('qtyInput');\r\n");
      out.write("                                                let val = parseInt(input.value);\r\n");
      out.write("                                                if (isNaN(val) || val < MIN_QTY) val = MIN_QTY;\r\n");
      out.write("                                                if (val > MAX_QTY) val = MAX_QTY;\r\n");
      out.write("                                                input.value = val;\r\n");
      out.write("                                                updateQtyButtons(val);\r\n");
      out.write("                                            }\r\n");
      out.write("\r\n");
      out.write("                                            function updateQtyButtons(val) {\r\n");
      out.write("                                                let btnMinus = document.getElementById('btnMinus');\r\n");
      out.write("                                                let btnPlus = document.getElementById('btnPlus');\r\n");
      out.write("                                                if (btnMinus) btnMinus.disabled = (val <= MIN_QTY);\r\n");
      out.write("                                                if (btnPlus) btnPlus.disabled = (val >= MAX_QTY);\r\n");
      out.write("                                            }\r\n");
      out.write("\r\n");
      out.write("                                            // Initialize button states\r\n");
      out.write("                                            updateQtyButtons(1);\r\n");
      out.write("\r\n");
      out.write("                                            // ============================================================\r\n");
      out.write("                                            // 4. THÊM VÀO GIỎ HÀNG - AJAX\r\n");
      out.write("                                            // ============================================================\r\n");
      out.write("                                            function addToCartAjax() {\r\n");
      out.write("                                                let productId = document.getElementById('hiddenProductId').value;\r\n");
      out.write("                                                let qty = document.getElementById('qtyInput').value;\r\n");
      out.write("                                                let btn = document.getElementById('btnAddCart');\r\n");
      out.write("\r\n");
      out.write("                                                // Disable button during request\r\n");
      out.write("                                                btn.disabled = true;\r\n");
      out.write("                                                btn.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> Đang thêm...';\r\n");
      out.write("\r\n");
      out.write("                                                fetch('add_to_cart', {\r\n");
      out.write("                                                    method: 'POST',\r\n");
      out.write("                                                    headers: {\r\n");
      out.write("                                                        'Content-Type': 'application/x-www-form-urlencoded',\r\n");
      out.write("                                                        'X-Requested-With': 'XMLHttpRequest'\r\n");
      out.write("                                                    },\r\n");
      out.write("                                                    body: 'productId=' + productId + '&qty=' + qty\r\n");
      out.write("                                                })\r\n");
      out.write("                                                    .then(res => res.json())\r\n");
      out.write("                                                    .then(data => {\r\n");
      out.write("                                                        if (data.success) {\r\n");
      out.write("                                                            // Update cart badge in header\r\n");
      out.write("                                                            let badges = document.querySelectorAll('.badge');\r\n");
      out.write("                                                            badges.forEach(b => {\r\n");
      out.write("                                                                if (b.closest('a[href=\"cart\"]')) {\r\n");
      out.write("                                                                    b.textContent = data.cartCount;\r\n");
      out.write("                                                                }\r\n");
      out.write("                                                            });\r\n");
      out.write("\r\n");
      out.write("                                                            // Show success toast\r\n");
      out.write("                                                            showToast(data.message, true);\r\n");
      out.write("                                                        } else {\r\n");
      out.write("                                                            showToast(data.message || 'Có lỗi xảy ra', false);\r\n");
      out.write("                                                        }\r\n");
      out.write("                                                    })\r\n");
      out.write("                                                    .catch(err => {\r\n");
      out.write("                                                        console.error('Add to cart error:', err);\r\n");
      out.write("                                                        showToast('Có lỗi xảy ra, vui lòng thử lại', false);\r\n");
      out.write("                                                    })\r\n");
      out.write("                                                    .finally(() => {\r\n");
      out.write("                                                        btn.disabled = false;\r\n");
      out.write("                                                        btn.innerHTML = '<i class=\"fas fa-cart-plus\"></i> Thêm Vào Giỏ Hàng';\r\n");
      out.write("                                                    });\r\n");
      out.write("                                            }\r\n");
      out.write("\r\n");
      out.write("                                            // ============================================================\r\n");
      out.write("                                            // 5. MUA NGAY\r\n");
      out.write("                                            // ============================================================\r\n");
      out.write("                                            function buyNow() {\r\n");
      out.write("                                                let qty = document.getElementById('qtyInput').value;\r\n");
      out.write("                                                document.getElementById('buyNowQty').value = qty;\r\n");
      out.write("                                                document.getElementById('buyNowForm').submit();\r\n");
      out.write("                                            }\r\n");
      out.write("\r\n");
      out.write("                                            // ============================================================\r\n");
      out.write("                                            // 6. TOAST NOTIFICATION\r\n");
      out.write("                                            // ============================================================\r\n");
      out.write("                                            function showToast(message, isSuccess) {\r\n");
      out.write("                                                let toast = document.getElementById('shopeeToast');\r\n");
      out.write("                                                let icon = toast.querySelector('.toast-icon i');\r\n");
      out.write("                                                let msg = document.getElementById('toastMsg');\r\n");
      out.write("\r\n");
      out.write("                                                msg.textContent = message;\r\n");
      out.write("\r\n");
      out.write("                                                if (isSuccess) {\r\n");
      out.write("                                                    icon.className = 'fas fa-check-circle';\r\n");
      out.write("                                                    icon.style.color = '#00bfa5';\r\n");
      out.write("                                                } else {\r\n");
      out.write("                                                    icon.className = 'fas fa-exclamation-circle';\r\n");
      out.write("                                                    icon.style.color = '#ee4d2d';\r\n");
      out.write("                                                }\r\n");
      out.write("\r\n");
      out.write("                                                toast.classList.add('show');\r\n");
      out.write("                                                setTimeout(() => {\r\n");
      out.write("                                                    toast.classList.remove('show');\r\n");
      out.write("                                                }, 2000);\r\n");
      out.write("                                            }\r\n");
      out.write("\r\n");
      out.write("                                            // ============================================================\r\n");
      out.write("                                            // 7. FLASH SALE COUNTDOWN TIMER\r\n");
      out.write("                                            // ============================================================\r\n");
      out.write("                                            (function () {\r\n");
      out.write("                                                // Set countdown for 2 hours from now\r\n");
      out.write("                                                let totalSeconds = 2 * 3600; // 2 hours\r\n");
      out.write("                                                const timerBoxes = document.querySelectorAll('.timer-box');\r\n");
      out.write("\r\n");
      out.write("                                                if (timerBoxes.length >= 3) {\r\n");
      out.write("                                                    function updateTimer() {\r\n");
      out.write("                                                        if (totalSeconds <= 0) {\r\n");
      out.write("                                                            // Flash sale ended\r\n");
      out.write("                                                            let banner = document.querySelector('.flash-sale-banner');\r\n");
      out.write("                                                            if (banner) {\r\n");
      out.write("                                                                let timerDiv = banner.querySelector('.timer');\r\n");
      out.write("                                                                if (timerDiv) timerDiv.innerHTML = '<span style=\"font-size: 14px;\">ĐÃ KẾT THÚC</span>';\r\n");
      out.write("                                                            }\r\n");
      out.write("                                                            return;\r\n");
      out.write("                                                        }\r\n");
      out.write("\r\n");
      out.write("                                                        let hrs = Math.floor(totalSeconds / 3600);\r\n");
      out.write("                                                        let mins = Math.floor((totalSeconds % 3600) / 60);\r\n");
      out.write("                                                        let secs = totalSeconds % 60;\r\n");
      out.write("\r\n");
      out.write("                                                        timerBoxes[0].textContent = String(hrs).padStart(2, '0');\r\n");
      out.write("                                                        timerBoxes[1].textContent = String(mins).padStart(2, '0');\r\n");
      out.write("                                                        timerBoxes[2].textContent = String(secs).padStart(2, '0');\r\n");
      out.write("\r\n");
      out.write("                                                        totalSeconds--;\r\n");
      out.write("                                                    }\r\n");
      out.write("\r\n");
      out.write("                                                    updateTimer(); // Initial display\r\n");
      out.write("                                                    setInterval(updateTimer, 1000);\r\n");
      out.write("                                                }\r\n");
      out.write("                                            })();\r\n");
      out.write("\r\n");
      out.write("                                            // ============================================================\r\n");
      out.write("                                            // 8. LIKE (YÊU THÍCH) TOGGLE\r\n");
      out.write("                                            // ============================================================\r\n");
      out.write("                                            let isLiked = false;\r\n");
      out.write("                                            let likeCountNum = 2100; // 2.1k\r\n");
      out.write("\r\n");
      out.write("                                            function toggleLike() {\r\n");
      out.write("                                                let icon = document.getElementById('likeIcon');\r\n");
      out.write("                                                let countSpan = document.getElementById('likeCount');\r\n");
      out.write("\r\n");
      out.write("                                                isLiked = !isLiked;\r\n");
      out.write("\r\n");
      out.write("                                                if (isLiked) {\r\n");
      out.write("                                                    icon.classList.remove('far');\r\n");
      out.write("                                                    icon.classList.add('fas');\r\n");
      out.write("                                                    likeCountNum++;\r\n");
      out.write("                                                } else {\r\n");
      out.write("                                                    icon.classList.remove('fas');\r\n");
      out.write("                                                    icon.classList.add('far');\r\n");
      out.write("                                                    likeCountNum--;\r\n");
      out.write("                                                }\r\n");
      out.write("\r\n");
      out.write("                                                // Format number\r\n");
      out.write("                                                if (likeCountNum >= 1000) {\r\n");
      out.write("                                                    countSpan.textContent = (likeCountNum / 1000).toFixed(1) + 'k';\r\n");
      out.write("                                                } else {\r\n");
      out.write("                                                    countSpan.textContent = likeCountNum;\r\n");
      out.write("                                                }\r\n");
      out.write("\r\n");
      out.write("                                                // Animation\r\n");
      out.write("                                                icon.classList.add('liked');\r\n");
      out.write("                                                setTimeout(() => icon.classList.remove('liked'), 300);\r\n");
      out.write("                                            }\r\n");
      out.write("\r\n");
      out.write("                                            // ============================================================\r\n");
      out.write("                                            // 9. REVIEW FILTER\r\n");
      out.write("                                            // ============================================================\r\n");
      out.write("                                            function filterReview(btn, filterType) {\r\n");
      out.write("                                                // 1. Update button styling\r\n");
      out.write("                                                document.querySelectorAll('[data-filter]').forEach(b => {\r\n");
      out.write("                                                    b.style.borderColor = 'rgba(0,0,0,.09)';\r\n");
      out.write("                                                    b.style.color = 'rgba(0,0,0,.87)';\r\n");
      out.write("                                                    b.classList.remove('review-filter-active');\r\n");
      out.write("                                                });\r\n");
      out.write("                                                btn.style.borderColor = '#ee4d2d';\r\n");
      out.write("                                                btn.style.color = '#ee4d2d';\r\n");
      out.write("                                                btn.classList.add('review-filter-active');\r\n");
      out.write("\r\n");
      out.write("                                                // 2. Filter review items\r\n");
      out.write("                                                let items = document.querySelectorAll('.review-item');\r\n");
      out.write("                                                let visibleCount = 0;\r\n");
      out.write("\r\n");
      out.write("                                                items.forEach(item => {\r\n");
      out.write("                                                    let show = false;\r\n");
      out.write("                                                    let rating = item.getAttribute('data-rating');\r\n");
      out.write("                                                    let hasComment = item.getAttribute('data-has-comment') === 'true';\r\n");
      out.write("                                                    let hasMedia = item.getAttribute('data-has-media') === 'true';\r\n");
      out.write("\r\n");
      out.write("                                                    switch (filterType) {\r\n");
      out.write("                                                        case 'all':\r\n");
      out.write("                                                            show = true;\r\n");
      out.write("                                                            break;\r\n");
      out.write("                                                        case '5': case '4': case '3': case '2': case '1':\r\n");
      out.write("                                                            show = (rating === filterType);\r\n");
      out.write("                                                            break;\r\n");
      out.write("                                                        case 'comment':\r\n");
      out.write("                                                            show = hasComment;\r\n");
      out.write("                                                            break;\r\n");
      out.write("                                                        case 'media':\r\n");
      out.write("                                                            show = hasMedia;\r\n");
      out.write("                                                            break;\r\n");
      out.write("                                                    }\r\n");
      out.write("\r\n");
      out.write("                                                    item.style.display = show ? 'flex' : 'none';\r\n");
      out.write("                                                    if (show) visibleCount++;\r\n");
      out.write("                                                });\r\n");
      out.write("\r\n");
      out.write("                                                // 3. Show/hide empty state\r\n");
      out.write("                                                let emptyDiv = document.getElementById('reviewFilterEmpty');\r\n");
      out.write("                                                if (emptyDiv) {\r\n");
      out.write("                                                    emptyDiv.style.display = (visibleCount === 0 && items.length > 0) ? 'block' : 'none';\r\n");
      out.write("                                                }\r\n");
      out.write("                                            }\r\n");
      out.write("                                        </script>\r\n");
      out.write("                    </body>\r\n");
      out.write("\r\n");
      out.write("                    </html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof jakarta.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }

  private boolean _jspx_meth_c_005fset_005f0(jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f0 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f0_reused = false;
    try {
      _jspx_th_c_005fset_005f0.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f0.setParent(null);
      // /product_detail.jsp(988,40) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f0.setVar("totalReviews");
      // /product_detail.jsp(988,40) name = value type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f0.setValue(new org.apache.jasper.el.JspValueExpression("/product_detail.jsp(988,40) '${not empty reviews ? reviews.size() : 0}'",_jsp_getExpressionFactory().createValueExpression(_jspx_page_context.getELContext(),"${not empty reviews ? reviews.size() : 0}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f0 = _jspx_th_c_005fset_005f0.doStartTag();
      if (_jspx_th_c_005fset_005f0.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f0);
      _jspx_th_c_005fset_005f0_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f0, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f0_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fset_005f1(jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f1 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f1_reused = false;
    try {
      _jspx_th_c_005fset_005f1.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f1.setParent(null);
      // /product_detail.jsp(989,40) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f1.setVar("sumRating");
      // /product_detail.jsp(989,40) name = value type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f1.setValue(new org.apache.jasper.el.JspValueExpression("/product_detail.jsp(989,40) '0'",_jsp_getExpressionFactory().createValueExpression("0",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f1 = _jspx_th_c_005fset_005f1.doStartTag();
      if (_jspx_th_c_005fset_005f1.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f1);
      _jspx_th_c_005fset_005f1_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f1, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f1_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fset_005f2(jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f2 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f2_reused = false;
    try {
      _jspx_th_c_005fset_005f2.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f2.setParent(null);
      // /product_detail.jsp(990,40) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f2.setVar("star5");
      // /product_detail.jsp(990,40) name = value type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f2.setValue(new org.apache.jasper.el.JspValueExpression("/product_detail.jsp(990,40) '0'",_jsp_getExpressionFactory().createValueExpression("0",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f2 = _jspx_th_c_005fset_005f2.doStartTag();
      if (_jspx_th_c_005fset_005f2.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f2);
      _jspx_th_c_005fset_005f2_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f2, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f2_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fset_005f3(jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f3 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f3_reused = false;
    try {
      _jspx_th_c_005fset_005f3.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f3.setParent(null);
      // /product_detail.jsp(991,40) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f3.setVar("star4");
      // /product_detail.jsp(991,40) name = value type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f3.setValue(new org.apache.jasper.el.JspValueExpression("/product_detail.jsp(991,40) '0'",_jsp_getExpressionFactory().createValueExpression("0",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f3 = _jspx_th_c_005fset_005f3.doStartTag();
      if (_jspx_th_c_005fset_005f3.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f3);
      _jspx_th_c_005fset_005f3_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f3, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f3_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fset_005f4(jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f4 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f4_reused = false;
    try {
      _jspx_th_c_005fset_005f4.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f4.setParent(null);
      // /product_detail.jsp(992,40) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f4.setVar("star3");
      // /product_detail.jsp(992,40) name = value type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f4.setValue(new org.apache.jasper.el.JspValueExpression("/product_detail.jsp(992,40) '0'",_jsp_getExpressionFactory().createValueExpression("0",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f4 = _jspx_th_c_005fset_005f4.doStartTag();
      if (_jspx_th_c_005fset_005f4.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f4);
      _jspx_th_c_005fset_005f4_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f4, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f4_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fset_005f5(jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f5 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f5_reused = false;
    try {
      _jspx_th_c_005fset_005f5.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f5.setParent(null);
      // /product_detail.jsp(993,40) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f5.setVar("star2");
      // /product_detail.jsp(993,40) name = value type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f5.setValue(new org.apache.jasper.el.JspValueExpression("/product_detail.jsp(993,40) '0'",_jsp_getExpressionFactory().createValueExpression("0",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f5 = _jspx_th_c_005fset_005f5.doStartTag();
      if (_jspx_th_c_005fset_005f5.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f5);
      _jspx_th_c_005fset_005f5_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f5, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f5_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fset_005f6(jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f6 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f6_reused = false;
    try {
      _jspx_th_c_005fset_005f6.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f6.setParent(null);
      // /product_detail.jsp(994,40) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f6.setVar("star1");
      // /product_detail.jsp(994,40) name = value type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f6.setValue(new org.apache.jasper.el.JspValueExpression("/product_detail.jsp(994,40) '0'",_jsp_getExpressionFactory().createValueExpression("0",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f6 = _jspx_th_c_005fset_005f6.doStartTag();
      if (_jspx_th_c_005fset_005f6.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f6);
      _jspx_th_c_005fset_005f6_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f6, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f6_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fset_005f7(jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f7 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f7_reused = false;
    try {
      _jspx_th_c_005fset_005f7.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f7.setParent(null);
      // /product_detail.jsp(995,40) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f7.setVar("hasCommentCount");
      // /product_detail.jsp(995,40) name = value type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f7.setValue(new org.apache.jasper.el.JspValueExpression("/product_detail.jsp(995,40) '0'",_jsp_getExpressionFactory().createValueExpression("0",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f7 = _jspx_th_c_005fset_005f7.doStartTag();
      if (_jspx_th_c_005fset_005f7.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f7);
      _jspx_th_c_005fset_005f7_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f7, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f7_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fset_005f8(jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f8 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f8_reused = false;
    try {
      _jspx_th_c_005fset_005f8.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f8.setParent(null);
      // /product_detail.jsp(996,40) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f8.setVar("hasMediaCount");
      // /product_detail.jsp(996,40) name = value type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f8.setValue(new org.apache.jasper.el.JspValueExpression("/product_detail.jsp(996,40) '0'",_jsp_getExpressionFactory().createValueExpression("0",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f8 = _jspx_th_c_005fset_005f8.doStartTag();
      if (_jspx_th_c_005fset_005f8.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f8);
      _jspx_th_c_005fset_005f8_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f8, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f8_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fforEach_005f0(jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:forEach
    org.apache.taglibs.standard.tag.rt.core.ForEachTag _jspx_th_c_005fforEach_005f0 = (org.apache.taglibs.standard.tag.rt.core.ForEachTag) _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems.get(org.apache.taglibs.standard.tag.rt.core.ForEachTag.class);
    boolean _jspx_th_c_005fforEach_005f0_reused = false;
    try {
      _jspx_th_c_005fforEach_005f0.setPageContext(_jspx_page_context);
      _jspx_th_c_005fforEach_005f0.setParent(null);
      // /product_detail.jsp(997,40) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f0.setVar("rv");
      // /product_detail.jsp(997,40) name = items type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f0.setItems(new org.apache.jasper.el.JspValueExpression("/product_detail.jsp(997,40) '${reviews}'",_jsp_getExpressionFactory().createValueExpression(_jspx_page_context.getELContext(),"${reviews}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int[] _jspx_push_body_count_c_005fforEach_005f0 = new int[] { 0 };
      try {
        int _jspx_eval_c_005fforEach_005f0 = _jspx_th_c_005fforEach_005f0.doStartTag();
        if (_jspx_eval_c_005fforEach_005f0 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
          do {
            out.write("\r\n");
            out.write("                                            ");
            if (_jspx_meth_c_005fset_005f9(_jspx_th_c_005fforEach_005f0, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
              return true;
            out.write("\r\n");
            out.write("                                            ");
            if (_jspx_meth_c_005fif_005f0(_jspx_th_c_005fforEach_005f0, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
              return true;
            out.write("\r\n");
            out.write("                                            ");
            if (_jspx_meth_c_005fif_005f1(_jspx_th_c_005fforEach_005f0, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
              return true;
            out.write("\r\n");
            out.write("                                            ");
            if (_jspx_meth_c_005fif_005f2(_jspx_th_c_005fforEach_005f0, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
              return true;
            out.write("\r\n");
            out.write("                                            ");
            if (_jspx_meth_c_005fif_005f3(_jspx_th_c_005fforEach_005f0, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
              return true;
            out.write("\r\n");
            out.write("                                            ");
            if (_jspx_meth_c_005fif_005f4(_jspx_th_c_005fforEach_005f0, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
              return true;
            out.write("\r\n");
            out.write("                                            ");
            if (_jspx_meth_c_005fif_005f5(_jspx_th_c_005fforEach_005f0, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
              return true;
            out.write("\r\n");
            out.write("                                            ");
            if (_jspx_meth_c_005fif_005f6(_jspx_th_c_005fforEach_005f0, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
              return true;
            out.write("\r\n");
            out.write("                                        ");
            int evalDoAfterBody = _jspx_th_c_005fforEach_005f0.doAfterBody();
            if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
              break;
          } while (true);
        }
        if (_jspx_th_c_005fforEach_005f0.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
          return true;
        }
      } catch (java.lang.Throwable _jspx_exception) {
        while (_jspx_push_body_count_c_005fforEach_005f0[0]-- > 0)
          out = _jspx_page_context.popBody();
        _jspx_th_c_005fforEach_005f0.doCatch(_jspx_exception);
      } finally {
        _jspx_th_c_005fforEach_005f0.doFinally();
      }
      _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems.reuse(_jspx_th_c_005fforEach_005f0);
      _jspx_th_c_005fforEach_005f0_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fforEach_005f0, _jsp_getInstanceManager(), _jspx_th_c_005fforEach_005f0_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fset_005f9(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fforEach_005f0, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f9 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f9_reused = false;
    try {
      _jspx_th_c_005fset_005f9.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f9.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fforEach_005f0);
      // /product_detail.jsp(998,44) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f9.setVar("sumRating");
      // /product_detail.jsp(998,44) name = value type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f9.setValue(new org.apache.jasper.el.JspValueExpression("/product_detail.jsp(998,44) '${sumRating + rv.rating}'",_jsp_getExpressionFactory().createValueExpression(_jspx_page_context.getELContext(),"${sumRating + rv.rating}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f9 = _jspx_th_c_005fset_005f9.doStartTag();
      if (_jspx_th_c_005fset_005f9.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f9);
      _jspx_th_c_005fset_005f9_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f9, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f9_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fif_005f0(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fforEach_005f0, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:if
    org.apache.taglibs.standard.tag.rt.core.IfTag _jspx_th_c_005fif_005f0 = (org.apache.taglibs.standard.tag.rt.core.IfTag) _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.IfTag.class);
    boolean _jspx_th_c_005fif_005f0_reused = false;
    try {
      _jspx_th_c_005fif_005f0.setPageContext(_jspx_page_context);
      _jspx_th_c_005fif_005f0.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fforEach_005f0);
      // /product_detail.jsp(999,44) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fif_005f0.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${rv.rating == 5}", boolean.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null)).booleanValue());
      int _jspx_eval_c_005fif_005f0 = _jspx_th_c_005fif_005f0.doStartTag();
      if (_jspx_eval_c_005fif_005f0 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("                                                ");
          if (_jspx_meth_c_005fset_005f10(_jspx_th_c_005fif_005f0, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
            return true;
          out.write("\r\n");
          out.write("                                            ");
          int evalDoAfterBody = _jspx_th_c_005fif_005f0.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fif_005f0.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.reuse(_jspx_th_c_005fif_005f0);
      _jspx_th_c_005fif_005f0_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fif_005f0, _jsp_getInstanceManager(), _jspx_th_c_005fif_005f0_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fset_005f10(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fif_005f0, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f10 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f10_reused = false;
    try {
      _jspx_th_c_005fset_005f10.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f10.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fif_005f0);
      // /product_detail.jsp(1000,48) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f10.setVar("star5");
      // /product_detail.jsp(1000,48) name = value type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f10.setValue(new org.apache.jasper.el.JspValueExpression("/product_detail.jsp(1000,48) '${star5 + 1}'",_jsp_getExpressionFactory().createValueExpression(_jspx_page_context.getELContext(),"${star5 + 1}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f10 = _jspx_th_c_005fset_005f10.doStartTag();
      if (_jspx_th_c_005fset_005f10.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f10);
      _jspx_th_c_005fset_005f10_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f10, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f10_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fif_005f1(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fforEach_005f0, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:if
    org.apache.taglibs.standard.tag.rt.core.IfTag _jspx_th_c_005fif_005f1 = (org.apache.taglibs.standard.tag.rt.core.IfTag) _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.IfTag.class);
    boolean _jspx_th_c_005fif_005f1_reused = false;
    try {
      _jspx_th_c_005fif_005f1.setPageContext(_jspx_page_context);
      _jspx_th_c_005fif_005f1.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fforEach_005f0);
      // /product_detail.jsp(1002,44) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fif_005f1.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${rv.rating == 4}", boolean.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null)).booleanValue());
      int _jspx_eval_c_005fif_005f1 = _jspx_th_c_005fif_005f1.doStartTag();
      if (_jspx_eval_c_005fif_005f1 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("                                                ");
          if (_jspx_meth_c_005fset_005f11(_jspx_th_c_005fif_005f1, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
            return true;
          out.write("\r\n");
          out.write("                                            ");
          int evalDoAfterBody = _jspx_th_c_005fif_005f1.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fif_005f1.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.reuse(_jspx_th_c_005fif_005f1);
      _jspx_th_c_005fif_005f1_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fif_005f1, _jsp_getInstanceManager(), _jspx_th_c_005fif_005f1_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fset_005f11(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fif_005f1, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f11 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f11_reused = false;
    try {
      _jspx_th_c_005fset_005f11.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f11.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fif_005f1);
      // /product_detail.jsp(1003,48) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f11.setVar("star4");
      // /product_detail.jsp(1003,48) name = value type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f11.setValue(new org.apache.jasper.el.JspValueExpression("/product_detail.jsp(1003,48) '${star4 + 1}'",_jsp_getExpressionFactory().createValueExpression(_jspx_page_context.getELContext(),"${star4 + 1}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f11 = _jspx_th_c_005fset_005f11.doStartTag();
      if (_jspx_th_c_005fset_005f11.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f11);
      _jspx_th_c_005fset_005f11_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f11, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f11_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fif_005f2(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fforEach_005f0, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:if
    org.apache.taglibs.standard.tag.rt.core.IfTag _jspx_th_c_005fif_005f2 = (org.apache.taglibs.standard.tag.rt.core.IfTag) _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.IfTag.class);
    boolean _jspx_th_c_005fif_005f2_reused = false;
    try {
      _jspx_th_c_005fif_005f2.setPageContext(_jspx_page_context);
      _jspx_th_c_005fif_005f2.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fforEach_005f0);
      // /product_detail.jsp(1005,44) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fif_005f2.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${rv.rating == 3}", boolean.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null)).booleanValue());
      int _jspx_eval_c_005fif_005f2 = _jspx_th_c_005fif_005f2.doStartTag();
      if (_jspx_eval_c_005fif_005f2 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("                                                ");
          if (_jspx_meth_c_005fset_005f12(_jspx_th_c_005fif_005f2, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
            return true;
          out.write("\r\n");
          out.write("                                            ");
          int evalDoAfterBody = _jspx_th_c_005fif_005f2.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fif_005f2.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.reuse(_jspx_th_c_005fif_005f2);
      _jspx_th_c_005fif_005f2_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fif_005f2, _jsp_getInstanceManager(), _jspx_th_c_005fif_005f2_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fset_005f12(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fif_005f2, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f12 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f12_reused = false;
    try {
      _jspx_th_c_005fset_005f12.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f12.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fif_005f2);
      // /product_detail.jsp(1006,48) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f12.setVar("star3");
      // /product_detail.jsp(1006,48) name = value type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f12.setValue(new org.apache.jasper.el.JspValueExpression("/product_detail.jsp(1006,48) '${star3 + 1}'",_jsp_getExpressionFactory().createValueExpression(_jspx_page_context.getELContext(),"${star3 + 1}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f12 = _jspx_th_c_005fset_005f12.doStartTag();
      if (_jspx_th_c_005fset_005f12.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f12);
      _jspx_th_c_005fset_005f12_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f12, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f12_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fif_005f3(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fforEach_005f0, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:if
    org.apache.taglibs.standard.tag.rt.core.IfTag _jspx_th_c_005fif_005f3 = (org.apache.taglibs.standard.tag.rt.core.IfTag) _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.IfTag.class);
    boolean _jspx_th_c_005fif_005f3_reused = false;
    try {
      _jspx_th_c_005fif_005f3.setPageContext(_jspx_page_context);
      _jspx_th_c_005fif_005f3.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fforEach_005f0);
      // /product_detail.jsp(1008,44) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fif_005f3.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${rv.rating == 2}", boolean.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null)).booleanValue());
      int _jspx_eval_c_005fif_005f3 = _jspx_th_c_005fif_005f3.doStartTag();
      if (_jspx_eval_c_005fif_005f3 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("                                                ");
          if (_jspx_meth_c_005fset_005f13(_jspx_th_c_005fif_005f3, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
            return true;
          out.write("\r\n");
          out.write("                                            ");
          int evalDoAfterBody = _jspx_th_c_005fif_005f3.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fif_005f3.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.reuse(_jspx_th_c_005fif_005f3);
      _jspx_th_c_005fif_005f3_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fif_005f3, _jsp_getInstanceManager(), _jspx_th_c_005fif_005f3_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fset_005f13(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fif_005f3, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f13 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f13_reused = false;
    try {
      _jspx_th_c_005fset_005f13.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f13.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fif_005f3);
      // /product_detail.jsp(1009,48) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f13.setVar("star2");
      // /product_detail.jsp(1009,48) name = value type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f13.setValue(new org.apache.jasper.el.JspValueExpression("/product_detail.jsp(1009,48) '${star2 + 1}'",_jsp_getExpressionFactory().createValueExpression(_jspx_page_context.getELContext(),"${star2 + 1}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f13 = _jspx_th_c_005fset_005f13.doStartTag();
      if (_jspx_th_c_005fset_005f13.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f13);
      _jspx_th_c_005fset_005f13_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f13, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f13_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fif_005f4(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fforEach_005f0, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:if
    org.apache.taglibs.standard.tag.rt.core.IfTag _jspx_th_c_005fif_005f4 = (org.apache.taglibs.standard.tag.rt.core.IfTag) _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.IfTag.class);
    boolean _jspx_th_c_005fif_005f4_reused = false;
    try {
      _jspx_th_c_005fif_005f4.setPageContext(_jspx_page_context);
      _jspx_th_c_005fif_005f4.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fforEach_005f0);
      // /product_detail.jsp(1011,44) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fif_005f4.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${rv.rating == 1}", boolean.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null)).booleanValue());
      int _jspx_eval_c_005fif_005f4 = _jspx_th_c_005fif_005f4.doStartTag();
      if (_jspx_eval_c_005fif_005f4 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("                                                ");
          if (_jspx_meth_c_005fset_005f14(_jspx_th_c_005fif_005f4, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
            return true;
          out.write("\r\n");
          out.write("                                            ");
          int evalDoAfterBody = _jspx_th_c_005fif_005f4.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fif_005f4.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.reuse(_jspx_th_c_005fif_005f4);
      _jspx_th_c_005fif_005f4_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fif_005f4, _jsp_getInstanceManager(), _jspx_th_c_005fif_005f4_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fset_005f14(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fif_005f4, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f14 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f14_reused = false;
    try {
      _jspx_th_c_005fset_005f14.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f14.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fif_005f4);
      // /product_detail.jsp(1012,48) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f14.setVar("star1");
      // /product_detail.jsp(1012,48) name = value type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f14.setValue(new org.apache.jasper.el.JspValueExpression("/product_detail.jsp(1012,48) '${star1 + 1}'",_jsp_getExpressionFactory().createValueExpression(_jspx_page_context.getELContext(),"${star1 + 1}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f14 = _jspx_th_c_005fset_005f14.doStartTag();
      if (_jspx_th_c_005fset_005f14.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f14);
      _jspx_th_c_005fset_005f14_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f14, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f14_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fif_005f5(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fforEach_005f0, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:if
    org.apache.taglibs.standard.tag.rt.core.IfTag _jspx_th_c_005fif_005f5 = (org.apache.taglibs.standard.tag.rt.core.IfTag) _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.IfTag.class);
    boolean _jspx_th_c_005fif_005f5_reused = false;
    try {
      _jspx_th_c_005fif_005f5.setPageContext(_jspx_page_context);
      _jspx_th_c_005fif_005f5.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fforEach_005f0);
      // /product_detail.jsp(1014,44) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fif_005f5.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${not empty rv.comment}", boolean.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null)).booleanValue());
      int _jspx_eval_c_005fif_005f5 = _jspx_th_c_005fif_005f5.doStartTag();
      if (_jspx_eval_c_005fif_005f5 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("                                                ");
          if (_jspx_meth_c_005fset_005f15(_jspx_th_c_005fif_005f5, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
            return true;
          out.write("\r\n");
          out.write("                                            ");
          int evalDoAfterBody = _jspx_th_c_005fif_005f5.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fif_005f5.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.reuse(_jspx_th_c_005fif_005f5);
      _jspx_th_c_005fif_005f5_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fif_005f5, _jsp_getInstanceManager(), _jspx_th_c_005fif_005f5_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fset_005f15(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fif_005f5, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f15 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f15_reused = false;
    try {
      _jspx_th_c_005fset_005f15.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f15.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fif_005f5);
      // /product_detail.jsp(1015,48) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f15.setVar("hasCommentCount");
      // /product_detail.jsp(1015,48) name = value type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f15.setValue(new org.apache.jasper.el.JspValueExpression("/product_detail.jsp(1015,48) '${hasCommentCount + 1}'",_jsp_getExpressionFactory().createValueExpression(_jspx_page_context.getELContext(),"${hasCommentCount + 1}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f15 = _jspx_th_c_005fset_005f15.doStartTag();
      if (_jspx_th_c_005fset_005f15.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f15);
      _jspx_th_c_005fset_005f15_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f15, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f15_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fif_005f6(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fforEach_005f0, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:if
    org.apache.taglibs.standard.tag.rt.core.IfTag _jspx_th_c_005fif_005f6 = (org.apache.taglibs.standard.tag.rt.core.IfTag) _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.IfTag.class);
    boolean _jspx_th_c_005fif_005f6_reused = false;
    try {
      _jspx_th_c_005fif_005f6.setPageContext(_jspx_page_context);
      _jspx_th_c_005fif_005f6.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fforEach_005f0);
      // /product_detail.jsp(1017,44) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fif_005f6.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${rv.hasMedia}", boolean.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null)).booleanValue());
      int _jspx_eval_c_005fif_005f6 = _jspx_th_c_005fif_005f6.doStartTag();
      if (_jspx_eval_c_005fif_005f6 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("                                                ");
          if (_jspx_meth_c_005fset_005f16(_jspx_th_c_005fif_005f6, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f0))
            return true;
          out.write("\r\n");
          out.write("                                            ");
          int evalDoAfterBody = _jspx_th_c_005fif_005f6.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fif_005f6.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.reuse(_jspx_th_c_005fif_005f6);
      _jspx_th_c_005fif_005f6_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fif_005f6, _jsp_getInstanceManager(), _jspx_th_c_005fif_005f6_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fset_005f16(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fif_005f6, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f0)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f16 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f16_reused = false;
    try {
      _jspx_th_c_005fset_005f16.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f16.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fif_005f6);
      // /product_detail.jsp(1018,48) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f16.setVar("hasMediaCount");
      // /product_detail.jsp(1018,48) name = value type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f16.setValue(new org.apache.jasper.el.JspValueExpression("/product_detail.jsp(1018,48) '${hasMediaCount + 1}'",_jsp_getExpressionFactory().createValueExpression(_jspx_page_context.getELContext(),"${hasMediaCount + 1}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f16 = _jspx_th_c_005fset_005f16.doStartTag();
      if (_jspx_th_c_005fset_005f16.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f16);
      _jspx_th_c_005fset_005f16_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f16, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f16_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fset_005f17(jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f17 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    boolean _jspx_th_c_005fset_005f17_reused = false;
    try {
      _jspx_th_c_005fset_005f17.setPageContext(_jspx_page_context);
      _jspx_th_c_005fset_005f17.setParent(null);
      // /product_detail.jsp(1021,40) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f17.setVar("avgRating");
      // /product_detail.jsp(1021,40) name = value type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fset_005f17.setValue(new org.apache.jasper.el.JspValueExpression("/product_detail.jsp(1021,40) '${totalReviews > 0 ? sumRating / totalReviews : 0}'",_jsp_getExpressionFactory().createValueExpression(_jspx_page_context.getELContext(),"${totalReviews > 0 ? sumRating / totalReviews : 0}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int _jspx_eval_c_005fset_005f17 = _jspx_th_c_005fset_005f17.doStartTag();
      if (_jspx_th_c_005fset_005f17.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f17);
      _jspx_th_c_005fset_005f17_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fset_005f17, _jsp_getInstanceManager(), _jspx_th_c_005fset_005f17_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fchoose_005f0(jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:choose
    org.apache.taglibs.standard.tag.common.core.ChooseTag _jspx_th_c_005fchoose_005f0 = (org.apache.taglibs.standard.tag.common.core.ChooseTag) _005fjspx_005ftagPool_005fc_005fchoose.get(org.apache.taglibs.standard.tag.common.core.ChooseTag.class);
    boolean _jspx_th_c_005fchoose_005f0_reused = false;
    try {
      _jspx_th_c_005fchoose_005f0.setPageContext(_jspx_page_context);
      _jspx_th_c_005fchoose_005f0.setParent(null);
      int _jspx_eval_c_005fchoose_005f0 = _jspx_th_c_005fchoose_005f0.doStartTag();
      if (_jspx_eval_c_005fchoose_005f0 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("                                                            ");
          if (_jspx_meth_c_005fwhen_005f0(_jspx_th_c_005fchoose_005f0, _jspx_page_context))
            return true;
          out.write("\r\n");
          out.write("                                                            ");
          if (_jspx_meth_c_005fotherwise_005f0(_jspx_th_c_005fchoose_005f0, _jspx_page_context))
            return true;
          out.write("\r\n");
          out.write("                                                        ");
          int evalDoAfterBody = _jspx_th_c_005fchoose_005f0.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fchoose_005f0.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fchoose.reuse(_jspx_th_c_005fchoose_005f0);
      _jspx_th_c_005fchoose_005f0_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fchoose_005f0, _jsp_getInstanceManager(), _jspx_th_c_005fchoose_005f0_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fwhen_005f0(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f0, jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:when
    org.apache.taglibs.standard.tag.rt.core.WhenTag _jspx_th_c_005fwhen_005f0 = (org.apache.taglibs.standard.tag.rt.core.WhenTag) _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.WhenTag.class);
    boolean _jspx_th_c_005fwhen_005f0_reused = false;
    try {
      _jspx_th_c_005fwhen_005f0.setPageContext(_jspx_page_context);
      _jspx_th_c_005fwhen_005f0.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f0);
      // /product_detail.jsp(1031,60) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fwhen_005f0.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${totalReviews > 0}", boolean.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null)).booleanValue());
      int _jspx_eval_c_005fwhen_005f0 = _jspx_th_c_005fwhen_005f0.doStartTag();
      if (_jspx_eval_c_005fwhen_005f0 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("                                                                ");
          if (_jspx_meth_fmt_005fformatNumber_005f0(_jspx_th_c_005fwhen_005f0, _jspx_page_context))
            return true;
          out.write("\r\n");
          out.write("                                                            ");
          int evalDoAfterBody = _jspx_th_c_005fwhen_005f0.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fwhen_005f0.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.reuse(_jspx_th_c_005fwhen_005f0);
      _jspx_th_c_005fwhen_005f0_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fwhen_005f0, _jsp_getInstanceManager(), _jspx_th_c_005fwhen_005f0_reused);
    }
    return false;
  }

  private boolean _jspx_meth_fmt_005fformatNumber_005f0(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fwhen_005f0, jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    //  fmt:formatNumber
    org.apache.taglibs.standard.tag.rt.fmt.FormatNumberTag _jspx_th_fmt_005fformatNumber_005f0 = (org.apache.taglibs.standard.tag.rt.fmt.FormatNumberTag) _005fjspx_005ftagPool_005ffmt_005fformatNumber_0026_005fvalue_005fmaxFractionDigits_005fnobody.get(org.apache.taglibs.standard.tag.rt.fmt.FormatNumberTag.class);
    boolean _jspx_th_fmt_005fformatNumber_005f0_reused = false;
    try {
      _jspx_th_fmt_005fformatNumber_005f0.setPageContext(_jspx_page_context);
      _jspx_th_fmt_005fformatNumber_005f0.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fwhen_005f0);
      // /product_detail.jsp(1032,64) name = value type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_fmt_005fformatNumber_005f0.setValue((java.lang.Object) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${avgRating}", java.lang.Object.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      // /product_detail.jsp(1032,64) name = maxFractionDigits type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_fmt_005fformatNumber_005f0.setMaxFractionDigits(1);
      int _jspx_eval_fmt_005fformatNumber_005f0 = _jspx_th_fmt_005fformatNumber_005f0.doStartTag();
      if (_jspx_th_fmt_005fformatNumber_005f0.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005ffmt_005fformatNumber_0026_005fvalue_005fmaxFractionDigits_005fnobody.reuse(_jspx_th_fmt_005fformatNumber_005f0);
      _jspx_th_fmt_005fformatNumber_005f0_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_fmt_005fformatNumber_005f0, _jsp_getInstanceManager(), _jspx_th_fmt_005fformatNumber_005f0_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fotherwise_005f0(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f0, jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:otherwise
    org.apache.taglibs.standard.tag.common.core.OtherwiseTag _jspx_th_c_005fotherwise_005f0 = (org.apache.taglibs.standard.tag.common.core.OtherwiseTag) _005fjspx_005ftagPool_005fc_005fotherwise.get(org.apache.taglibs.standard.tag.common.core.OtherwiseTag.class);
    boolean _jspx_th_c_005fotherwise_005f0_reused = false;
    try {
      _jspx_th_c_005fotherwise_005f0.setPageContext(_jspx_page_context);
      _jspx_th_c_005fotherwise_005f0.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f0);
      int _jspx_eval_c_005fotherwise_005f0 = _jspx_th_c_005fotherwise_005f0.doStartTag();
      if (_jspx_eval_c_005fotherwise_005f0 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write('0');
          int evalDoAfterBody = _jspx_th_c_005fotherwise_005f0.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fotherwise_005f0.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fotherwise.reuse(_jspx_th_c_005fotherwise_005f0);
      _jspx_th_c_005fotherwise_005f0_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fotherwise_005f0, _jsp_getInstanceManager(), _jspx_th_c_005fotherwise_005f0_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fforEach_005f1(jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:forEach
    org.apache.taglibs.standard.tag.rt.core.ForEachTag _jspx_th_c_005fforEach_005f1 = (org.apache.taglibs.standard.tag.rt.core.ForEachTag) _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fend_005fbegin.get(org.apache.taglibs.standard.tag.rt.core.ForEachTag.class);
    boolean _jspx_th_c_005fforEach_005f1_reused = false;
    try {
      _jspx_th_c_005fforEach_005f1.setPageContext(_jspx_page_context);
      _jspx_th_c_005fforEach_005f1.setParent(null);
      // /product_detail.jsp(1042,52) name = begin type = int reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f1.setBegin(1);
      // /product_detail.jsp(1042,52) name = end type = int reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f1.setEnd(5);
      // /product_detail.jsp(1042,52) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f1.setVar("s");
      int[] _jspx_push_body_count_c_005fforEach_005f1 = new int[] { 0 };
      try {
        int _jspx_eval_c_005fforEach_005f1 = _jspx_th_c_005fforEach_005f1.doStartTag();
        if (_jspx_eval_c_005fforEach_005f1 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
          do {
            out.write("\r\n");
            out.write("                                                        ");
            if (_jspx_meth_c_005fchoose_005f1(_jspx_th_c_005fforEach_005f1, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f1))
              return true;
            out.write("\r\n");
            out.write("                                                    ");
            int evalDoAfterBody = _jspx_th_c_005fforEach_005f1.doAfterBody();
            if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
              break;
          } while (true);
        }
        if (_jspx_th_c_005fforEach_005f1.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
          return true;
        }
      } catch (java.lang.Throwable _jspx_exception) {
        while (_jspx_push_body_count_c_005fforEach_005f1[0]-- > 0)
          out = _jspx_page_context.popBody();
        _jspx_th_c_005fforEach_005f1.doCatch(_jspx_exception);
      } finally {
        _jspx_th_c_005fforEach_005f1.doFinally();
      }
      _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fend_005fbegin.reuse(_jspx_th_c_005fforEach_005f1);
      _jspx_th_c_005fforEach_005f1_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fforEach_005f1, _jsp_getInstanceManager(), _jspx_th_c_005fforEach_005f1_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fchoose_005f1(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fforEach_005f1, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f1)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:choose
    org.apache.taglibs.standard.tag.common.core.ChooseTag _jspx_th_c_005fchoose_005f1 = (org.apache.taglibs.standard.tag.common.core.ChooseTag) _005fjspx_005ftagPool_005fc_005fchoose.get(org.apache.taglibs.standard.tag.common.core.ChooseTag.class);
    boolean _jspx_th_c_005fchoose_005f1_reused = false;
    try {
      _jspx_th_c_005fchoose_005f1.setPageContext(_jspx_page_context);
      _jspx_th_c_005fchoose_005f1.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fforEach_005f1);
      int _jspx_eval_c_005fchoose_005f1 = _jspx_th_c_005fchoose_005f1.doStartTag();
      if (_jspx_eval_c_005fchoose_005f1 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("                                                            ");
          if (_jspx_meth_c_005fwhen_005f1(_jspx_th_c_005fchoose_005f1, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f1))
            return true;
          out.write("\r\n");
          out.write("                                                            ");
          if (_jspx_meth_c_005fwhen_005f2(_jspx_th_c_005fchoose_005f1, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f1))
            return true;
          out.write("\r\n");
          out.write("                                                            ");
          if (_jspx_meth_c_005fotherwise_005f1(_jspx_th_c_005fchoose_005f1, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f1))
            return true;
          out.write("\r\n");
          out.write("                                                        ");
          int evalDoAfterBody = _jspx_th_c_005fchoose_005f1.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fchoose_005f1.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fchoose.reuse(_jspx_th_c_005fchoose_005f1);
      _jspx_th_c_005fchoose_005f1_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fchoose_005f1, _jsp_getInstanceManager(), _jspx_th_c_005fchoose_005f1_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fwhen_005f1(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f1, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f1)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:when
    org.apache.taglibs.standard.tag.rt.core.WhenTag _jspx_th_c_005fwhen_005f1 = (org.apache.taglibs.standard.tag.rt.core.WhenTag) _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.WhenTag.class);
    boolean _jspx_th_c_005fwhen_005f1_reused = false;
    try {
      _jspx_th_c_005fwhen_005f1.setPageContext(_jspx_page_context);
      _jspx_th_c_005fwhen_005f1.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f1);
      // /product_detail.jsp(1044,60) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fwhen_005f1.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${s <= avgRating}", boolean.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null)).booleanValue());
      int _jspx_eval_c_005fwhen_005f1 = _jspx_th_c_005fwhen_005f1.doStartTag();
      if (_jspx_eval_c_005fwhen_005f1 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("<i class=\"fas fa-star\"></i>\r\n");
          out.write("                                                            ");
          int evalDoAfterBody = _jspx_th_c_005fwhen_005f1.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fwhen_005f1.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.reuse(_jspx_th_c_005fwhen_005f1);
      _jspx_th_c_005fwhen_005f1_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fwhen_005f1, _jsp_getInstanceManager(), _jspx_th_c_005fwhen_005f1_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fwhen_005f2(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f1, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f1)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:when
    org.apache.taglibs.standard.tag.rt.core.WhenTag _jspx_th_c_005fwhen_005f2 = (org.apache.taglibs.standard.tag.rt.core.WhenTag) _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.WhenTag.class);
    boolean _jspx_th_c_005fwhen_005f2_reused = false;
    try {
      _jspx_th_c_005fwhen_005f2.setPageContext(_jspx_page_context);
      _jspx_th_c_005fwhen_005f2.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f1);
      // /product_detail.jsp(1046,60) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fwhen_005f2.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${s <= avgRating + 0.5}", boolean.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null)).booleanValue());
      int _jspx_eval_c_005fwhen_005f2 = _jspx_th_c_005fwhen_005f2.doStartTag();
      if (_jspx_eval_c_005fwhen_005f2 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("<i\r\n");
          out.write("                                                                    class=\"fas fa-star-half-alt\"></i>");
          int evalDoAfterBody = _jspx_th_c_005fwhen_005f2.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fwhen_005f2.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.reuse(_jspx_th_c_005fwhen_005f2);
      _jspx_th_c_005fwhen_005f2_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fwhen_005f2, _jsp_getInstanceManager(), _jspx_th_c_005fwhen_005f2_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fotherwise_005f1(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f1, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f1)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:otherwise
    org.apache.taglibs.standard.tag.common.core.OtherwiseTag _jspx_th_c_005fotherwise_005f1 = (org.apache.taglibs.standard.tag.common.core.OtherwiseTag) _005fjspx_005ftagPool_005fc_005fotherwise.get(org.apache.taglibs.standard.tag.common.core.OtherwiseTag.class);
    boolean _jspx_th_c_005fotherwise_005f1_reused = false;
    try {
      _jspx_th_c_005fotherwise_005f1.setPageContext(_jspx_page_context);
      _jspx_th_c_005fotherwise_005f1.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f1);
      int _jspx_eval_c_005fotherwise_005f1 = _jspx_th_c_005fotherwise_005f1.doStartTag();
      if (_jspx_eval_c_005fotherwise_005f1 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("<i class=\"far fa-star\"></i>");
          int evalDoAfterBody = _jspx_th_c_005fotherwise_005f1.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fotherwise_005f1.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fotherwise.reuse(_jspx_th_c_005fotherwise_005f1);
      _jspx_th_c_005fotherwise_005f1_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fotherwise_005f1, _jsp_getInstanceManager(), _jspx_th_c_005fotherwise_005f1_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fchoose_005f2(jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:choose
    org.apache.taglibs.standard.tag.common.core.ChooseTag _jspx_th_c_005fchoose_005f2 = (org.apache.taglibs.standard.tag.common.core.ChooseTag) _005fjspx_005ftagPool_005fc_005fchoose.get(org.apache.taglibs.standard.tag.common.core.ChooseTag.class);
    boolean _jspx_th_c_005fchoose_005f2_reused = false;
    try {
      _jspx_th_c_005fchoose_005f2.setPageContext(_jspx_page_context);
      _jspx_th_c_005fchoose_005f2.setParent(null);
      int _jspx_eval_c_005fchoose_005f2 = _jspx_th_c_005fchoose_005f2.doStartTag();
      if (_jspx_eval_c_005fchoose_005f2 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("                                            ");
          if (_jspx_meth_c_005fwhen_005f3(_jspx_th_c_005fchoose_005f2, _jspx_page_context))
            return true;
          out.write("\r\n");
          out.write("                                            ");
          if (_jspx_meth_c_005fotherwise_005f2(_jspx_th_c_005fchoose_005f2, _jspx_page_context))
            return true;
          out.write("\r\n");
          out.write("                                        ");
          int evalDoAfterBody = _jspx_th_c_005fchoose_005f2.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fchoose_005f2.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fchoose.reuse(_jspx_th_c_005fchoose_005f2);
      _jspx_th_c_005fchoose_005f2_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fchoose_005f2, _jsp_getInstanceManager(), _jspx_th_c_005fchoose_005f2_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fwhen_005f3(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f2, jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:when
    org.apache.taglibs.standard.tag.rt.core.WhenTag _jspx_th_c_005fwhen_005f3 = (org.apache.taglibs.standard.tag.rt.core.WhenTag) _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.WhenTag.class);
    boolean _jspx_th_c_005fwhen_005f3_reused = false;
    try {
      _jspx_th_c_005fwhen_005f3.setPageContext(_jspx_page_context);
      _jspx_th_c_005fwhen_005f3.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f2);
      // /product_detail.jsp(1083,44) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fwhen_005f3.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${empty reviews}", boolean.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null)).booleanValue());
      int _jspx_eval_c_005fwhen_005f3 = _jspx_th_c_005fwhen_005f3.doStartTag();
      if (_jspx_eval_c_005fwhen_005f3 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("                                                <!-- Empty State for Reviews -->\r\n");
          out.write("                                                <div\r\n");
          out.write("                                                    style=\"display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 50px 0;\">\r\n");
          out.write("                                                    <img src=\"https://deo.shopeemobile.com/shopee/shopee-pcmall-live-sg/productdetailpage/18cc857e49eec2bd9215031b26829ced.png\"\r\n");
          out.write("                                                        alt=\"No reviews\"\r\n");
          out.write("                                                        style=\"width: 100px; height: 100px; margin-bottom: 20px;\">\r\n");
          out.write("                                                    <div style=\"font-size: 16px; color: rgba(0,0,0,.87);\">Chưa có đánh\r\n");
          out.write("                                                        giá</div>\r\n");
          out.write("                                                </div>\r\n");
          out.write("                                            ");
          int evalDoAfterBody = _jspx_th_c_005fwhen_005f3.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fwhen_005f3.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.reuse(_jspx_th_c_005fwhen_005f3);
      _jspx_th_c_005fwhen_005f3_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fwhen_005f3, _jsp_getInstanceManager(), _jspx_th_c_005fwhen_005f3_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fotherwise_005f2(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f2, jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:otherwise
    org.apache.taglibs.standard.tag.common.core.OtherwiseTag _jspx_th_c_005fotherwise_005f2 = (org.apache.taglibs.standard.tag.common.core.OtherwiseTag) _005fjspx_005ftagPool_005fc_005fotherwise.get(org.apache.taglibs.standard.tag.common.core.OtherwiseTag.class);
    boolean _jspx_th_c_005fotherwise_005f2_reused = false;
    try {
      _jspx_th_c_005fotherwise_005f2.setPageContext(_jspx_page_context);
      _jspx_th_c_005fotherwise_005f2.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f2);
      int _jspx_eval_c_005fotherwise_005f2 = _jspx_th_c_005fotherwise_005f2.doStartTag();
      if (_jspx_eval_c_005fotherwise_005f2 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("                                                <!-- Review List -->\r\n");
          out.write("                                                <div class=\"review-list\">\r\n");
          out.write("                                                    ");
          if (_jspx_meth_c_005fforEach_005f2(_jspx_th_c_005fotherwise_005f2, _jspx_page_context))
            return true;
          out.write("\r\n");
          out.write("                                                </div>\r\n");
          out.write("                                                <!-- Empty state khi filter không có kết quả -->\r\n");
          out.write("                                                <div id=\"reviewFilterEmpty\"\r\n");
          out.write("                                                    style=\"display:none; text-align:center; padding: 40px 0; color: rgba(0,0,0,.54);\">\r\n");
          out.write("                                                    <i class=\"far fa-comment-dots\"\r\n");
          out.write("                                                        style=\"font-size: 40px; margin-bottom: 10px; color: #ddd;\"></i>\r\n");
          out.write("                                                    <div style=\"font-size: 14px;\">Không có đánh giá nào phù hợp với bộ\r\n");
          out.write("                                                        lọc</div>\r\n");
          out.write("                                                </div>\r\n");
          out.write("                                            ");
          int evalDoAfterBody = _jspx_th_c_005fotherwise_005f2.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fotherwise_005f2.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fotherwise.reuse(_jspx_th_c_005fotherwise_005f2);
      _jspx_th_c_005fotherwise_005f2_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fotherwise_005f2, _jsp_getInstanceManager(), _jspx_th_c_005fotherwise_005f2_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fforEach_005f2(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fotherwise_005f2, jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:forEach
    org.apache.taglibs.standard.tag.rt.core.ForEachTag _jspx_th_c_005fforEach_005f2 = (org.apache.taglibs.standard.tag.rt.core.ForEachTag) _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems.get(org.apache.taglibs.standard.tag.rt.core.ForEachTag.class);
    boolean _jspx_th_c_005fforEach_005f2_reused = false;
    try {
      _jspx_th_c_005fforEach_005f2.setPageContext(_jspx_page_context);
      _jspx_th_c_005fforEach_005f2.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fotherwise_005f2);
      // /product_detail.jsp(1097,52) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f2.setVar("r");
      // /product_detail.jsp(1097,52) name = items type = jakarta.el.ValueExpression reqTime = true required = false fragment = false deferredValue = true expectedTypeName = java.lang.Object deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f2.setItems(new org.apache.jasper.el.JspValueExpression("/product_detail.jsp(1097,52) '${reviews}'",_jsp_getExpressionFactory().createValueExpression(_jspx_page_context.getELContext(),"${reviews}",java.lang.Object.class)).getValue(_jspx_page_context.getELContext()));
      int[] _jspx_push_body_count_c_005fforEach_005f2 = new int[] { 0 };
      try {
        int _jspx_eval_c_005fforEach_005f2 = _jspx_th_c_005fforEach_005f2.doStartTag();
        if (_jspx_eval_c_005fforEach_005f2 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
          do {
            out.write("\r\n");
            out.write("                                                        <div class=\"review-item\" data-rating=\"");
            out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${r.rating}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
            out.write("\"\r\n");
            out.write("                                                            data-has-comment=\"");
            out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${not empty r.comment}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
            out.write("\"\r\n");
            out.write("                                                            data-has-media=\"");
            out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${r.hasMedia}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
            out.write("\"\r\n");
            out.write("                                                            style=\"display: flex; gap: 10px; padding: 15px 0; border-bottom: 1px solid rgba(0,0,0,.09);\">\r\n");
            out.write("                                                            <div class=\"user-avatar\"\r\n");
            out.write("                                                                style=\"width: 40px; height: 40px; border-radius: 50%; overflow: hidden; background: #f5f5f5; flex-shrink: 0; display: flex; align-items: center; justify-content: center;\">\r\n");
            out.write("                                                                <i class=\"fas fa-user\"\r\n");
            out.write("                                                                    style=\"color: #c6c6c6; font-size: 20px;\"></i>\r\n");
            out.write("                                                            </div>\r\n");
            out.write("                                                            <div class=\"review-main\" style=\"flex: 1;\">\r\n");
            out.write("                                                                <div class=\"username\"\r\n");
            out.write("                                                                    style=\"font-size: 12px; color: rgba(0,0,0,.87); margin-bottom: 4px;\">\r\n");
            out.write("                                                                    ");
            out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${r.username}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
            out.write("</div>\r\n");
            out.write("                                                                <div class=\"stars\"\r\n");
            out.write("                                                                    style=\"color: #ee4d2d; font-size: 10px; margin-bottom: 4px;\">\r\n");
            out.write("                                                                    ");
            if (_jspx_meth_c_005fforEach_005f3(_jspx_th_c_005fforEach_005f2, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f2))
              return true;
            out.write("\r\n");
            out.write("                                                                </div>\r\n");
            out.write("                                                                <div class=\"time-variant\"\r\n");
            out.write("                                                                    style=\"font-size: 12px; color: rgba(0,0,0,.54); margin-bottom: 12px;\">\r\n");
            out.write("                                                                    ");
            if (_jspx_meth_fmt_005fformatDate_005f0(_jspx_th_c_005fforEach_005f2, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f2))
              return true;
            out.write(" | Phân loại hàng:\r\n");
            out.write("                                                                    Mặc định\r\n");
            out.write("                                                                </div>\r\n");
            out.write("                                                                <div class=\"review-content\"\r\n");
            out.write("                                                                    style=\"font-size: 14px; color: rgba(0,0,0,.87); line-height: 1.5; white-space: pre-wrap;\">\r\n");
            out.write("                                                                    ");
            out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${r.comment}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
            out.write("</div>\r\n");
            out.write("\r\n");
            out.write("                                                                ");
            if (_jspx_meth_c_005fif_005f7(_jspx_th_c_005fforEach_005f2, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f2))
              return true;
            out.write("\r\n");
            out.write("\r\n");
            out.write("                                                                <div class=\"review-actions\"\r\n");
            out.write("                                                                    style=\"margin-top: 15px; display: flex; gap: 20px; font-size: 14px; color: rgba(0,0,0,.4);\">\r\n");
            out.write("                                                                    <span style=\"cursor: pointer;\"><i\r\n");
            out.write("                                                                            class=\"far fa-thumbs-up\"></i> Hữu\r\n");
            out.write("                                                                        ích?</span>\r\n");
            out.write("                                                                </div>\r\n");
            out.write("                                                            </div>\r\n");
            out.write("                                                        </div>\r\n");
            out.write("                                                    ");
            int evalDoAfterBody = _jspx_th_c_005fforEach_005f2.doAfterBody();
            if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
              break;
          } while (true);
        }
        if (_jspx_th_c_005fforEach_005f2.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
          return true;
        }
      } catch (java.lang.Throwable _jspx_exception) {
        while (_jspx_push_body_count_c_005fforEach_005f2[0]-- > 0)
          out = _jspx_page_context.popBody();
        _jspx_th_c_005fforEach_005f2.doCatch(_jspx_exception);
      } finally {
        _jspx_th_c_005fforEach_005f2.doFinally();
      }
      _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fitems.reuse(_jspx_th_c_005fforEach_005f2);
      _jspx_th_c_005fforEach_005f2_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fforEach_005f2, _jsp_getInstanceManager(), _jspx_th_c_005fforEach_005f2_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fforEach_005f3(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fforEach_005f2, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f2)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:forEach
    org.apache.taglibs.standard.tag.rt.core.ForEachTag _jspx_th_c_005fforEach_005f3 = (org.apache.taglibs.standard.tag.rt.core.ForEachTag) _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fend_005fbegin.get(org.apache.taglibs.standard.tag.rt.core.ForEachTag.class);
    boolean _jspx_th_c_005fforEach_005f3_reused = false;
    try {
      _jspx_th_c_005fforEach_005f3.setPageContext(_jspx_page_context);
      _jspx_th_c_005fforEach_005f3.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fforEach_005f2);
      // /product_detail.jsp(1113,68) name = begin type = int reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f3.setBegin(1);
      // /product_detail.jsp(1113,68) name = end type = int reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f3.setEnd(5);
      // /product_detail.jsp(1113,68) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fforEach_005f3.setVar("i");
      int[] _jspx_push_body_count_c_005fforEach_005f3 = new int[] { 0 };
      try {
        int _jspx_eval_c_005fforEach_005f3 = _jspx_th_c_005fforEach_005f3.doStartTag();
        if (_jspx_eval_c_005fforEach_005f3 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
          do {
            out.write("\r\n");
            out.write("                                                                        ");
            if (_jspx_meth_c_005fchoose_005f3(_jspx_th_c_005fforEach_005f3, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f3))
              return true;
            out.write("\r\n");
            out.write("                                                                    ");
            int evalDoAfterBody = _jspx_th_c_005fforEach_005f3.doAfterBody();
            if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
              break;
          } while (true);
        }
        if (_jspx_th_c_005fforEach_005f3.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
          return true;
        }
      } catch (java.lang.Throwable _jspx_exception) {
        while (_jspx_push_body_count_c_005fforEach_005f3[0]-- > 0)
          out = _jspx_page_context.popBody();
        _jspx_th_c_005fforEach_005f3.doCatch(_jspx_exception);
      } finally {
        _jspx_th_c_005fforEach_005f3.doFinally();
      }
      _005fjspx_005ftagPool_005fc_005fforEach_0026_005fvar_005fend_005fbegin.reuse(_jspx_th_c_005fforEach_005f3);
      _jspx_th_c_005fforEach_005f3_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fforEach_005f3, _jsp_getInstanceManager(), _jspx_th_c_005fforEach_005f3_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fchoose_005f3(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fforEach_005f3, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f3)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:choose
    org.apache.taglibs.standard.tag.common.core.ChooseTag _jspx_th_c_005fchoose_005f3 = (org.apache.taglibs.standard.tag.common.core.ChooseTag) _005fjspx_005ftagPool_005fc_005fchoose.get(org.apache.taglibs.standard.tag.common.core.ChooseTag.class);
    boolean _jspx_th_c_005fchoose_005f3_reused = false;
    try {
      _jspx_th_c_005fchoose_005f3.setPageContext(_jspx_page_context);
      _jspx_th_c_005fchoose_005f3.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fforEach_005f3);
      int _jspx_eval_c_005fchoose_005f3 = _jspx_th_c_005fchoose_005f3.doStartTag();
      if (_jspx_eval_c_005fchoose_005f3 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("                                                                            ");
          if (_jspx_meth_c_005fwhen_005f4(_jspx_th_c_005fchoose_005f3, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f3))
            return true;
          out.write("\r\n");
          out.write("                                                                            ");
          if (_jspx_meth_c_005fotherwise_005f3(_jspx_th_c_005fchoose_005f3, _jspx_page_context, _jspx_push_body_count_c_005fforEach_005f3))
            return true;
          out.write("\r\n");
          out.write("                                                                        ");
          int evalDoAfterBody = _jspx_th_c_005fchoose_005f3.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fchoose_005f3.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fchoose.reuse(_jspx_th_c_005fchoose_005f3);
      _jspx_th_c_005fchoose_005f3_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fchoose_005f3, _jsp_getInstanceManager(), _jspx_th_c_005fchoose_005f3_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fwhen_005f4(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f3, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f3)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:when
    org.apache.taglibs.standard.tag.rt.core.WhenTag _jspx_th_c_005fwhen_005f4 = (org.apache.taglibs.standard.tag.rt.core.WhenTag) _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.WhenTag.class);
    boolean _jspx_th_c_005fwhen_005f4_reused = false;
    try {
      _jspx_th_c_005fwhen_005f4.setPageContext(_jspx_page_context);
      _jspx_th_c_005fwhen_005f4.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f3);
      // /product_detail.jsp(1115,76) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fwhen_005f4.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${i <= r.rating}", boolean.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null)).booleanValue());
      int _jspx_eval_c_005fwhen_005f4 = _jspx_th_c_005fwhen_005f4.doStartTag();
      if (_jspx_eval_c_005fwhen_005f4 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("                                                                                <i class=\"fas fa-star\"\r\n");
          out.write("                                                                                    style=\"margin-right: 2px;\"></i>\r\n");
          out.write("                                                                            ");
          int evalDoAfterBody = _jspx_th_c_005fwhen_005f4.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fwhen_005f4.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fwhen_0026_005ftest.reuse(_jspx_th_c_005fwhen_005f4);
      _jspx_th_c_005fwhen_005f4_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fwhen_005f4, _jsp_getInstanceManager(), _jspx_th_c_005fwhen_005f4_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fotherwise_005f3(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fchoose_005f3, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f3)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:otherwise
    org.apache.taglibs.standard.tag.common.core.OtherwiseTag _jspx_th_c_005fotherwise_005f3 = (org.apache.taglibs.standard.tag.common.core.OtherwiseTag) _005fjspx_005ftagPool_005fc_005fotherwise.get(org.apache.taglibs.standard.tag.common.core.OtherwiseTag.class);
    boolean _jspx_th_c_005fotherwise_005f3_reused = false;
    try {
      _jspx_th_c_005fotherwise_005f3.setPageContext(_jspx_page_context);
      _jspx_th_c_005fotherwise_005f3.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fchoose_005f3);
      int _jspx_eval_c_005fotherwise_005f3 = _jspx_th_c_005fotherwise_005f3.doStartTag();
      if (_jspx_eval_c_005fotherwise_005f3 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("                                                                                <i class=\"far fa-star\"\r\n");
          out.write("                                                                                    style=\"margin-right: 2px;\"></i>\r\n");
          out.write("                                                                            ");
          int evalDoAfterBody = _jspx_th_c_005fotherwise_005f3.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fotherwise_005f3.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fotherwise.reuse(_jspx_th_c_005fotherwise_005f3);
      _jspx_th_c_005fotherwise_005f3_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fotherwise_005f3, _jsp_getInstanceManager(), _jspx_th_c_005fotherwise_005f3_reused);
    }
    return false;
  }

  private boolean _jspx_meth_fmt_005fformatDate_005f0(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fforEach_005f2, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f2)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    //  fmt:formatDate
    org.apache.taglibs.standard.tag.rt.fmt.FormatDateTag _jspx_th_fmt_005fformatDate_005f0 = (org.apache.taglibs.standard.tag.rt.fmt.FormatDateTag) _005fjspx_005ftagPool_005ffmt_005fformatDate_0026_005fvalue_005fpattern_005fnobody.get(org.apache.taglibs.standard.tag.rt.fmt.FormatDateTag.class);
    boolean _jspx_th_fmt_005fformatDate_005f0_reused = false;
    try {
      _jspx_th_fmt_005fformatDate_005f0.setPageContext(_jspx_page_context);
      _jspx_th_fmt_005fformatDate_005f0.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fforEach_005f2);
      // /product_detail.jsp(1128,68) name = value type = null reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_fmt_005fformatDate_005f0.setValue((java.util.Date) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${r.createdAt}", java.util.Date.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
      // /product_detail.jsp(1128,68) name = pattern type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_fmt_005fformatDate_005f0.setPattern("yyyy-MM-dd HH:mm");
      int _jspx_eval_fmt_005fformatDate_005f0 = _jspx_th_fmt_005fformatDate_005f0.doStartTag();
      if (_jspx_th_fmt_005fformatDate_005f0.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005ffmt_005fformatDate_0026_005fvalue_005fpattern_005fnobody.reuse(_jspx_th_fmt_005fformatDate_005f0);
      _jspx_th_fmt_005fformatDate_005f0_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_fmt_005fformatDate_005f0, _jsp_getInstanceManager(), _jspx_th_fmt_005fformatDate_005f0_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fif_005f7(jakarta.servlet.jsp.tagext.JspTag _jspx_th_c_005fforEach_005f2, jakarta.servlet.jsp.PageContext _jspx_page_context, int[] _jspx_push_body_count_c_005fforEach_005f2)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:if
    org.apache.taglibs.standard.tag.rt.core.IfTag _jspx_th_c_005fif_005f7 = (org.apache.taglibs.standard.tag.rt.core.IfTag) _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.IfTag.class);
    boolean _jspx_th_c_005fif_005f7_reused = false;
    try {
      _jspx_th_c_005fif_005f7.setPageContext(_jspx_page_context);
      _jspx_th_c_005fif_005f7.setParent((jakarta.servlet.jsp.tagext.Tag) _jspx_th_c_005fforEach_005f2);
      // /product_detail.jsp(1136,64) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fif_005f7.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${r.hasMedia}", boolean.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null)).booleanValue());
      int _jspx_eval_c_005fif_005f7 = _jspx_th_c_005fif_005f7.doStartTag();
      if (_jspx_eval_c_005fif_005f7 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("                                                                    <div class=\"review-media\"\r\n");
          out.write("                                                                        style=\"margin-top: 15px; display: flex; gap: 10px;\">\r\n");
          out.write("                                                                        <div\r\n");
          out.write("                                                                            style=\"width: 72px; height: 72px; cursor: pointer;\">\r\n");
          out.write("                                                                            <img src=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${detail.imageUrl}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
          out.write("\"\r\n");
          out.write("                                                                                style=\"width: 100%; height: 100%; object-fit: cover;\">\r\n");
          out.write("                                                                        </div>\r\n");
          out.write("                                                                    </div>\r\n");
          out.write("                                                                ");
          int evalDoAfterBody = _jspx_th_c_005fif_005f7.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fif_005f7.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.reuse(_jspx_th_c_005fif_005f7);
      _jspx_th_c_005fif_005f7_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fif_005f7, _jsp_getInstanceManager(), _jspx_th_c_005fif_005f7_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fif_005f8(jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:if
    org.apache.taglibs.standard.tag.rt.core.IfTag _jspx_th_c_005fif_005f8 = (org.apache.taglibs.standard.tag.rt.core.IfTag) _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.IfTag.class);
    boolean _jspx_th_c_005fif_005f8_reused = false;
    try {
      _jspx_th_c_005fif_005f8.setPageContext(_jspx_page_context);
      _jspx_th_c_005fif_005f8.setParent(null);
      // /product_detail.jsp(1172,32) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fif_005f8.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${not empty sessionScope.account}", boolean.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null)).booleanValue());
      int _jspx_eval_c_005fif_005f8 = _jspx_th_c_005fif_005f8.doStartTag();
      if (_jspx_eval_c_005fif_005f8 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("                                    <div class=\"section-box\" style=\"margin-top: 20px;\">\r\n");
          out.write("                                        <div class=\"section-header\"\r\n");
          out.write("                                            style=\"background: #fafafa; padding: 10px 15px; margin: -25px -25px 20px -25px; border-bottom: 1px solid rgba(0,0,0,.05);\">\r\n");
          out.write("                                            VIẾT ĐÁNH GIÁ SẢN PHẨM\r\n");
          out.write("                                        </div>\r\n");
          out.write("                                        <form action=\"submit_review\" method=\"post\"\r\n");
          out.write("                                            style=\"display: flex; flex-direction: column; gap: 15px;\">\r\n");
          out.write("                                            <input type=\"hidden\" name=\"productId\" value=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${detail.id}", java.lang.String.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null));
          out.write("\">\r\n");
          out.write("                                            <div>\r\n");
          out.write("                                                <label\r\n");
          out.write("                                                    style=\"font-size: 14px; color: rgba(0,0,0,.87); margin-bottom: 8px; display: block;\">Chọn\r\n");
          out.write("                                                    mức độ đánh giá:</label>\r\n");
          out.write("                                                <div class=\"rating-input\"\r\n");
          out.write("                                                    style=\"color: #ee4d2d; font-size: 24px; cursor: pointer; display: flex; gap: 5px;\">\r\n");
          out.write("                                                    <i class=\"fas fa-star rating-star-input\" data-value=\"1\"></i>\r\n");
          out.write("                                                    <i class=\"fas fa-star rating-star-input\" data-value=\"2\"></i>\r\n");
          out.write("                                                    <i class=\"fas fa-star rating-star-input\" data-value=\"3\"></i>\r\n");
          out.write("                                                    <i class=\"fas fa-star rating-star-input\" data-value=\"4\"></i>\r\n");
          out.write("                                                    <i class=\"fas fa-star rating-star-input\" data-value=\"5\"></i>\r\n");
          out.write("                                                </div>\r\n");
          out.write("                                                <input type=\"hidden\" name=\"rating\" id=\"ratingValue\" value=\"5\" required>\r\n");
          out.write("                                            </div>\r\n");
          out.write("                                            <div>\r\n");
          out.write("                                                <textarea name=\"comment\" rows=\"4\"\r\n");
          out.write("                                                    placeholder=\"Để lại đánh giá của bạn về sản phẩm này...\"\r\n");
          out.write("                                                    style=\"width: 100%; padding: 10px; border: 1px solid rgba(0,0,0,.14); border-radius: 2px; font-size: 14px; outline: none; resize: vertical;\"\r\n");
          out.write("                                                    required></textarea>\r\n");
          out.write("                                            </div>\r\n");
          out.write("                                            <div style=\"display: flex; justify-content: flex-end;\">\r\n");
          out.write("                                                <button type=\"submit\" class=\"btn btn-buy-now\"\r\n");
          out.write("                                                    style=\"height: 40px; padding: 0 30px; line-height: 40px; border-radius: 2px;\">Gửi\r\n");
          out.write("                                                    Đánh Giá</button>\r\n");
          out.write("                                            </div>\r\n");
          out.write("                                        </form>\r\n");
          out.write("                                    </div>\r\n");
          out.write("                                    <script>\r\n");
          out.write("                                        const starsList = document.querySelectorAll('.rating-star-input');\r\n");
          out.write("                                        const ratingInput = document.getElementById('ratingValue');\r\n");
          out.write("\r\n");
          out.write("                                        starsList.forEach(star => {\r\n");
          out.write("                                            star.addEventListener('mouseover', function () {\r\n");
          out.write("                                                const val = parseInt(this.getAttribute('data-value'));\r\n");
          out.write("                                                updateStars(val);\r\n");
          out.write("                                            });\r\n");
          out.write("                                            star.addEventListener('mouseout', function () {\r\n");
          out.write("                                                const val = parseInt(ratingInput.value) || 0;\r\n");
          out.write("                                                updateStars(val);\r\n");
          out.write("                                            });\r\n");
          out.write("                                            star.addEventListener('click', function () {\r\n");
          out.write("                                                ratingInput.value = this.getAttribute('data-value');\r\n");
          out.write("                                                updateStars(parseInt(this.getAttribute('data-value')));\r\n");
          out.write("                                            });\r\n");
          out.write("                                        });\r\n");
          out.write("\r\n");
          out.write("                                        function updateStars(val) {\r\n");
          out.write("                                            starsList.forEach((s, idx) => {\r\n");
          out.write("                                                if (idx < val) {\r\n");
          out.write("                                                    s.classList.remove('far');\r\n");
          out.write("                                                    s.classList.add('fas');\r\n");
          out.write("                                                } else {\r\n");
          out.write("                                                    s.classList.remove('fas');\r\n");
          out.write("                                                    s.classList.add('far');\r\n");
          out.write("                                                }\r\n");
          out.write("                                            });\r\n");
          out.write("                                        }\r\n");
          out.write("                                    </script>\r\n");
          out.write("                                ");
          int evalDoAfterBody = _jspx_th_c_005fif_005f8.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fif_005f8.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.reuse(_jspx_th_c_005fif_005f8);
      _jspx_th_c_005fif_005f8_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fif_005f8, _jsp_getInstanceManager(), _jspx_th_c_005fif_005f8_reused);
    }
    return false;
  }

  private boolean _jspx_meth_c_005fif_005f9(jakarta.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    jakarta.servlet.jsp.PageContext pageContext = _jspx_page_context;
    jakarta.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  c:if
    org.apache.taglibs.standard.tag.rt.core.IfTag _jspx_th_c_005fif_005f9 = (org.apache.taglibs.standard.tag.rt.core.IfTag) _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.get(org.apache.taglibs.standard.tag.rt.core.IfTag.class);
    boolean _jspx_th_c_005fif_005f9_reused = false;
    try {
      _jspx_th_c_005fif_005f9.setPageContext(_jspx_page_context);
      _jspx_th_c_005fif_005f9.setParent(null);
      // /product_detail.jsp(1240,32) name = test type = boolean reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_c_005fif_005f9.setTest(((java.lang.Boolean) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${empty sessionScope.account}", boolean.class, (jakarta.servlet.jsp.PageContext)_jspx_page_context, null)).booleanValue());
      int _jspx_eval_c_005fif_005f9 = _jspx_th_c_005fif_005f9.doStartTag();
      if (_jspx_eval_c_005fif_005f9 != jakarta.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("                                    <div class=\"section-box\"\r\n");
          out.write("                                        style=\"margin-top: 20px; text-align: center; padding: 30px;\">\r\n");
          out.write("                                        <div style=\"font-size: 16px; color: rgba(0,0,0,.87); margin-bottom: 15px;\">Vui\r\n");
          out.write("                                            lòng đăng nhập để viết đánh giá cho sản phẩm này nhé.</div>\r\n");
          out.write("                                        <a href=\"login.jsp\" class=\"btn btn-add-cart\"\r\n");
          out.write("                                            style=\"display: inline-flex; justify-content: center; width: auto;\">Đăng\r\n");
          out.write("                                            Nhập</a>\r\n");
          out.write("                                    </div>\r\n");
          out.write("                                ");
          int evalDoAfterBody = _jspx_th_c_005fif_005f9.doAfterBody();
          if (evalDoAfterBody != jakarta.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_005fif_005f9.doEndTag() == jakarta.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fc_005fif_0026_005ftest.reuse(_jspx_th_c_005fif_005f9);
      _jspx_th_c_005fif_005f9_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fif_005f9, _jsp_getInstanceManager(), _jspx_th_c_005fif_005f9_reused);
    }
    return false;
  }
}
