2.1. E-Commerce Simulation (MÃ´ hÃ¬nh Shopee/Lazada) Thá»±c thá»ƒ: User, Shop, Product (vá»›i nhiá»u biáº¿n thá»ƒ Size/MÃ u), Order, Voucher. ThÃ¡ch thá»©c: Xá»­ lÃ½ giá» hÃ ng, tÃ­nh toÃ¡n khuyáº¿n mÃ£i chá»“ng chÃ©o, logic tá»“n kho biáº¿n thá»ƒ. Simulator: Giáº£ láº­p "Flash Sale" - hÃ ng nghÃ¬n user cÃ¹ng Ä‘áº·t hÃ ng má»™t lÃºc, há»‡ thá»‘ng pháº£i trá»« kho chÃ­nh xÃ¡c. táº¡o bá»™ dá»¯ liá»‡u máº«u legacy data báº±ng script >10000 dÃ²ng cá»‘ tÃ¬nh cÃ i cáº¯m lá»—i sai format viáº¿t báº±ng java
Ã tÆ°á»Ÿng dataset (legacy báº©n cÃ³ chá»§ Ä‘Ã­ch)
Thá»±c thá»ƒ trá»™n chung 1 file (ráº¥t legacy)

USER

SHOP

PRODUCT (cÃ³ variant Size/MÃ u)

ORDER

ORDER_ITEM

VOUCHER

ðŸ‘‰ Cá»‘ tÃ¬nh vi pháº¡m chuáº©n:

Láº«n delimiter | , ;

Thiáº¿u cá»™t

Thá»«a cá»™t

Sai kiá»ƒu dá»¯ liá»‡u

Ã‚m sá»‘ lÆ°á»£ng tá»“n kho

GiÃ¡ = text

Order trá»« kho sai

Voucher chá»“ng sai rule

DÃ²ng bá»‹ cáº¯t ná»­a chá»«ng

Encoding kÃ½ tá»± Viá»‡t láº«n ASCII

Format giáº£ (khÃ´ng thá»‘ng nháº¥t â€“ cá»‘ Ã½)
TYPE|field1|field2|field3...


VÃ­ dá»¥:

USER|u102|PhÃºc LÃª|phuc@email.com|ACTIVE
PRODUCT|p88|shop3|Ão thun|RED|L|199000|50
ORDER_ITEM|o12|p88|RED|L|3|199000


NhÆ°ng sáº½ cÃ³ dÃ²ng lá»—i nhÆ°:

PRODUCT,p91,shop2,Ão sÆ¡ mi,X,L,abc,20
ORDER|o77|u5|shop3|2025-13-40|FLASHSALE
ORDER_ITEM|o77|p12|RED|M|-5|150000
USER|u9|Nguyá»…n VÄƒn A

Java Script â€“ Legacy Data Generator (>10.000 dÃ²ng)

Cháº¡y lÃ  nÃ³ táº¡o file legacy_ecommerce_data.txt

import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;
import java.util.Random;

public class LegacyEcommerceDataGenerator {

    static Random random = new Random();

    static String[] colors = {"RED", "BLUE", "BLACK", "WHITE", "GREEN"};
    static String[] sizes = {"S", "M", "L", "XL"};
    static String[] statuses = {"ACTIVE", "BLOCKED", "BANNED"};
    static String[] delimiters = {"|", ",", ";"};

    public static void main(String[] args) throws IOException {
        BufferedWriter writer = new BufferedWriter(
                new FileWriter("legacy_ecommerce_data.txt"));

        int TOTAL_LINES = 12000;

        for (int i = 1; i <= TOTAL_LINES; i++) {
            int type = random.nextInt(6);

            String line;
            switch (type) {
                case 0:
                    line = genUser(i);
                    break;
                case 1:
                    line = genShop(i);
                    break;
                case 2:
                    line = genProduct(i);
                    break;
                case 3:
                    line = genOrder(i);
                    break;
                case 4:
                    line = genOrderItem(i);
                    break;
                default:
                    line = genVoucher(i);
            }

            // 10% dÃ²ng bá»‹ cáº¯t ná»­a (legacy crash)
            if (random.nextInt(10) == 0) {
                line = line.substring(0, random.nextInt(line.length() / 2 + 1));
            }

            writer.write(line);
            writer.newLine();
        }

        writer.close();
        System.out.println("Generated legacy_ecommerce_data.txt");
    }

    static String d() {
        return delimiters[random.nextInt(delimiters.length)];
    }

    static String genUser(int i) {
        String delim = d();

        // thiáº¿u field email (lá»—i)
        if (random.nextInt(8) == 0) {
            return "USER" + delim + "u" + i + delim + "Nguyen Van " + i;
        }

        return "USER" + delim +
                "u" + i + delim +
                "User_" + i + delim +
                "user" + i + "@mail.com" + delim +
                statuses[random.nextInt(statuses.length)];
    }

    static String genShop(int i) {
        String delim = d();

        return "SHOP" + delim +
                "s" + i + delim +
                "Shop_" + i + delim +
                (random.nextBoolean() ? "ACTIVE" : "INACTIVE");
    }

    static String genProduct(int i) {
        String delim = d();

        // giÃ¡ bá»‹ text (lá»—i)
        String price = random.nextInt(10) == 0 ? "abc"
                : String.valueOf(10000 + random.nextInt(500000));

        // tá»“n kho Ã¢m (lá»—i)
        int stock = random.nextInt(10) == 0 ? -random.nextInt(20)
                : random.nextInt(500);

        return "PRODUCT" + delim +
                "p" + i + delim +
                "s" + random.nextInt(200) + delim +
                "Product_" + i + delim +
                colors[random.nextInt(colors.length)] + delim +
                sizes[random.nextInt(sizes.length)] + delim +
                price + delim +
                stock;
    }

    static String genOrder(int i) {
        String delim = d();

        // ngÃ y sai format
        String date = random.nextInt(6) == 0
                ? "2025-13-45"
                : "2025-01-" + (1 + random.nextInt(28));

        return "ORDER" + delim +
                "o" + i + delim +
                "u" + random.nextInt(1000) + delim +
                "s" + random.nextInt(200) + delim +
                date + delim +
                (random.nextBoolean() ? "FLASHSALE" : "NORMAL");
    }

    static String genOrderItem(int i) {
        String delim = d();

        // sá»‘ lÆ°á»£ng Ã¢m hoáº·c 0 (lá»—i logic)
        int qty = random.nextInt(7) == 0 ? -random.nextInt(5)
                : 1 + random.nextInt(5);

        return "ORDER_ITEM" + delim +
                "o" + random.nextInt(3000) + delim +
                "p" + random.nextInt(2000) + delim +
                colors[random.nextInt(colors.length)] + delim +
                sizes[random.nextInt(sizes.length)] + delim +
                qty + delim +
                (10000 + random.nextInt(300000));
    }

    static String genVoucher(int i) {
        String delim = d();

        // discount > 100% (lá»—i)
        int discount = random.nextInt(8) == 0
                ? 150
                : 5 + random.nextInt(50);

        return "VOUCHER" + delim +
                "v" + i + delim +
                "FLASH_" + i + delim +
                discount + delim +
                (random.nextBoolean() ? "STACKABLE" : "EXCLUSIVE");
    }
}

Dataset nÃ y dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬ lÃ  chuáº©n bÃ i?

âœ” Test parser chá»‹u lá»—i
âœ” Migration tá»« legacy text â†’ DB
âœ” Validate inventory theo variant
âœ” Test flash sale concurrency (khi load vÃ o DB)
âœ” Viáº¿t data cleansing rules
âœ” Chaos engineering cho ETL ðŸ˜ˆ

Náº¿u báº¡n muá»‘n:

TÃ¡ch má»—i entity ra 1 file

Sinh race condition giáº£ láº­p Flash Sale

Sinh log trá»« kho sai thá»© tá»±

Hoáº·c generate SQL insert lá»—i
